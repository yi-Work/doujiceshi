(self["webpackChunkdoujimall"]=self["webpackChunkdoujimall"]||[]).push([[80],{96838:function(e,t,r){"use strict";
/**
 * Support for translating between Uint8Array instances and JavaScript
 * native types.
 *
 * {@link module:Layout~Layout|Layout} is the basis of a class
 * hierarchy that associates property names with sequences of encoded
 * bytes.
 *
 * Layouts are supported for these scalar (numeric) types:
 * * {@link module:Layout~UInt|Unsigned integers in little-endian
 *   format} with {@link module:Layout.u8|8-bit}, {@link
 *   module:Layout.u16|16-bit}, {@link module:Layout.u24|24-bit},
 *   {@link module:Layout.u32|32-bit}, {@link
 *   module:Layout.u40|40-bit}, and {@link module:Layout.u48|48-bit}
 *   representation ranges;
 * * {@link module:Layout~UIntBE|Unsigned integers in big-endian
 *   format} with {@link module:Layout.u16be|16-bit}, {@link
 *   module:Layout.u24be|24-bit}, {@link module:Layout.u32be|32-bit},
 *   {@link module:Layout.u40be|40-bit}, and {@link
 *   module:Layout.u48be|48-bit} representation ranges;
 * * {@link module:Layout~Int|Signed integers in little-endian
 *   format} with {@link module:Layout.s8|8-bit}, {@link
 *   module:Layout.s16|16-bit}, {@link module:Layout.s24|24-bit},
 *   {@link module:Layout.s32|32-bit}, {@link
 *   module:Layout.s40|40-bit}, and {@link module:Layout.s48|48-bit}
 *   representation ranges;
 * * {@link module:Layout~IntBE|Signed integers in big-endian format}
 *   with {@link module:Layout.s16be|16-bit}, {@link
 *   module:Layout.s24be|24-bit}, {@link module:Layout.s32be|32-bit},
 *   {@link module:Layout.s40be|40-bit}, and {@link
 *   module:Layout.s48be|48-bit} representation ranges;
 * * 64-bit integral values that decode to an exact (if magnitude is
 *   less than 2^53) or nearby integral Number in {@link
 *   module:Layout.nu64|unsigned little-endian}, {@link
 *   module:Layout.nu64be|unsigned big-endian}, {@link
 *   module:Layout.ns64|signed little-endian}, and {@link
 *   module:Layout.ns64be|unsigned big-endian} encodings;
 * * 32-bit floating point values with {@link
 *   module:Layout.f32|little-endian} and {@link
 *   module:Layout.f32be|big-endian} representations;
 * * 64-bit floating point values with {@link
 *   module:Layout.f64|little-endian} and {@link
 *   module:Layout.f64be|big-endian} representations;
 * * {@link module:Layout.const|Constants} that take no space in the
 *   encoded expression.
 *
 * and for these aggregate types:
 * * {@link module:Layout.seq|Sequence}s of instances of a {@link
 *   module:Layout~Layout|Layout}, with JavaScript representation as
 *   an Array and constant or data-dependent {@link
 *   module:Layout~Sequence#count|length};
 * * {@link module:Layout.struct|Structure}s that aggregate a
 *   heterogeneous sequence of {@link module:Layout~Layout|Layout}
 *   instances, with JavaScript representation as an Object;
 * * {@link module:Layout.union|Union}s that support multiple {@link
 *   module:Layout~VariantLayout|variant layouts} over a fixed
 *   (padded) or variable (not padded) span of bytes, using an
 *   unsigned integer at the start of the data or a separate {@link
 *   module:Layout.unionLayoutDiscriminator|layout element} to
 *   determine which layout to use when interpreting the buffer
 *   contents;
 * * {@link module:Layout.bits|BitStructure}s that contain a sequence
 *   of individual {@link
 *   module:Layout~BitStructure#addField|BitField}s packed into an 8,
 *   16, 24, or 32-bit unsigned integer starting at the least- or
 *   most-significant bit;
 * * {@link module:Layout.cstr|C strings} of varying length;
 * * {@link module:Layout.blob|Blobs} of fixed- or variable-{@link
 *   module:Layout~Blob#length|length} raw data.
 *
 * All {@link module:Layout~Layout|Layout} instances are immutable
 * after construction, to prevent internal state from becoming
 * inconsistent.
 *
 * @local Layout
 * @local ExternalLayout
 * @local GreedyCount
 * @local OffsetLayout
 * @local UInt
 * @local UIntBE
 * @local Int
 * @local IntBE
 * @local NearUInt64
 * @local NearUInt64BE
 * @local NearInt64
 * @local NearInt64BE
 * @local Float
 * @local FloatBE
 * @local Double
 * @local DoubleBE
 * @local Sequence
 * @local Structure
 * @local UnionDiscriminator
 * @local UnionLayoutDiscriminator
 * @local Union
 * @local VariantLayout
 * @local BitStructure
 * @local BitField
 * @local Boolean
 * @local Blob
 * @local CString
 * @local Constant
 * @local bindConstructorLayout
 * @module Layout
 * @license MIT
 * @author Peter A. Bigot
 * @see {@link https://github.com/pabigot/buffer-layout|buffer-layout on GitHub}
 */
r(1439),r(87585),r(55315),r(57658),t._O=t.Jq=t.KB=t.u8=t.cv=void 0,t.Ik=t.A9=t.n_=t.gM=void 0;const n=r(75194);function i(e){if(!(e instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}function o(e){return i(e),n.Buffer.from(e.buffer,e.byteOffset,e.length)}class s{constructor(e,t){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}getSpan(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}}function a(e,t){return t.property?e+"["+t.property+"]":e}function u(e,t){if("function"!==typeof e)throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(e,"layout_"))throw new Error("Class is already bound to a layout");if(!(t&&t instanceof s))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(t,"boundConstructor_"))throw new Error("layout is already bound to a constructor");e.layout_=t,t.boundConstructor_=e,t.makeDestinationObject=()=>new e,Object.defineProperty(e.prototype,"encode",{value(e,r){return t.encode(this,e,r)},writable:!0}),Object.defineProperty(e,"decode",{value(e,r){return t.decode(e,r)},writable:!0})}class c extends s{isCount(){throw new Error("ExternalLayout is abstract")}}class f extends c{constructor(e=1,t){if(!Number.isInteger(e)||0>=e)throw new TypeError("elementSpan must be a (positive) integer");super(-1,t),this.elementSpan=e}isCount(){return!0}decode(e,t=0){i(e);const r=e.length-t;return Math.floor(r/this.elementSpan)}encode(e,t,r){return 0}}class l extends c{constructor(e,t=0,r){if(!(e instanceof s))throw new TypeError("layout must be a Layout");if(!Number.isInteger(t))throw new TypeError("offset must be integer or undefined");super(e.span,r||e.property),this.layout=e,this.offset=t}isCount(){return this.layout instanceof h||this.layout instanceof p}decode(e,t=0){return this.layout.decode(e,t+this.offset)}encode(e,t,r=0){return this.layout.encode(e,t,r+this.offset)}}class h extends s{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return o(e).readUIntLE(t,this.span)}encode(e,t,r=0){return o(t).writeUIntLE(e,r,this.span),this.span}}class p extends s{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return o(e).readUIntBE(t,this.span)}encode(e,t,r=0){return o(t).writeUIntBE(e,r,this.span),this.span}}class d extends s{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return o(e).readIntLE(t,this.span)}encode(e,t,r=0){return o(t).writeIntLE(e,r,this.span),this.span}}class y extends s{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return o(e).readIntBE(t,this.span)}encode(e,t,r=0){return o(t).writeIntBE(e,r,this.span),this.span}}const g=Math.pow(2,32);function b(e){const t=Math.floor(e/g),r=e-t*g;return{hi32:t,lo32:r}}function m(e,t){return e*g+t}class w extends s{constructor(e){super(8,e)}decode(e,t=0){const r=o(e),n=r.readUInt32LE(t),i=r.readUInt32LE(t+4);return m(i,n)}encode(e,t,r=0){const n=b(e),i=o(t);return i.writeUInt32LE(n.lo32,r),i.writeUInt32LE(n.hi32,r+4),8}}class v extends s{constructor(e){super(8,e)}decode(e,t=0){const r=o(e),n=r.readUInt32BE(t),i=r.readUInt32BE(t+4);return m(n,i)}encode(e,t,r=0){const n=b(e),i=o(t);return i.writeUInt32BE(n.hi32,r),i.writeUInt32BE(n.lo32,r+4),8}}class k extends s{constructor(e){super(8,e)}decode(e,t=0){const r=o(e),n=r.readUInt32LE(t),i=r.readInt32LE(t+4);return m(i,n)}encode(e,t,r=0){const n=b(e),i=o(t);return i.writeUInt32LE(n.lo32,r),i.writeInt32LE(n.hi32,r+4),8}}class x extends s{constructor(e){super(8,e)}decode(e,t=0){const r=o(e),n=r.readInt32BE(t),i=r.readUInt32BE(t+4);return m(n,i)}encode(e,t,r=0){const n=b(e),i=o(t);return i.writeInt32BE(n.hi32,r),i.writeUInt32BE(n.lo32,r+4),8}}class S extends s{constructor(e){super(4,e)}decode(e,t=0){return o(e).readFloatLE(t)}encode(e,t,r=0){return o(t).writeFloatLE(e,r),4}}class E extends s{constructor(e){super(4,e)}decode(e,t=0){return o(e).readFloatBE(t)}encode(e,t,r=0){return o(t).writeFloatBE(e,r),4}}class I extends s{constructor(e){super(8,e)}decode(e,t=0){return o(e).readDoubleLE(t)}encode(e,t,r=0){return o(t).writeDoubleLE(e,r),8}}class B extends s{constructor(e){super(8,e)}decode(e,t=0){return o(e).readDoubleBE(t)}encode(e,t,r=0){return o(t).writeDoubleBE(e,r),8}}class A extends s{constructor(e,t,r){if(!(e instanceof s))throw new TypeError("elementLayout must be a Layout");if(!(t instanceof c&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let n=-1;!(t instanceof c)&&0<e.span&&(n=t*e.span),super(n,r),this.elementLayout=e,this.count=t}getSpan(e,t=0){if(0<=this.span)return this.span;let r=0,n=this.count;if(n instanceof c&&(n=n.decode(e,t)),0<this.elementLayout.span)r=n*this.elementLayout.span;else{let i=0;while(i<n)r+=this.elementLayout.getSpan(e,t+r),++i}return r}decode(e,t=0){const r=[];let n=0,i=this.count;i instanceof c&&(i=i.decode(e,t));while(n<i)r.push(this.elementLayout.decode(e,t)),t+=this.elementLayout.getSpan(e,t),n+=1;return r}encode(e,t,r=0){const n=this.elementLayout,i=e.reduce(((e,i)=>e+n.encode(i,t,r+e)),0);return this.count instanceof c&&this.count.encode(e.length,t,r),i}}class _ extends s{constructor(e,t,r){if(!Array.isArray(e)||!e.reduce(((e,t)=>e&&t instanceof s),!0))throw new TypeError("fields must be array of Layout instances");"boolean"===typeof t&&void 0===r&&(r=t,t=void 0);for(const o of e)if(0>o.span&&void 0===o.property)throw new Error("fields cannot contain unnamed variable-length layout");let n=-1;try{n=e.reduce(((e,t)=>e+t.getSpan()),0)}catch(i){}super(n,t),this.fields=e,this.decodePrefixes=!!r}getSpan(e,t=0){if(0<=this.span)return this.span;let r=0;try{r=this.fields.reduce(((r,n)=>{const i=n.getSpan(e,t);return t+=i,r+i}),0)}catch(n){throw new RangeError("indeterminate span")}return r}decode(e,t=0){i(e);const r=this.makeDestinationObject();for(const n of this.fields)if(void 0!==n.property&&(r[n.property]=n.decode(e,t)),t+=n.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return r}encode(e,t,r=0){const n=r;let i=0,o=0;for(const s of this.fields){let n=s.span;if(o=0<n?n:0,void 0!==s.property){const i=e[s.property];void 0!==i&&(o=s.encode(i,t,r),0>n&&(n=s.getSpan(t,r)))}i=r,r+=n}return i+o-n}fromArray(e){const t=this.makeDestinationObject();for(const r of this.fields)void 0!==r.property&&0<e.length&&(t[r.property]=e.shift());return t}layoutFor(e){if("string"!==typeof e)throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}offsetOf(e){if("string"!==typeof e)throw new TypeError("property must be string");let t=0;for(const r of this.fields){if(r.property===e)return t;0>r.span?t=-1:0<=t&&(t+=r.span)}}}class O{constructor(e){this.property=e}decode(e,t){throw new Error("UnionDiscriminator is abstract")}encode(e,t,r){throw new Error("UnionDiscriminator is abstract")}}class P extends O{constructor(e,t){if(!(e instanceof c&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(t||e.property||"variant"),this.layout=e}decode(e,t){return this.layout.decode(e,t)}encode(e,t,r){return this.layout.encode(e,t,r)}}class T extends s{constructor(e,t,r){let n;if(e instanceof h||e instanceof p)n=new P(new l(e));else if(e instanceof c&&e.isCount())n=new P(e);else{if(!(e instanceof O))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");n=e}if(void 0===t&&(t=null),!(null===t||t instanceof s))throw new TypeError("defaultLayout must be null or a Layout");if(null!==t){if(0>t.span)throw new Error("defaultLayout must have constant span");void 0===t.property&&(t=t.replicate("content"))}let i=-1;t&&(i=t.span,0<=i&&(e instanceof h||e instanceof p)&&(i+=n.layout.span)),super(i,r),this.discriminator=n,this.usesPrefixDiscriminator=e instanceof h||e instanceof p,this.defaultLayout=t,this.registry={};let o=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(e){return o(e)},this.configGetSourceVariant=function(e){o=e.bind(this)}}getSpan(e,t=0){if(0<=this.span)return this.span;const r=this.getVariant(e,t);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(e,t)}defaultGetSourceVariant(e){if(Object.prototype.hasOwnProperty.call(e,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(e,this.defaultLayout.property))return;const t=this.registry[e[this.discriminator.property]];if(t&&(!t.layout||t.property&&Object.prototype.hasOwnProperty.call(e,t.property)))return t}else for(const t in this.registry){const r=this.registry[t];if(r.property&&Object.prototype.hasOwnProperty.call(e,r.property))return r}throw new Error("unable to infer src variant")}decode(e,t=0){let r;const n=this.discriminator,i=n.decode(e,t),o=this.registry[i];if(void 0===o){const o=this.defaultLayout;let s=0;this.usesPrefixDiscriminator&&(s=n.layout.span),r=this.makeDestinationObject(),r[n.property]=i,r[o.property]=o.decode(e,t+s)}else r=o.decode(e,t);return r}encode(e,t,r=0){const n=this.getSourceVariant(e);if(void 0===n){const n=this.discriminator,i=this.defaultLayout;let o=0;return this.usesPrefixDiscriminator&&(o=n.layout.span),n.encode(e[n.property],t,r),o+i.encode(e[i.property],t,r+o)}return n.encode(e,t,r)}addVariant(e,t,r){const n=new R(this,e,t,r);return this.registry[e]=n,n}getVariant(e,t=0){let r;return r=e instanceof Uint8Array?this.discriminator.decode(e,t):e,this.registry[r]}}class R extends s{constructor(e,t,r,n){if(!(e instanceof T))throw new TypeError("union must be a Union");if(!Number.isInteger(t)||0>t)throw new TypeError("variant must be a (non-negative) integer");if("string"===typeof r&&void 0===n&&(n=r,r=null),r){if(!(r instanceof s))throw new TypeError("layout must be a Layout");if(null!==e.defaultLayout&&0<=r.span&&r.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if("string"!==typeof n)throw new TypeError("variant must have a String property")}let i=e.span;0>e.span&&(i=r?r.span:0,0<=i&&e.usesPrefixDiscriminator&&(i+=e.discriminator.layout.span)),super(i,n),this.union=e,this.variant=t,this.layout=r||null}getSpan(e,t=0){if(0<=this.span)return this.span;let r=0;this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span);let n=0;return this.layout&&(n=this.layout.getSpan(e,t+r)),r+n}decode(e,t=0){const r=this.makeDestinationObject();if(this!==this.union.getVariant(e,t))throw new Error("variant mismatch");let n=0;return this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(e,t+n):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(e,t,r=0){let n=0;if(this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(e,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,t,r);let i=n;if(this.layout&&(this.layout.encode(e[this.property],t,r+n),i+=this.layout.getSpan(t,r+n),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i}fromArray(e){if(this.layout)return this.layout.fromArray(e)}}function L(e){return 0>e&&(e+=4294967296),e}class U extends s{constructor(e,t,r){if(!(e instanceof h||e instanceof p))throw new TypeError("word must be a UInt or UIntBE layout");if("string"===typeof t&&void 0===r&&(r=t,t=!1),4<e.span)throw new RangeError("word cannot exceed 32 bits");super(e.span,r),this.word=e,this.msb=!!t,this.fields=[];let n=0;this._packedSetValue=function(e){return n=L(e),this},this._packedGetValue=function(){return n}}decode(e,t=0){const r=this.makeDestinationObject(),n=this.word.decode(e,t);this._packedSetValue(n);for(const i of this.fields)void 0!==i.property&&(r[i.property]=i.decode(e));return r}encode(e,t,r=0){const n=this.word.decode(t,r);this._packedSetValue(n);for(const i of this.fields)if(void 0!==i.property){const t=e[i.property];void 0!==t&&i.encode(t)}return this.word.encode(this._packedGetValue(),t,r)}addField(e,t){const r=new C(this,e,t);return this.fields.push(r),r}addBoolean(e){const t=new W(this,e);return this.fields.push(t),t}fieldFor(e){if("string"!==typeof e)throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}}class C{constructor(e,t,r){if(!(e instanceof U))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(t)||0>=t)throw new TypeError("bits must be positive integer");const n=8*e.span,i=e.fields.reduce(((e,t)=>e+t.bits),0);if(t+i>n)throw new Error("bits too long for span remainder ("+(n-i)+" of "+n+" remain)");this.container=e,this.bits=t,this.valueMask=(1<<t)-1,32===t&&(this.valueMask=4294967295),this.start=i,this.container.msb&&(this.start=n-i-t),this.wordMask=L(this.valueMask<<this.start),this.property=r}decode(e,t){const r=this.container._packedGetValue(),n=L(r&this.wordMask),i=n>>>this.start;return i}encode(e){if("number"!==typeof e||!Number.isInteger(e)||e!==L(e&this.valueMask))throw new TypeError(a("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const t=this.container._packedGetValue(),r=L(e<<this.start);this.container._packedSetValue(L(t&~this.wordMask)|r)}}class W extends C{constructor(e,t){super(e,1,t)}decode(e,t){return!!super.decode(e,t)}encode(e){"boolean"===typeof e&&(e=+e),super.encode(e)}}class z extends s{constructor(e,t){if(!(e instanceof c&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;e instanceof c||(r=e),super(r,t),this.length=e}getSpan(e,t){let r=this.span;return 0>r&&(r=this.length.decode(e,t)),r}decode(e,t=0){let r=this.span;return 0>r&&(r=this.length.decode(e,t)),o(e).slice(t,t+r)}encode(e,t,r){let n=this.length;if(this.length instanceof c&&(n=e.length),!(e instanceof Uint8Array&&n===e.length))throw new TypeError(a("Blob.encode",this)+" requires (length "+n+") Uint8Array as src");if(r+n>t.length)throw new RangeError("encoding overruns Uint8Array");const i=o(e);return o(t).write(i.toString("hex"),r,n,"hex"),this.length instanceof c&&this.length.encode(n,t,r),n}}class N extends s{constructor(e){super(-1,e)}getSpan(e,t=0){i(e);let r=t;while(r<e.length&&0!==e[r])r+=1;return 1+r-t}decode(e,t=0){const r=this.getSpan(e,t);return o(e).slice(t,t+r-1).toString("utf-8")}encode(e,t,r=0){"string"!==typeof e&&(e=String(e));const i=n.Buffer.from(e,"utf8"),s=i.length;if(r+s>t.length)throw new RangeError("encoding overruns Buffer");const a=o(t);return i.copy(a,r),a[r+s]=0,s+1}}class q extends s{constructor(e,t){if("string"===typeof e&&void 0===t&&(t=e,e=void 0),void 0===e)e=-1;else if(!Number.isInteger(e))throw new TypeError("maxSpan must be an integer");super(-1,t),this.maxSpan=e}getSpan(e,t=0){return i(e),e.length-t}decode(e,t=0){const r=this.getSpan(e,t);if(0<=this.maxSpan&&this.maxSpan<r)throw new RangeError("text length exceeds maxSpan");return o(e).slice(t,t+r).toString("utf-8")}encode(e,t,r=0){"string"!==typeof e&&(e=String(e));const i=n.Buffer.from(e,"utf8"),s=i.length;if(0<=this.maxSpan&&this.maxSpan<s)throw new RangeError("text length exceeds maxSpan");if(r+s>t.length)throw new RangeError("encoding overruns Buffer");return i.copy(o(t),r),s}}class j extends s{constructor(e,t){super(0,t),this.value=e}decode(e,t){return this.value}encode(e,t,r){return 0}}t.cv=(e,t,r)=>new l(e,t,r),t.u8=e=>new h(1,e),t.KB=e=>new h(2,e),t.Jq=e=>new h(4,e),t._O=e=>new w(e),t.gM=e=>new k(e),t.n_=(e,t,r)=>new _(e,t,r),t.A9=(e,t,r)=>new A(e,t,r),t.Ik=(e,t)=>new z(e,t)},75194:function(e,t,r){"use strict";
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */r(1439),r(87585),r(55315),r(57658);const n=r(76483),i=r(61615),o="function"===typeof Symbol&&"function"===typeof Symbol["for"]?Symbol["for"]("nodejs.util.inspect.custom"):null;t.Buffer=c,t.SlowBuffer=v,t.INSPECT_MAX_BYTES=50;const s=2147483647;function a(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}function u(e){if(e>s)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,c.prototype),t}function c(e,t,r){if("number"===typeof e){if("string"===typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return p(e)}return f(e,t,r)}function f(e,t,r){if("string"===typeof e)return d(e,t);if(ArrayBuffer.isView(e))return g(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(se(e,ArrayBuffer)||e&&se(e.buffer,ArrayBuffer))return b(e,t,r);if("undefined"!==typeof SharedArrayBuffer&&(se(e,SharedArrayBuffer)||e&&se(e.buffer,SharedArrayBuffer)))return b(e,t,r);if("number"===typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return c.from(n,t,r);const i=m(e);if(i)return i;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof e[Symbol.toPrimitive])return c.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function l(e){if("number"!==typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function h(e,t,r){return l(e),e<=0?u(e):void 0!==t?"string"===typeof r?u(e).fill(t,r):u(e).fill(t):u(e)}function p(e){return l(e),u(e<0?0:0|w(e))}function d(e,t){if("string"===typeof t&&""!==t||(t="utf8"),!c.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const r=0|k(e,t);let n=u(r);const i=n.write(e,t);return i!==r&&(n=n.slice(0,i)),n}function y(e){const t=e.length<0?0:0|w(e.length),r=u(t);for(let n=0;n<t;n+=1)r[n]=255&e[n];return r}function g(e){if(se(e,Uint8Array)){const t=new Uint8Array(e);return b(t.buffer,t.byteOffset,t.byteLength)}return y(e)}function b(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,c.prototype),n}function m(e){if(c.isBuffer(e)){const t=0|w(e.length),r=u(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!==typeof e.length||ae(e.length)?u(0):y(e):"Buffer"===e.type&&Array.isArray(e.data)?y(e.data):void 0}function w(e){if(e>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|e}function v(e){return+e!=e&&(e=0),c.alloc(+e)}function k(e,t){if(c.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||se(e,ArrayBuffer))return e.byteLength;if("string"!==typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return te(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return ie(e).length;default:if(i)return n?-1:te(e).length;t=(""+t).toLowerCase(),i=!0}}function x(e,t,r){let n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,t>>>=0,r<=t)return"";e||(e="utf8");while(1)switch(e){case"hex":return z(this,t,r);case"utf8":case"utf-8":return R(this,t,r);case"ascii":return C(this,t,r);case"latin1":case"binary":return W(this,t,r);case"base64":return T(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function S(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function E(e,t,r,n,i){if(0===e.length)return-1;if("string"===typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,ae(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"===typeof t&&(t=c.from(t,n)),c.isBuffer(t))return 0===t.length?-1:I(e,t,r,n,i);if("number"===typeof t)return t&=255,"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):I(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function I(e,t,r,n,i){let o,s=1,a=e.length,u=t.length;if(void 0!==n&&(n=String(n).toLowerCase(),"ucs2"===n||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s=2,a/=2,u/=2,r/=2}function c(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){let n=-1;for(o=r;o<a;o++)if(c(e,o)===c(t,-1===n?0:o-n)){if(-1===n&&(n=o),o-n+1===u)return n*s}else-1!==n&&(o-=o-n),n=-1}else for(r+u>a&&(r=a-u),o=r;o>=0;o--){let r=!0;for(let n=0;n<u;n++)if(c(e,o+n)!==c(t,n)){r=!1;break}if(r)return o}return-1}function B(e,t,r,n){r=Number(r)||0;const i=e.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;const o=t.length;let s;for(n>o/2&&(n=o/2),s=0;s<n;++s){const n=parseInt(t.substr(2*s,2),16);if(ae(n))return s;e[r+s]=n}return s}function A(e,t,r,n){return oe(te(t,e.length-r),e,r,n)}function _(e,t,r,n){return oe(re(t),e,r,n)}function O(e,t,r,n){return oe(ie(t),e,r,n)}function P(e,t,r,n){return oe(ne(t,e.length-r),e,r,n)}function T(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function R(e,t,r){r=Math.min(e.length,r);const n=[];let i=t;while(i<r){const t=e[i];let o=null,s=t>239?4:t>223?3:t>191?2:1;if(i+s<=r){let r,n,a,u;switch(s){case 1:t<128&&(o=t);break;case 2:r=e[i+1],128===(192&r)&&(u=(31&t)<<6|63&r,u>127&&(o=u));break;case 3:r=e[i+1],n=e[i+2],128===(192&r)&&128===(192&n)&&(u=(15&t)<<12|(63&r)<<6|63&n,u>2047&&(u<55296||u>57343)&&(o=u));break;case 4:r=e[i+1],n=e[i+2],a=e[i+3],128===(192&r)&&128===(192&n)&&128===(192&a)&&(u=(15&t)<<18|(63&r)<<12|(63&n)<<6|63&a,u>65535&&u<1114112&&(o=u))}}null===o?(o=65533,s=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),i+=s}return U(n)}t.kMaxLength=s,c.TYPED_ARRAY_SUPPORT=a(),c.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}}),c.poolSize=8192,c.from=function(e,t,r){return f(e,t,r)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array),c.alloc=function(e,t,r){return h(e,t,r)},c.allocUnsafe=function(e){return p(e)},c.allocUnsafeSlow=function(e){return p(e)},c.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==c.prototype},c.compare=function(e,t){if(se(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),se(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,n=t.length;for(let i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);let r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;const n=c.allocUnsafe(t);let i=0;for(r=0;r<e.length;++r){let t=e[r];if(se(t,Uint8Array))i+t.length>n.length?(c.isBuffer(t)||(t=c.from(t)),t.copy(n,i)):Uint8Array.prototype.set.call(n,t,i);else{if(!c.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(n,i)}i+=t.length}return n},c.byteLength=k,c.prototype._isBuffer=!0,c.prototype.swap16=function(){const e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)S(this,t,t+1);return this},c.prototype.swap32=function(){const e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)S(this,t,t+3),S(this,t+1,t+2);return this},c.prototype.swap64=function(){const e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)S(this,t,t+7),S(this,t+1,t+6),S(this,t+2,t+5),S(this,t+3,t+4);return this},c.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?R(this,0,e):x.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){let e="";const r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},o&&(c.prototype[o]=c.prototype.inspect),c.prototype.compare=function(e,t,r,n,i){if(se(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),!c.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,i>>>=0,this===e)return 0;let o=i-n,s=r-t;const a=Math.min(o,s),u=this.slice(n,i),f=e.slice(t,r);for(let c=0;c<a;++c)if(u[c]!==f[c]){o=u[c],s=f[c];break}return o<s?-1:s<o?1:0},c.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},c.prototype.indexOf=function(e,t,r){return E(this,e,t,r,!0)},c.prototype.lastIndexOf=function(e,t,r){return E(this,e,t,r,!1)},c.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"===typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let o=!1;for(;;)switch(n){case"hex":return B(this,e,t,r);case"utf8":case"utf-8":return A(this,e,t,r);case"ascii":case"latin1":case"binary":return _(this,e,t,r);case"base64":return O(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const L=4096;function U(e){const t=e.length;if(t<=L)return String.fromCharCode.apply(String,e);let r="",n=0;while(n<t)r+=String.fromCharCode.apply(String,e.slice(n,n+=L));return r}function C(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function W(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function z(e,t,r){const n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let i="";for(let o=t;o<r;++o)i+=ue[e[o]];return i}function N(e,t,r){const n=e.slice(t,r);let i="";for(let o=0;o<n.length-1;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function q(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function j(e,t,r,n,i,o){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function K(e,t,r,n,i){G(t,n,i,e,r,7);let o=Number(t&BigInt(4294967295));e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,r}function F(e,t,r,n,i){G(t,n,i,e,r,7);let o=Number(t&BigInt(4294967295));e[r+7]=o,o>>=8,e[r+6]=o,o>>=8,e[r+5]=o,o>>=8,e[r+4]=o;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=s,s>>=8,e[r+2]=s,s>>=8,e[r+1]=s,s>>=8,e[r]=s,r+8}function M(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function D(e,t,r,n,o){return t=+t,r>>>=0,o||M(e,t,r,4,34028234663852886e22,-34028234663852886e22),i.write(e,t,r,n,23,4),r+4}function H(e,t,r,n,o){return t=+t,r>>>=0,o||M(e,t,r,8,17976931348623157e292,-17976931348623157e292),i.write(e,t,r,n,52,8),r+8}c.prototype.slice=function(e,t){const r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),t<e&&(t=e);const n=this.subarray(e,t);return Object.setPrototypeOf(n,c.prototype),n},c.prototype.readUintLE=c.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||q(e,t,this.length);let n=this[e],i=1,o=0;while(++o<t&&(i*=256))n+=this[e+o]*i;return n},c.prototype.readUintBE=c.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||q(e,t,this.length);let n=this[e+--t],i=1;while(t>0&&(i*=256))n+=this[e+--t]*i;return n},c.prototype.readUint8=c.prototype.readUInt8=function(e,t){return e>>>=0,t||q(e,1,this.length),this[e]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(e,t){return e>>>=0,t||q(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(e,t){return e>>>=0,t||q(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(e,t){return e>>>=0,t||q(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(e,t){return e>>>=0,t||q(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readBigUInt64LE=ce((function(e){e>>>=0,Y(e,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||X(e,this.length-8);const n=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,i=this[++e]+256*this[++e]+65536*this[++e]+r*2**24;return BigInt(n)+(BigInt(i)<<BigInt(32))})),c.prototype.readBigUInt64BE=ce((function(e){e>>>=0,Y(e,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||X(e,this.length-8);const n=t*2**24+65536*this[++e]+256*this[++e]+this[++e],i=this[++e]*2**24+65536*this[++e]+256*this[++e]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)})),c.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||q(e,t,this.length);let n=this[e],i=1,o=0;while(++o<t&&(i*=256))n+=this[e+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*t)),n},c.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||q(e,t,this.length);let n=t,i=1,o=this[e+--n];while(n>0&&(i*=256))o+=this[e+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},c.prototype.readInt8=function(e,t){return e>>>=0,t||q(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){e>>>=0,t||q(e,2,this.length);const r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt16BE=function(e,t){e>>>=0,t||q(e,2,this.length);const r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt32LE=function(e,t){return e>>>=0,t||q(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return e>>>=0,t||q(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readBigInt64LE=ce((function(e){e>>>=0,Y(e,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||X(e,this.length-8);const n=this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),c.prototype.readBigInt64BE=ce((function(e){e>>>=0,Y(e,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||X(e,this.length-8);const n=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+r)})),c.prototype.readFloatLE=function(e,t){return e>>>=0,t||q(e,4,this.length),i.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return e>>>=0,t||q(e,4,this.length),i.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return e>>>=0,t||q(e,8,this.length),i.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return e>>>=0,t||q(e,8,this.length),i.read(this,e,!1,52,8)},c.prototype.writeUintLE=c.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){const n=Math.pow(2,8*r)-1;j(this,e,t,r,n,0)}let i=1,o=0;this[t]=255&e;while(++o<r&&(i*=256))this[t+o]=e/i&255;return t+r},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){const n=Math.pow(2,8*r)-1;j(this,e,t,r,n,0)}let i=r-1,o=1;this[t+i]=255&e;while(--i>=0&&(o*=256))this[t+i]=e/o&255;return t+r},c.prototype.writeUint8=c.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,1,255,0),this[t]=255&e,t+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeBigUInt64LE=ce((function(e,t=0){return K(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),c.prototype.writeBigUInt64BE=ce((function(e,t=0){return F(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),c.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);j(this,e,t,r,n-1,-n)}let i=0,o=1,s=0;this[t]=255&e;while(++i<r&&(o*=256))e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+r},c.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);j(this,e,t,r,n-1,-n)}let i=r-1,o=1,s=0;this[t+i]=255&e;while(--i>=0&&(o*=256))e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+r},c.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},c.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeBigInt64LE=ce((function(e,t=0){return K(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),c.prototype.writeBigInt64BE=ce((function(e,t=0){return F(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),c.prototype.writeFloatLE=function(e,t,r){return D(this,e,t,!0,r)},c.prototype.writeFloatBE=function(e,t,r){return D(this,e,t,!1,r)},c.prototype.writeDoubleLE=function(e,t,r){return H(this,e,t,!0,r)},c.prototype.writeDoubleBE=function(e,t,r){return H(this,e,t,!1,r)},c.prototype.copy=function(e,t,r,n){if(!c.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);const i=n-r;return this===e&&"function"===typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),i},c.prototype.fill=function(e,t,r,n){if("string"===typeof e){if("string"===typeof t?(n=t,t=0,r=this.length):"string"===typeof r&&(n=r,r=this.length),void 0!==n&&"string"!==typeof n)throw new TypeError("encoding must be a string");if("string"===typeof n&&!c.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){const t=e.charCodeAt(0);("utf8"===n&&t<128||"latin1"===n)&&(e=t)}}else"number"===typeof e?e&=255:"boolean"===typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;let i;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"===typeof e)for(i=t;i<r;++i)this[i]=e;else{const o=c.isBuffer(e)?e:c.from(e,n),s=o.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=o[i%s]}return this};const Z={};function $(e,t,r){Z[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function V(e){let t="",r=e.length;const n="-"===e[0]?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function J(e,t,r){Y(t,"offset"),void 0!==e[t]&&void 0!==e[t+r]||X(t,e.length-(r+1))}function G(e,t,r,n,i,o){if(e>r||e<t){const n="bigint"===typeof t?"n":"";let i;throw i=o>3?0===t||t===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(o+1)}${n}`:`>= -(2${n} ** ${8*(o+1)-1}${n}) and < 2 ** ${8*(o+1)-1}${n}`:`>= ${t}${n} and <= ${r}${n}`,new Z.ERR_OUT_OF_RANGE("value",i,e)}J(n,i,o)}function Y(e,t){if("number"!==typeof e)throw new Z.ERR_INVALID_ARG_TYPE(t,"number",e)}function X(e,t,r){if(Math.floor(e)!==e)throw Y(e,r),new Z.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new Z.ERR_BUFFER_OUT_OF_BOUNDS;throw new Z.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}$("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),$("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),$("ERR_OUT_OF_RANGE",(function(e,t,r){let n=`The value of "${e}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=V(String(r)):"bigint"===typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=V(i)),i+="n"),n+=` It must be ${t}. Received ${i}`,n}),RangeError);const Q=/[^+/0-9A-Za-z-_]/g;function ee(e){if(e=e.split("=")[0],e=e.trim().replace(Q,""),e.length<2)return"";while(e.length%4!==0)e+="=";return e}function te(e,t){let r;t=t||1/0;const n=e.length;let i=null;const o=[];for(let s=0;s<n;++s){if(r=e.charCodeAt(s),r>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function re(e){const t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function ne(e,t){let r,n,i;const o=[];for(let s=0;s<e.length;++s){if((t-=2)<0)break;r=e.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n)}return o}function ie(e){return n.toByteArray(ee(e))}function oe(e,t,r,n){let i;for(i=0;i<n;++i){if(i+r>=t.length||i>=e.length)break;t[i+r]=e[i]}return i}function se(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function ae(e){return e!==e}const ue=function(){const e="0123456789abcdef",t=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let i=0;i<16;++i)t[n+i]=e[r]+e[i]}return t}();function ce(e){return"undefined"===typeof BigInt?fe:e}function fe(){throw new Error("BigInt not supported")}},81087:function(e,t,r){"use strict";
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
r(1439),r(87585),r(55315),r(57658);const n=r(76483),i=r(61615),o="function"===typeof Symbol&&"function"===typeof Symbol["for"]?Symbol["for"]("nodejs.util.inspect.custom"):null;t.lW=c,t.h2=50;const s=2147483647;function a(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}function u(e){if(e>s)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,c.prototype),t}function c(e,t,r){if("number"===typeof e){if("string"===typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return p(e)}return f(e,t,r)}function f(e,t,r){if("string"===typeof e)return d(e,t);if(ArrayBuffer.isView(e))return g(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(se(e,ArrayBuffer)||e&&se(e.buffer,ArrayBuffer))return b(e,t,r);if("undefined"!==typeof SharedArrayBuffer&&(se(e,SharedArrayBuffer)||e&&se(e.buffer,SharedArrayBuffer)))return b(e,t,r);if("number"===typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return c.from(n,t,r);const i=m(e);if(i)return i;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof e[Symbol.toPrimitive])return c.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function l(e){if("number"!==typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function h(e,t,r){return l(e),e<=0?u(e):void 0!==t?"string"===typeof r?u(e).fill(t,r):u(e).fill(t):u(e)}function p(e){return l(e),u(e<0?0:0|w(e))}function d(e,t){if("string"===typeof t&&""!==t||(t="utf8"),!c.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const r=0|k(e,t);let n=u(r);const i=n.write(e,t);return i!==r&&(n=n.slice(0,i)),n}function y(e){const t=e.length<0?0:0|w(e.length),r=u(t);for(let n=0;n<t;n+=1)r[n]=255&e[n];return r}function g(e){if(se(e,Uint8Array)){const t=new Uint8Array(e);return b(t.buffer,t.byteOffset,t.byteLength)}return y(e)}function b(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,c.prototype),n}function m(e){if(c.isBuffer(e)){const t=0|w(e.length),r=u(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!==typeof e.length||ae(e.length)?u(0):y(e):"Buffer"===e.type&&Array.isArray(e.data)?y(e.data):void 0}function w(e){if(e>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|e}function v(e){return+e!=e&&(e=0),c.alloc(+e)}function k(e,t){if(c.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||se(e,ArrayBuffer))return e.byteLength;if("string"!==typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return te(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return ie(e).length;default:if(i)return n?-1:te(e).length;t=(""+t).toLowerCase(),i=!0}}function x(e,t,r){let n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,t>>>=0,r<=t)return"";e||(e="utf8");while(1)switch(e){case"hex":return z(this,t,r);case"utf8":case"utf-8":return R(this,t,r);case"ascii":return C(this,t,r);case"latin1":case"binary":return W(this,t,r);case"base64":return T(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function S(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function E(e,t,r,n,i){if(0===e.length)return-1;if("string"===typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,ae(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"===typeof t&&(t=c.from(t,n)),c.isBuffer(t))return 0===t.length?-1:I(e,t,r,n,i);if("number"===typeof t)return t&=255,"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):I(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function I(e,t,r,n,i){let o,s=1,a=e.length,u=t.length;if(void 0!==n&&(n=String(n).toLowerCase(),"ucs2"===n||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s=2,a/=2,u/=2,r/=2}function c(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){let n=-1;for(o=r;o<a;o++)if(c(e,o)===c(t,-1===n?0:o-n)){if(-1===n&&(n=o),o-n+1===u)return n*s}else-1!==n&&(o-=o-n),n=-1}else for(r+u>a&&(r=a-u),o=r;o>=0;o--){let r=!0;for(let n=0;n<u;n++)if(c(e,o+n)!==c(t,n)){r=!1;break}if(r)return o}return-1}function B(e,t,r,n){r=Number(r)||0;const i=e.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;const o=t.length;let s;for(n>o/2&&(n=o/2),s=0;s<n;++s){const n=parseInt(t.substr(2*s,2),16);if(ae(n))return s;e[r+s]=n}return s}function A(e,t,r,n){return oe(te(t,e.length-r),e,r,n)}function _(e,t,r,n){return oe(re(t),e,r,n)}function O(e,t,r,n){return oe(ie(t),e,r,n)}function P(e,t,r,n){return oe(ne(t,e.length-r),e,r,n)}function T(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function R(e,t,r){r=Math.min(e.length,r);const n=[];let i=t;while(i<r){const t=e[i];let o=null,s=t>239?4:t>223?3:t>191?2:1;if(i+s<=r){let r,n,a,u;switch(s){case 1:t<128&&(o=t);break;case 2:r=e[i+1],128===(192&r)&&(u=(31&t)<<6|63&r,u>127&&(o=u));break;case 3:r=e[i+1],n=e[i+2],128===(192&r)&&128===(192&n)&&(u=(15&t)<<12|(63&r)<<6|63&n,u>2047&&(u<55296||u>57343)&&(o=u));break;case 4:r=e[i+1],n=e[i+2],a=e[i+3],128===(192&r)&&128===(192&n)&&128===(192&a)&&(u=(15&t)<<18|(63&r)<<12|(63&n)<<6|63&a,u>65535&&u<1114112&&(o=u))}}null===o?(o=65533,s=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),i+=s}return U(n)}c.TYPED_ARRAY_SUPPORT=a(),c.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}}),c.poolSize=8192,c.from=function(e,t,r){return f(e,t,r)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array),c.alloc=function(e,t,r){return h(e,t,r)},c.allocUnsafe=function(e){return p(e)},c.allocUnsafeSlow=function(e){return p(e)},c.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==c.prototype},c.compare=function(e,t){if(se(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),se(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,n=t.length;for(let i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);let r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;const n=c.allocUnsafe(t);let i=0;for(r=0;r<e.length;++r){let t=e[r];if(se(t,Uint8Array))i+t.length>n.length?(c.isBuffer(t)||(t=c.from(t)),t.copy(n,i)):Uint8Array.prototype.set.call(n,t,i);else{if(!c.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(n,i)}i+=t.length}return n},c.byteLength=k,c.prototype._isBuffer=!0,c.prototype.swap16=function(){const e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)S(this,t,t+1);return this},c.prototype.swap32=function(){const e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)S(this,t,t+3),S(this,t+1,t+2);return this},c.prototype.swap64=function(){const e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)S(this,t,t+7),S(this,t+1,t+6),S(this,t+2,t+5),S(this,t+3,t+4);return this},c.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?R(this,0,e):x.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){let e="";const r=t.h2;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},o&&(c.prototype[o]=c.prototype.inspect),c.prototype.compare=function(e,t,r,n,i){if(se(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),!c.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,i>>>=0,this===e)return 0;let o=i-n,s=r-t;const a=Math.min(o,s),u=this.slice(n,i),f=e.slice(t,r);for(let c=0;c<a;++c)if(u[c]!==f[c]){o=u[c],s=f[c];break}return o<s?-1:s<o?1:0},c.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},c.prototype.indexOf=function(e,t,r){return E(this,e,t,r,!0)},c.prototype.lastIndexOf=function(e,t,r){return E(this,e,t,r,!1)},c.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"===typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let o=!1;for(;;)switch(n){case"hex":return B(this,e,t,r);case"utf8":case"utf-8":return A(this,e,t,r);case"ascii":case"latin1":case"binary":return _(this,e,t,r);case"base64":return O(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const L=4096;function U(e){const t=e.length;if(t<=L)return String.fromCharCode.apply(String,e);let r="",n=0;while(n<t)r+=String.fromCharCode.apply(String,e.slice(n,n+=L));return r}function C(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function W(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function z(e,t,r){const n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let i="";for(let o=t;o<r;++o)i+=ue[e[o]];return i}function N(e,t,r){const n=e.slice(t,r);let i="";for(let o=0;o<n.length-1;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function q(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function j(e,t,r,n,i,o){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function K(e,t,r,n,i){G(t,n,i,e,r,7);let o=Number(t&BigInt(4294967295));e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,r}function F(e,t,r,n,i){G(t,n,i,e,r,7);let o=Number(t&BigInt(4294967295));e[r+7]=o,o>>=8,e[r+6]=o,o>>=8,e[r+5]=o,o>>=8,e[r+4]=o;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=s,s>>=8,e[r+2]=s,s>>=8,e[r+1]=s,s>>=8,e[r]=s,r+8}function M(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function D(e,t,r,n,o){return t=+t,r>>>=0,o||M(e,t,r,4,34028234663852886e22,-34028234663852886e22),i.write(e,t,r,n,23,4),r+4}function H(e,t,r,n,o){return t=+t,r>>>=0,o||M(e,t,r,8,17976931348623157e292,-17976931348623157e292),i.write(e,t,r,n,52,8),r+8}c.prototype.slice=function(e,t){const r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),t<e&&(t=e);const n=this.subarray(e,t);return Object.setPrototypeOf(n,c.prototype),n},c.prototype.readUintLE=c.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||q(e,t,this.length);let n=this[e],i=1,o=0;while(++o<t&&(i*=256))n+=this[e+o]*i;return n},c.prototype.readUintBE=c.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||q(e,t,this.length);let n=this[e+--t],i=1;while(t>0&&(i*=256))n+=this[e+--t]*i;return n},c.prototype.readUint8=c.prototype.readUInt8=function(e,t){return e>>>=0,t||q(e,1,this.length),this[e]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(e,t){return e>>>=0,t||q(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(e,t){return e>>>=0,t||q(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(e,t){return e>>>=0,t||q(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(e,t){return e>>>=0,t||q(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readBigUInt64LE=ce((function(e){e>>>=0,Y(e,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||X(e,this.length-8);const n=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,i=this[++e]+256*this[++e]+65536*this[++e]+r*2**24;return BigInt(n)+(BigInt(i)<<BigInt(32))})),c.prototype.readBigUInt64BE=ce((function(e){e>>>=0,Y(e,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||X(e,this.length-8);const n=t*2**24+65536*this[++e]+256*this[++e]+this[++e],i=this[++e]*2**24+65536*this[++e]+256*this[++e]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)})),c.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||q(e,t,this.length);let n=this[e],i=1,o=0;while(++o<t&&(i*=256))n+=this[e+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*t)),n},c.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||q(e,t,this.length);let n=t,i=1,o=this[e+--n];while(n>0&&(i*=256))o+=this[e+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},c.prototype.readInt8=function(e,t){return e>>>=0,t||q(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){e>>>=0,t||q(e,2,this.length);const r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt16BE=function(e,t){e>>>=0,t||q(e,2,this.length);const r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt32LE=function(e,t){return e>>>=0,t||q(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return e>>>=0,t||q(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readBigInt64LE=ce((function(e){e>>>=0,Y(e,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||X(e,this.length-8);const n=this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),c.prototype.readBigInt64BE=ce((function(e){e>>>=0,Y(e,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||X(e,this.length-8);const n=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+r)})),c.prototype.readFloatLE=function(e,t){return e>>>=0,t||q(e,4,this.length),i.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return e>>>=0,t||q(e,4,this.length),i.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return e>>>=0,t||q(e,8,this.length),i.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return e>>>=0,t||q(e,8,this.length),i.read(this,e,!1,52,8)},c.prototype.writeUintLE=c.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){const n=Math.pow(2,8*r)-1;j(this,e,t,r,n,0)}let i=1,o=0;this[t]=255&e;while(++o<r&&(i*=256))this[t+o]=e/i&255;return t+r},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){const n=Math.pow(2,8*r)-1;j(this,e,t,r,n,0)}let i=r-1,o=1;this[t+i]=255&e;while(--i>=0&&(o*=256))this[t+i]=e/o&255;return t+r},c.prototype.writeUint8=c.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,1,255,0),this[t]=255&e,t+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeBigUInt64LE=ce((function(e,t=0){return K(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),c.prototype.writeBigUInt64BE=ce((function(e,t=0){return F(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),c.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);j(this,e,t,r,n-1,-n)}let i=0,o=1,s=0;this[t]=255&e;while(++i<r&&(o*=256))e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+r},c.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);j(this,e,t,r,n-1,-n)}let i=r-1,o=1,s=0;this[t+i]=255&e;while(--i>=0&&(o*=256))e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+r},c.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},c.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeBigInt64LE=ce((function(e,t=0){return K(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),c.prototype.writeBigInt64BE=ce((function(e,t=0){return F(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),c.prototype.writeFloatLE=function(e,t,r){return D(this,e,t,!0,r)},c.prototype.writeFloatBE=function(e,t,r){return D(this,e,t,!1,r)},c.prototype.writeDoubleLE=function(e,t,r){return H(this,e,t,!0,r)},c.prototype.writeDoubleBE=function(e,t,r){return H(this,e,t,!1,r)},c.prototype.copy=function(e,t,r,n){if(!c.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);const i=n-r;return this===e&&"function"===typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),i},c.prototype.fill=function(e,t,r,n){if("string"===typeof e){if("string"===typeof t?(n=t,t=0,r=this.length):"string"===typeof r&&(n=r,r=this.length),void 0!==n&&"string"!==typeof n)throw new TypeError("encoding must be a string");if("string"===typeof n&&!c.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){const t=e.charCodeAt(0);("utf8"===n&&t<128||"latin1"===n)&&(e=t)}}else"number"===typeof e?e&=255:"boolean"===typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;let i;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"===typeof e)for(i=t;i<r;++i)this[i]=e;else{const o=c.isBuffer(e)?e:c.from(e,n),s=o.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=o[i%s]}return this};const Z={};function $(e,t,r){Z[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function V(e){let t="",r=e.length;const n="-"===e[0]?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function J(e,t,r){Y(t,"offset"),void 0!==e[t]&&void 0!==e[t+r]||X(t,e.length-(r+1))}function G(e,t,r,n,i,o){if(e>r||e<t){const n="bigint"===typeof t?"n":"";let i;throw i=o>3?0===t||t===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(o+1)}${n}`:`>= -(2${n} ** ${8*(o+1)-1}${n}) and < 2 ** ${8*(o+1)-1}${n}`:`>= ${t}${n} and <= ${r}${n}`,new Z.ERR_OUT_OF_RANGE("value",i,e)}J(n,i,o)}function Y(e,t){if("number"!==typeof e)throw new Z.ERR_INVALID_ARG_TYPE(t,"number",e)}function X(e,t,r){if(Math.floor(e)!==e)throw Y(e,r),new Z.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new Z.ERR_BUFFER_OUT_OF_BOUNDS;throw new Z.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}$("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),$("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),$("ERR_OUT_OF_RANGE",(function(e,t,r){let n=`The value of "${e}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=V(String(r)):"bigint"===typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=V(i)),i+="n"),n+=` It must be ${t}. Received ${i}`,n}),RangeError);const Q=/[^+/0-9A-Za-z-_]/g;function ee(e){if(e=e.split("=")[0],e=e.trim().replace(Q,""),e.length<2)return"";while(e.length%4!==0)e+="=";return e}function te(e,t){let r;t=t||1/0;const n=e.length;let i=null;const o=[];for(let s=0;s<n;++s){if(r=e.charCodeAt(s),r>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function re(e){const t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function ne(e,t){let r,n,i;const o=[];for(let s=0;s<e.length;++s){if((t-=2)<0)break;r=e.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n)}return o}function ie(e){return n.toByteArray(ee(e))}function oe(e,t,r,n){let i;for(i=0;i<n;++i){if(i+r>=t.length||i>=e.length)break;t[i+r]=e[i]}return i}function se(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function ae(e){return e!==e}const ue=function(){const e="0123456789abcdef",t=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let i=0;i<16;++i)t[n+i]=e[r]+e[i]}return t}();function ce(e){return"undefined"===typeof BigInt?fe:e}function fe(){throw new Error("BigInt not supported")}},79685:function(e,t,r){"use strict";r(1439),r(87585),r(55315);var n=r(27830).Buffer;function i(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var i=0;i<e.length;i++){var o=e.charAt(i),s=o.charCodeAt(0);if(255!==t[s])throw new TypeError(o+" is ambiguous");t[s]=i}var a=e.length,u=e.charAt(0),c=Math.log(a)/Math.log(256),f=Math.log(256)/Math.log(a);function l(t){if((Array.isArray(t)||t instanceof Uint8Array)&&(t=n.from(t)),!n.isBuffer(t))throw new TypeError("Expected Buffer");if(0===t.length)return"";var r=0,i=0,o=0,s=t.length;while(o!==s&&0===t[o])o++,r++;var c=(s-o)*f+1>>>0,l=new Uint8Array(c);while(o!==s){for(var h=t[o],p=0,d=c-1;(0!==h||p<i)&&-1!==d;d--,p++)h+=256*l[d]>>>0,l[d]=h%a>>>0,h=h/a>>>0;if(0!==h)throw new Error("Non-zero carry");i=p,o++}var y=c-i;while(y!==c&&0===l[y])y++;for(var g=u.repeat(r);y<c;++y)g+=e.charAt(l[y]);return g}function h(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return n.alloc(0);var r=0,i=0,o=0;while(e[r]===u)i++,r++;var s=(e.length-r)*c+1>>>0,f=new Uint8Array(s);while(e[r]){var l=t[e.charCodeAt(r)];if(255===l)return;for(var h=0,p=s-1;(0!==l||h<o)&&-1!==p;p--,h++)l+=a*f[p]>>>0,f[p]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");o=h,r++}var d=s-o;while(d!==s&&0===f[d])d++;var y=n.allocUnsafe(i+(s-d));y.fill(0,0,i);var g=i;while(d!==s)y[g++]=f[d++];return y}function p(e){var t=h(e);if(t)return t;throw new Error("Non-base"+a+" character")}return{encode:l,decodeUnsafe:h,decode:p}}e.exports=i},92321:function(e,t,r){"use strict";var n=r(82433)["Buffer"];function i(e){{const t=n.from(e);t.reverse();const r=t.toString("hex");return 0===r.length?BigInt(0):BigInt(`0x${r}`)}}function o(e){{const t=e.toString("hex");return 0===t.length?BigInt(0):BigInt(`0x${t}`)}}function s(e,t){{const r=e.toString(16),i=n.from(r.padStart(2*t,"0").slice(0,2*t),"hex");return i.reverse(),i}}function a(e,t){{const r=e.toString(16);return n.from(r.padStart(2*t,"0").slice(0,2*t),"hex")}}t.oU=i,t.k$=s},5265:function(e,t,r){"use strict";var n=r(82433)["Buffer"];r(1439),r(87585),r(55315),r(57658);var i=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e["default"]=t}),s=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&i(t,e,r);return o(t,e),t},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.deserializeUnchecked=t.deserialize=t.serialize=t.BinaryReader=t.BinaryWriter=t.BorshError=t.baseDecode=t.baseEncode=void 0;const c=u(r(73054)),f=u(r(27237)),l=a(r(6e4)),h="function"!==typeof TextDecoder?l.TextDecoder:TextDecoder,p=new h("utf-8",{fatal:!0});function d(e){return"string"===typeof e&&(e=n.from(e,"utf8")),f.default.encode(n.from(e))}function y(e){return n.from(f.default.decode(e))}t.baseEncode=d,t.baseDecode=y;const g=1024;class b extends Error{constructor(e){super(e),this.fieldPath=[],this.originalMessage=e}addToFieldPath(e){this.fieldPath.splice(0,0,e),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}t.BorshError=b;class m{constructor(){this.buf=n.alloc(g),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=n.concat([this.buf,n.alloc(g)]))}writeU8(e){this.maybeResize(),this.buf.writeUInt8(e,this.length),this.length+=1}writeU16(e){this.maybeResize(),this.buf.writeUInt16LE(e,this.length),this.length+=2}writeU32(e){this.maybeResize(),this.buf.writeUInt32LE(e,this.length),this.length+=4}writeU64(e){this.maybeResize(),this.writeBuffer(n.from(new c.default(e).toArray("le",8)))}writeU128(e){this.maybeResize(),this.writeBuffer(n.from(new c.default(e).toArray("le",16)))}writeU256(e){this.maybeResize(),this.writeBuffer(n.from(new c.default(e).toArray("le",32)))}writeU512(e){this.maybeResize(),this.writeBuffer(n.from(new c.default(e).toArray("le",64)))}writeBuffer(e){this.buf=n.concat([n.from(this.buf.subarray(0,this.length)),e,n.alloc(g)]),this.length+=e.length}writeString(e){this.maybeResize();const t=n.from(e,"utf8");this.writeU32(t.length),this.writeBuffer(t)}writeFixedArray(e){this.writeBuffer(n.from(e))}writeArray(e,t){this.maybeResize(),this.writeU32(e.length);for(const r of e)this.maybeResize(),t(r)}toArray(){return this.buf.subarray(0,this.length)}}function w(e,t,r){const n=r.value;r.value=function(...e){try{return n.apply(this,e)}catch(t){if(t instanceof RangeError){const e=t.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(e)>=0)throw new b("Reached the end of buffer when deserializing")}throw t}}}t.BinaryWriter=m;class v{constructor(e){this.buf=e,this.offset=0}readU8(){const e=this.buf.readUInt8(this.offset);return this.offset+=1,e}readU16(){const e=this.buf.readUInt16LE(this.offset);return this.offset+=2,e}readU32(){const e=this.buf.readUInt32LE(this.offset);return this.offset+=4,e}readU64(){const e=this.readBuffer(8);return new c.default(e,"le")}readU128(){const e=this.readBuffer(16);return new c.default(e,"le")}readU256(){const e=this.readBuffer(32);return new c.default(e,"le")}readU512(){const e=this.readBuffer(64);return new c.default(e,"le")}readBuffer(e){if(this.offset+e>this.buf.length)throw new b(`Expected buffer length ${e} isn't within bounds`);const t=this.buf.slice(this.offset,this.offset+e);return this.offset+=e,t}readString(){const e=this.readU32(),t=this.readBuffer(e);try{return p.decode(t)}catch(r){throw new b(`Error decoding UTF-8 string: ${r}`)}}readFixedArray(e){return new Uint8Array(this.readBuffer(e))}readArray(e){const t=this.readU32(),r=Array();for(let n=0;n<t;++n)r.push(e());return r}}function k(e){return e.charAt(0).toUpperCase()+e.slice(1)}function x(e,t,r,n,i){try{if("string"===typeof n)i[`write${k(n)}`](r);else if(n instanceof Array)if("number"===typeof n[0]){if(r.length!==n[0])throw new b(`Expecting byte array of length ${n[0]}, but got ${r.length} bytes`);i.writeFixedArray(r)}else if(2===n.length&&"number"===typeof n[1]){if(r.length!==n[1])throw new b(`Expecting byte array of length ${n[1]}, but got ${r.length} bytes`);for(let t=0;t<n[1];t++)x(e,null,r[t],n[0],i)}else i.writeArray(r,(r=>{x(e,t,r,n[0],i)}));else if(void 0!==n.kind)switch(n.kind){case"option":null===r||void 0===r?i.writeU8(0):(i.writeU8(1),x(e,t,r,n.type,i));break;case"map":i.writeU32(r.size),r.forEach(((r,o)=>{x(e,t,o,n.key,i),x(e,t,r,n.value,i)}));break;default:throw new b(`FieldType ${n} unrecognized`)}else S(e,r,i)}catch(o){throw o instanceof b&&o.addToFieldPath(t),o}}function S(e,t,r){if("function"===typeof t.borshSerialize)return void t.borshSerialize(r);const n=e.get(t.constructor);if(!n)throw new b(`Class ${t.constructor.name} is missing in schema`);if("struct"===n.kind)n.fields.map((([n,i])=>{x(e,n,t[n],i,r)}));else{if("enum"!==n.kind)throw new b(`Unexpected schema kind: ${n.kind} for ${t.constructor.name}`);{const i=t[n.field];for(let o=0;o<n.values.length;++o){const[s,a]=n.values[o];if(s===i){r.writeU8(o),x(e,s,t[s],a,r);break}}}}}function E(e,t,r=m){const n=new r;return S(e,t,n),n.toArray()}function I(e,t,r,n){try{if("string"===typeof r)return n[`read${k(r)}`]();if(r instanceof Array){if("number"===typeof r[0])return n.readFixedArray(r[0]);if("number"===typeof r[1]){const t=[];for(let i=0;i<r[1];i++)t.push(I(e,null,r[0],n));return t}return n.readArray((()=>I(e,t,r[0],n)))}if("option"===r.kind){const i=n.readU8();return i?I(e,t,r.type,n):void 0}if("map"===r.kind){let i=new Map;const o=n.readU32();for(let s=0;s<o;s++){const o=I(e,t,r.key,n),s=I(e,t,r.value,n);i.set(o,s)}return i}return B(e,r,n)}catch(i){throw i instanceof b&&i.addToFieldPath(t),i}}function B(e,t,r){if("function"===typeof t.borshDeserialize)return t.borshDeserialize(r);const n=e.get(t);if(!n)throw new b(`Class ${t.name} is missing in schema`);if("struct"===n.kind){const n={};for(const[i,o]of e.get(t).fields)n[i]=I(e,i,o,r);return new t(n)}if("enum"===n.kind){const i=r.readU8();if(i>=n.values.length)throw new b(`Enum index: ${i} is out of range`);const[o,s]=n.values[i],a=I(e,o,s,r);return new t({[o]:a})}throw new b(`Unexpected schema kind: ${n.kind} for ${t.constructor.name}`)}function A(e,t,r,n=v){const i=new n(r),o=B(e,t,i);if(i.offset<r.length)throw new b(`Unexpected ${r.length-i.offset} bytes after deserialized data`);return o}function _(e,t,r,n=v){const i=new n(r);return B(e,t,i)}s([w],v.prototype,"readU8",null),s([w],v.prototype,"readU16",null),s([w],v.prototype,"readU32",null),s([w],v.prototype,"readU64",null),s([w],v.prototype,"readU128",null),s([w],v.prototype,"readU256",null),s([w],v.prototype,"readU512",null),s([w],v.prototype,"readString",null),s([w],v.prototype,"readFixedArray",null),s([w],v.prototype,"readArray",null),t.BinaryReader=v,t.serialize=E,t.deserialize=A,t.deserializeUnchecked=_},27237:function(e,t,r){var n=r(79685),i="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";e.exports=n(i)},61201:function(e,t,r){"use strict";const n=r(28828).v4,i=r(79574),o=function(e,t){if(!(this instanceof o))return new o(e,t);t||(t={}),this.options={reviver:"undefined"!==typeof t.reviver?t.reviver:null,replacer:"undefined"!==typeof t.replacer?t.replacer:null,generator:"undefined"!==typeof t.generator?t.generator:function(){return n()},version:"undefined"!==typeof t.version?t.version:2,notificationIdNull:"boolean"===typeof t.notificationIdNull&&t.notificationIdNull},this.callServer=e};e.exports=o,o.prototype.request=function(e,t,r,n){const o=this;let s=null;const a=Array.isArray(e)&&"function"===typeof t;if(1===this.options.version&&a)throw new TypeError("JSON-RPC 1.0 does not support batching");const u=!a&&e&&"object"===typeof e&&"function"===typeof t;if(a||u)n=t,s=e;else{"function"===typeof r&&(n=r,r=void 0);const o="function"===typeof n;try{s=i(e,t,r,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(f){if(o)return n(f);throw f}if(!o)return s}let c;try{c=JSON.stringify(s,this.options.replacer)}catch(f){return n(f)}return this.callServer(c,(function(e,t){o._parseResponse(e,t,n)})),s},o.prototype._parseResponse=function(e,t,r){if(e)return void r(e);if(!t)return r();let n;try{n=JSON.parse(t,this.options.reviver)}catch(e){return r(e)}if(3===r.length){if(Array.isArray(n)){const e=function(e){return"undefined"!==typeof e.error},t=function(t){return!e(t)};return r(null,n.filter(e),n.filter(t))}return r(null,n.error,n.result)}r(null,n)}},79574:function(e,t,r){"use strict";const n=r(28828).v4,i=function(e,t,r,i){if("string"!==typeof e)throw new TypeError(e+" must be a string");i=i||{};const o="number"===typeof i.version?i.version:2;if(1!==o&&2!==o)throw new TypeError(o+" must be 1 or 2");const s={method:e};if(2===o&&(s.jsonrpc="2.0"),t){if("object"!==typeof t&&!Array.isArray(t))throw new TypeError(t+" must be an object, array or omitted");s.params=t}if("undefined"===typeof r){const e="function"===typeof i.generator?i.generator:function(){return n()};s.id=e(s,i)}else 2===o&&null===r?i.notificationIdNull&&(s.id=null):s.id=r;return s};e.exports=i},48471:function(e,t,r){"use strict";var n=r(82433)["Buffer"];r(57658);var i=r(78036);t.Z=void 0;var o=i(r(82558)),s=i(r(22468)),a=i(r(1692)),u=i(r(86728)),c=i(r(32046)),f=i(r(52778)),l=i(r(10731)),h=i(r(60978)),p=r(92062);function d(e){var t=y();return function(){var r,n=(0,h["default"])(e);if(t){var i=(0,h["default"])(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,l["default"])(this,r)}}function y(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var g=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r},b=function(e){(0,f["default"])(r,e);var t=d(r);function r(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ws://localhost:8080",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3?arguments[3]:void 0;(0,u["default"])(this,r);var a=o.autoconnect,c=void 0===a||a,f=o.reconnect,l=void 0===f||f,h=o.reconnect_interval,p=void 0===h?1e3:h,d=o.max_reconnects,y=void 0===d?5:d,b=g(o,["autoconnect","reconnect","reconnect_interval","max_reconnects"]);return n=t.call(this),n.webSocketFactory=e,n.queue={},n.rpc_id=0,n.address=i,n.autoconnect=c,n.ready=!1,n.reconnect=l,n.reconnect_timer_id=void 0,n.reconnect_interval=p,n.max_reconnects=y,n.rest_options=b,n.current_reconnects=0,n.generate_request_id=s||function(){return++n.rpc_id},n.autoconnect&&n._connect(n.address,Object.assign({autoconnect:n.autoconnect,reconnect:n.reconnect,reconnect_interval:n.reconnect_interval,max_reconnects:n.max_reconnects},n.rest_options)),n}return(0,c["default"])(r,[{key:"connect",value:function(){this.socket||this._connect(this.address,Object.assign({autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects},this.rest_options))}},{key:"call",value:function(e,t,r,n){var i=this;return n||"object"!==(0,a["default"])(r)||(n=r,r=null),new Promise((function(o,s){if(!i.ready)return s(new Error("socket not ready"));var a=i.generate_request_id(e,t),u={jsonrpc:"2.0",method:e,params:t||null,id:a};i.socket.send(JSON.stringify(u),n,(function(e){if(e)return s(e);i.queue[a]={promise:[o,s]},r&&(i.queue[a].timeout=setTimeout((function(){delete i.queue[a],s(new Error("reply timeout"))}),r))}))}))}},{key:"login",value:function(){var e=(0,s["default"])(o["default"].mark((function e(t){var r;return o["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.call("rpc.login",t);case 2:if(r=e.sent,r){e.next=5;break}throw new Error("authentication failed");case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"listMethods",value:function(){var e=(0,s["default"])(o["default"].mark((function e(){return o["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.call("__listMethods");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"notify",value:function(e,t){var r=this;return new Promise((function(n,i){if(!r.ready)return i(new Error("socket not ready"));var o={jsonrpc:"2.0",method:e,params:t||null};r.socket.send(JSON.stringify(o),(function(e){if(e)return i(e);n()}))}))}},{key:"subscribe",value:function(){var e=(0,s["default"])(o["default"].mark((function e(t){var r;return o["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return"string"===typeof t&&(t=[t]),e.next=3,this.call("rpc.on",t);case 3:if(r=e.sent,"string"!==typeof t||"ok"===r[t]){e.next=6;break}throw new Error("Failed subscribing to an event '"+t+"' with: "+r[t]);case 6:return e.abrupt("return",r);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"unsubscribe",value:function(){var e=(0,s["default"])(o["default"].mark((function e(t){var r;return o["default"].wrap((function(e){while(1)switch(e.prev=e.next){case 0:return"string"===typeof t&&(t=[t]),e.next=3,this.call("rpc.off",t);case 3:if(r=e.sent,"string"!==typeof t||"ok"===r[t]){e.next=6;break}throw new Error("Failed unsubscribing from an event with: "+r);case 6:return e.abrupt("return",r);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"close",value:function(e,t){this.socket.close(e||1e3,t)}},{key:"_connect",value:function(e,t){var r=this;clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(e,t),this.socket.addEventListener("open",(function(){r.ready=!0,r.emit("open"),r.current_reconnects=0})),this.socket.addEventListener("message",(function(e){var t=e.data;t instanceof ArrayBuffer&&(t=n.from(t).toString());try{t=JSON.parse(t)}catch(s){return}if(t.notification&&r.listeners(t.notification).length){if(!Object.keys(t.params).length)return r.emit(t.notification);var i=[t.notification];if(t.params.constructor===Object)i.push(t.params);else for(var o=0;o<t.params.length;o++)i.push(t.params[o]);return Promise.resolve().then((function(){r.emit.apply(r,i)}))}if(!r.queue[t.id])return t.method&&t.params?Promise.resolve().then((function(){r.emit(t.method,t.params)})):void 0;"error"in t==="result"in t&&r.queue[t.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),r.queue[t.id].timeout&&clearTimeout(r.queue[t.id].timeout),t.error?r.queue[t.id].promise[1](t.error):r.queue[t.id].promise[0](t.result),delete r.queue[t.id]})),this.socket.addEventListener("error",(function(e){return r.emit("error",e)})),this.socket.addEventListener("close",(function(n){var i=n.code,o=n.reason;r.ready&&setTimeout((function(){return r.emit("close",i,o)}),0),r.ready=!1,r.socket=void 0,1e3!==i&&(r.current_reconnects++,r.reconnect&&(r.max_reconnects>r.current_reconnects||0===r.max_reconnects)&&(r.reconnect_timer_id=setTimeout((function(){return r._connect(e,t)}),r.reconnect_interval)))}))}}]),r}(p.EventEmitter);t.Z=b},26587:function(e,t,r){"use strict";var n=r(78036);t.Z=p;var i=n(r(86728)),o=n(r(32046)),s=n(r(52778)),a=n(r(10731)),u=n(r(60978)),c=r(92062);function f(e){var t=l();return function(){var r,n=(0,u["default"])(e);if(t){var i=(0,u["default"])(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,a["default"])(this,r)}}function l(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var h=function(e){(0,s["default"])(r,e);var t=f(r);function r(e,n,o){var s;return(0,i["default"])(this,r),s=t.call(this),s.socket=new window.WebSocket(e,o),s.socket.onopen=function(){return s.emit("open")},s.socket.onmessage=function(e){return s.emit("message",e.data)},s.socket.onerror=function(e){return s.emit("error",e)},s.socket.onclose=function(e){s.emit("close",e.code,e.reason)},s}return(0,o["default"])(r,[{key:"send",value:function(e,t,r){var n=r||t;try{this.socket.send(e),n()}catch(i){n(i)}}},{key:"close",value:function(e,t){this.socket.close(e,t)}},{key:"addEventListener",value:function(e,t,r){this.socket.addEventListener(e,t,r)}}]),r}(c.EventEmitter);function p(e,t){return new h(e,t)}},28828:function(e,t,r){"use strict";r.d(t,{v4:function(){return n.Z}});var n=r(69619)},87002:function(e){function t(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}e.exports=t,e.exports.__esModule=!0,e.exports["default"]=e.exports},22468:function(e){function t(e,t,r,n,i,o,s){try{var a=e[o](s),u=a.value}catch(c){return void r(c)}a.done?t(u):Promise.resolve(u).then(n,i)}function r(e){return function(){var r=this,n=arguments;return new Promise((function(i,o){var s=e.apply(r,n);function a(e){t(s,i,o,a,u,"next",e)}function u(e){t(s,i,o,a,u,"throw",e)}a(void 0)}))}}e.exports=r,e.exports.__esModule=!0,e.exports["default"]=e.exports},86728:function(e){function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.exports=t,e.exports.__esModule=!0,e.exports["default"]=e.exports},32046:function(e,t,r){var n=r(42944);function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,n(i.key),i)}}function o(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}e.exports=o,e.exports.__esModule=!0,e.exports["default"]=e.exports},60978:function(e){function t(r){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports["default"]=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports["default"]=e.exports},52778:function(e,t,r){var n=r(92007);function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&n(e,t)}e.exports=i,e.exports.__esModule=!0,e.exports["default"]=e.exports},78036:function(e){function t(e){return e&&e.__esModule?e:{default:e}}e.exports=t,e.exports.__esModule=!0,e.exports["default"]=e.exports},10731:function(e,t,r){var n=r(1692)["default"],i=r(87002);function o(e,t){if(t&&("object"===n(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return i(e)}e.exports=o,e.exports.__esModule=!0,e.exports["default"]=e.exports},85409:function(e,t,r){r(57658);var n=r(1692)["default"];function i(){"use strict";
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */e.exports=i=function(){return t},e.exports.__esModule=!0,e.exports["default"]=e.exports;var t={},r=Object.prototype,o=r.hasOwnProperty,s=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},u=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",f=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(P){l=function(e,t,r){return e[t]=r}}function h(e,t,r,n){var i=t&&t.prototype instanceof y?t:y,o=Object.create(i.prototype),a=new _(n||[]);return s(o,"_invoke",{value:E(e,r,a)}),o}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(P){return{type:"throw",arg:P}}}t.wrap=h;var d={};function y(){}function g(){}function b(){}var m={};l(m,u,(function(){return this}));var w=Object.getPrototypeOf,v=w&&w(w(O([])));v&&v!==r&&o.call(v,u)&&(m=v);var k=b.prototype=y.prototype=Object.create(m);function x(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(i,s,a,u){var c=p(e[i],e,s);if("throw"!==c.type){var f=c.arg,l=f.value;return l&&"object"==n(l)&&o.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,a,u)}),(function(e){r("throw",e,a,u)})):t.resolve(l).then((function(e){f.value=e,a(f)}),(function(e){return r("throw",e,a,u)}))}u(c.arg)}var i;s(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(o,o):o()}})}function E(e,t,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return{value:void 0,done:!0}}for(r.method=i,r.arg=o;;){var s=r.delegate;if(s){var a=I(s,r);if(a){if(a===d)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=p(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===d)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function I(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator["return"]&&(t.method="return",t.arg=void 0,I(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var i=p(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,d;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function B(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(B,this),this.reset(!0)}function O(e){if(e||""===e){var t=e[u];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(o.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}throw new TypeError(n(e)+" is not iterable")}return g.prototype=b,s(k,"constructor",{value:b,configurable:!0}),s(b,"constructor",{value:g,configurable:!0}),g.displayName=l(b,f,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,f,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},x(S.prototype),l(S.prototype,c,(function(){return this})),t.AsyncIterator=S,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var s=new S(h(e,r,n,i),o);return t.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},x(k),l(k,f,"Generator"),l(k,u,(function(){return this})),l(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=O,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(A),!e)for(var t in this)"t"===t.charAt(0)&&o.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,n){return s.type="throw",s.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],s=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var a=o.call(i,"catchLoc"),u=o.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;A(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},t}e.exports=i,e.exports.__esModule=!0,e.exports["default"]=e.exports},92007:function(e){function t(r,n){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports["default"]=e.exports,t(r,n)}e.exports=t,e.exports.__esModule=!0,e.exports["default"]=e.exports},16857:function(e,t,r){var n=r(1692)["default"];function i(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}e.exports=i,e.exports.__esModule=!0,e.exports["default"]=e.exports},42944:function(e,t,r){var n=r(1692)["default"],i=r(16857);function o(e){var t=i(e,"string");return"symbol"===n(t)?t:String(t)}e.exports=o,e.exports.__esModule=!0,e.exports["default"]=e.exports},1692:function(e){function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports["default"]=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports["default"]=e.exports},82558:function(e,t,r){var n=r(85409)();e.exports=n;try{regeneratorRuntime=n}catch(i){"object"===typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},46080:function(e,t,r){"use strict";r.r(t),r.d(t,{ParticleNetwork:function(){return i.gU},SolanaWallet:function(){return Au}});var n={};r.r(n),r.d(n,{dQ:function(){return me},ci:function(){return ce},bytesToNumberBE:function(){return he},ty:function(){return pe},eV:function(){return be},n$:function(){return ke},ql:function(){return ge},hexToBytes:function(){return le},tL:function(){return de},S5:function(){return ye},FF:function(){return Se}});var i=r(27813),o=(r(1439),r(87585),r(55315),r(57658),r(45226)),s=r(27594),a=r(81087);function u(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function c(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function f(e){if("function"!==typeof e||"function"!==typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");u(e.outputLen),u(e.blockLen)}function l(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function h(e,t){c(e);const r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}const p="object"===typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,d=e=>e instanceof Uint8Array,y=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),g=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),b=(e,t)=>e<<32-t|e>>>t,m=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0];if(!m)throw new Error("Non little-endian hardware is not supported");function w(e){if("string"!==typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}function v(e){if("string"===typeof e&&(e=w(e)),!d(e))throw new Error("expected Uint8Array, got "+typeof e);return e}function k(...e){const t=new Uint8Array(e.reduce(((e,t)=>e+t.length),0));let r=0;return e.forEach((e=>{if(!d(e))throw new Error("Uint8Array expected");t.set(e,r),r+=e.length})),t}class x{clone(){return this._cloneInto()}}function S(e){const t=t=>e().update(v(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function E(e=32){if(p&&"function"===typeof p.getRandomValues)return p.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}function I(e,t,r,n){if("function"===typeof e.setBigUint64)return e.setBigUint64(t,r,n);const i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),u=n?4:0,c=n?0:4;e.setUint32(t+u,s,n),e.setUint32(t+c,a,n)}class B extends x{constructor(e,t,r,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=g(this.buffer)}update(e){l(this);const{view:t,buffer:r,blockLen:n}=this;e=v(e);const i=e.length;for(let o=0;o<i;){const s=Math.min(n-this.pos,i-o);if(s!==n)r.set(e.subarray(o,o+s),this.pos),this.pos+=s,o+=s,this.pos===n&&(this.process(t,0),this.pos=0);else{const t=g(e);for(;n<=i-o;o+=n)this.process(t,o)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){l(this),h(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:n,isLE:i}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>n-o&&(this.process(r,0),o=0);for(let f=o;f<n;f++)t[f]=0;I(r,n-8,BigInt(8*this.length),i),this.process(r,0);const s=g(e),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=a/4,c=this.get();if(u>c.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<u;f++)s.setUint32(4*f,c[f],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:n,finished:i,destroyed:o,pos:s}=this;return e.length=n,e.pos=s,e.finished=i,e.destroyed=o,n%t&&e.buffer.set(r),e}}const A=BigInt(2**32-1),_=BigInt(32);function O(e,t=!1){return t?{h:Number(e&A),l:Number(e>>_&A)}:{h:0|Number(e>>_&A),l:0|Number(e&A)}}function P(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:o,l:s}=O(e[i],t);[r[i],n[i]]=[o,s]}return[r,n]}const T=(e,t)=>BigInt(e>>>0)<<_|BigInt(t>>>0),R=(e,t,r)=>e>>>r,L=(e,t,r)=>e<<32-r|t>>>r,U=(e,t,r)=>e>>>r|t<<32-r,C=(e,t,r)=>e<<32-r|t>>>r,W=(e,t,r)=>e<<64-r|t>>>r-32,z=(e,t,r)=>e>>>r-32|t<<64-r,N=(e,t)=>t,q=(e,t)=>e,j=(e,t,r)=>e<<r|t>>>32-r,K=(e,t,r)=>t<<r|e>>>32-r,F=(e,t,r)=>t<<r-32|e>>>64-r,M=(e,t,r)=>e<<r-32|t>>>64-r;function D(e,t,r,n){const i=(t>>>0)+(n>>>0);return{h:e+r+(i/2**32|0)|0,l:0|i}}const H=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),Z=(e,t,r,n)=>t+r+n+(e/2**32|0)|0,$=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),V=(e,t,r,n,i)=>t+r+n+i+(e/2**32|0)|0,J=(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0),G=(e,t,r,n,i,o)=>t+r+n+i+o+(e/2**32|0)|0,Y={fromBig:O,split:P,toBig:T,shrSH:R,shrSL:L,rotrSH:U,rotrSL:C,rotrBH:W,rotrBL:z,rotr32H:N,rotr32L:q,rotlSH:j,rotlSL:K,rotlBH:F,rotlBL:M,add:D,add3L:H,add3H:Z,add4L:$,add4H:V,add5H:G,add5L:J};var X=Y;const[Q,ee]=(()=>X.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((e=>BigInt(e)))))(),te=new Uint32Array(80),re=new Uint32Array(80);class ne extends B{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:r,Bl:n,Ch:i,Cl:o,Dh:s,Dl:a,Eh:u,El:c,Fh:f,Fl:l,Gh:h,Gl:p,Hh:d,Hl:y}=this;return[e,t,r,n,i,o,s,a,u,c,f,l,h,p,d,y]}set(e,t,r,n,i,o,s,a,u,c,f,l,h,p,d,y){this.Ah=0|e,this.Al=0|t,this.Bh=0|r,this.Bl=0|n,this.Ch=0|i,this.Cl=0|o,this.Dh=0|s,this.Dl=0|a,this.Eh=0|u,this.El=0|c,this.Fh=0|f,this.Fl=0|l,this.Gh=0|h,this.Gl=0|p,this.Hh=0|d,this.Hl=0|y}process(e,t){for(let m=0;m<16;m++,t+=4)te[m]=e.getUint32(t),re[m]=e.getUint32(t+=4);for(let m=16;m<80;m++){const e=0|te[m-15],t=0|re[m-15],r=X.rotrSH(e,t,1)^X.rotrSH(e,t,8)^X.shrSH(e,t,7),n=X.rotrSL(e,t,1)^X.rotrSL(e,t,8)^X.shrSL(e,t,7),i=0|te[m-2],o=0|re[m-2],s=X.rotrSH(i,o,19)^X.rotrBH(i,o,61)^X.shrSH(i,o,6),a=X.rotrSL(i,o,19)^X.rotrBL(i,o,61)^X.shrSL(i,o,6),u=X.add4L(n,a,re[m-7],re[m-16]),c=X.add4H(u,r,s,te[m-7],te[m-16]);te[m]=0|c,re[m]=0|u}let{Ah:r,Al:n,Bh:i,Bl:o,Ch:s,Cl:a,Dh:u,Dl:c,Eh:f,El:l,Fh:h,Fl:p,Gh:d,Gl:y,Hh:g,Hl:b}=this;for(let m=0;m<80;m++){const e=X.rotrSH(f,l,14)^X.rotrSH(f,l,18)^X.rotrBH(f,l,41),t=X.rotrSL(f,l,14)^X.rotrSL(f,l,18)^X.rotrBL(f,l,41),w=f&h^~f&d,v=l&p^~l&y,k=X.add5L(b,t,v,ee[m],re[m]),x=X.add5H(k,g,e,w,Q[m],te[m]),S=0|k,E=X.rotrSH(r,n,28)^X.rotrBH(r,n,34)^X.rotrBH(r,n,39),I=X.rotrSL(r,n,28)^X.rotrBL(r,n,34)^X.rotrBL(r,n,39),B=r&i^r&s^i&s,A=n&o^n&a^o&a;g=0|d,b=0|y,d=0|h,y=0|p,h=0|f,p=0|l,({h:f,l:l}=X.add(0|u,0|c,0|x,0|S)),u=0|s,c=0|a,s=0|i,a=0|o,i=0|r,o=0|n;const _=X.add3L(S,I,A);r=X.add3H(_,x,E,B),n=0|_}({h:r,l:n}=X.add(0|this.Ah,0|this.Al,0|r,0|n)),({h:i,l:o}=X.add(0|this.Bh,0|this.Bl,0|i,0|o)),({h:s,l:a}=X.add(0|this.Ch,0|this.Cl,0|s,0|a)),({h:u,l:c}=X.add(0|this.Dh,0|this.Dl,0|u,0|c)),({h:f,l:l}=X.add(0|this.Eh,0|this.El,0|f,0|l)),({h:h,l:p}=X.add(0|this.Fh,0|this.Fl,0|h,0|p)),({h:d,l:y}=X.add(0|this.Gh,0|this.Gl,0|d,0|y)),({h:g,l:b}=X.add(0|this.Hh,0|this.Hl,0|g,0|b)),this.set(r,n,i,o,s,a,u,c,f,l,h,p,d,y,g,b)}roundClean(){te.fill(0),re.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const ie=S((()=>new ne)),oe=(BigInt(0),BigInt(1)),se=BigInt(2),ae=e=>e instanceof Uint8Array,ue=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function ce(e){if(!ae(e))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=ue[e[r]];return t}function fe(e){if("string"!==typeof e)throw new Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":`0x${e}`)}function le(e){if("string"!==typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(t/2);for(let n=0;n<r.length;n++){const t=2*n,i=e.slice(t,t+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");r[n]=o}return r}function he(e){return fe(ce(e))}function pe(e){if(!ae(e))throw new Error("Uint8Array expected");return fe(ce(Uint8Array.from(e).reverse()))}function de(e,t){return le(e.toString(16).padStart(2*t,"0"))}function ye(e,t){return de(e,t).reverse()}function ge(e,t,r){let n;if("string"===typeof t)try{n=le(t)}catch(o){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${o}`)}else{if(!ae(t))throw new Error(`${e} must be hex string or Uint8Array`);n=Uint8Array.from(t)}const i=n.length;if("number"===typeof r&&i!==r)throw new Error(`${e} expected ${r} bytes, got ${i}`);return n}function be(...e){const t=new Uint8Array(e.reduce(((e,t)=>e+t.length),0));let r=0;return e.forEach((e=>{if(!ae(e))throw new Error("Uint8Array expected");t.set(e,r),r+=e.length})),t}const me=e=>(se<<BigInt(e-1))-oe,we=e=>new Uint8Array(e),ve=e=>Uint8Array.from(e);function ke(e,t,r){if("number"!==typeof e||e<2)throw new Error("hashLen must be a number");if("number"!==typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!==typeof r)throw new Error("hmacFn must be a function");let n=we(e),i=we(e),o=0;const s=()=>{n.fill(1),i.fill(0),o=0},a=(...e)=>r(i,n,...e),u=(e=we())=>{i=a(ve([0]),e),n=a(),0!==e.length&&(i=a(ve([1]),e),n=a())},c=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const r=[];while(e<t){n=a();const t=n.slice();r.push(t),e+=n.length}return be(...r)},f=(e,t)=>{let r;s(),u(e);while(!(r=t(c())))u();return s(),r};return f}const xe={bigint:e=>"bigint"===typeof e,function:e=>"function"===typeof e,boolean:e=>"boolean"===typeof e,string:e=>"string"===typeof e,stringOrUint8Array:e=>"string"===typeof e||e instanceof Uint8Array,isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"===typeof e&&Number.isSafeInteger(e.outputLen)};function Se(e,t,r={}){const n=(t,r,n)=>{const i=xe[r];if("function"!==typeof i)throw new Error(`Invalid validator "${r}", expected function`);const o=e[t];if((!n||void 0!==o)&&!i(o,e))throw new Error(`Invalid param ${String(t)}=${o} (${typeof o}), expected ${r}`)};for(const[i,o]of Object.entries(t))n(i,o,!1);for(const[i,o]of Object.entries(r))n(i,o,!0);return e}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const Ee=BigInt(0),Ie=BigInt(1),Be=BigInt(2),Ae=BigInt(3),_e=BigInt(4),Oe=BigInt(5),Pe=BigInt(8);BigInt(9),BigInt(16);function Te(e,t){const r=e%t;return r>=Ee?r:t+r}function Re(e,t,r){if(r<=Ee||t<Ee)throw new Error("Expected power/modulo > 0");if(r===Ie)return Ee;let n=Ie;while(t>Ee)t&Ie&&(n=n*e%r),e=e*e%r,t>>=Ie;return n}function Le(e,t,r){let n=e;while(t-- >Ee)n*=n,n%=r;return n}function Ue(e,t){if(e===Ee||t<=Ee)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=Te(e,t),n=t,i=Ee,o=Ie,s=Ie,a=Ee;while(r!==Ee){const e=n/r,t=n%r,u=i-s*e,c=o-a*e;n=r,r=t,i=s,o=a,s=u,a=c}const u=n;if(u!==Ie)throw new Error("invert: does not exist");return Te(i,t)}function Ce(e){const t=(e-Ie)/Be;let r,n,i;for(r=e-Ie,n=0;r%Be===Ee;r/=Be,n++);for(i=Be;i<e&&Re(i,t,e)!==e-Ie;i++);if(1===n){const t=(e+Ie)/_e;return function(e,r){const n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw new Error("Cannot find square root");return n}}const o=(r+Ie)/Be;return function(e,s){if(e.pow(s,t)===e.neg(e.ONE))throw new Error("Cannot find square root");let a=n,u=e.pow(e.mul(e.ONE,i),r),c=e.pow(s,o),f=e.pow(s,r);while(!e.eql(f,e.ONE)){if(e.eql(f,e.ZERO))return e.ZERO;let t=1;for(let n=e.sqr(f);t<a;t++){if(e.eql(n,e.ONE))break;n=e.sqr(n)}const r=e.pow(u,Ie<<BigInt(a-t-1));u=e.sqr(r),c=e.mul(c,r),f=e.mul(f,u),a=t}return c}}function We(e){if(e%_e===Ae){const t=(e+Ie)/_e;return function(e,r){const n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw new Error("Cannot find square root");return n}}if(e%Pe===Oe){const t=(e-Oe)/Pe;return function(e,r){const n=e.mul(r,Be),i=e.pow(n,t),o=e.mul(r,i),s=e.mul(e.mul(o,Be),i),a=e.mul(o,e.sub(s,e.ONE));if(!e.eql(e.sqr(a),r))throw new Error("Cannot find square root");return a}}return Ce(e)}const ze=(e,t)=>(Te(e,t)&Ie)===Ie,Ne=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function qe(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=Ne.reduce(((e,t)=>(e[t]="function",e)),t);return Se(e,r)}function je(e,t,r){if(r<Ee)throw new Error("Expected power > 0");if(r===Ee)return e.ONE;if(r===Ie)return t;let n=e.ONE,i=t;while(r>Ee)r&Ie&&(n=e.mul(n,i)),i=e.sqr(i),r>>=Ie;return n}function Ke(e,t){const r=new Array(t.length),n=t.reduce(((t,n,i)=>e.is0(n)?t:(r[i]=t,e.mul(t,n))),e.ONE),i=e.inv(n);return t.reduceRight(((t,n,i)=>e.is0(n)?t:(r[i]=e.mul(t,r[i]),e.mul(t,n))),i),r}function Fe(e,t){const r=void 0!==t?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function Me(e,t,r=!1,n={}){if(e<=Ee)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:i,nByteLength:o}=Fe(e,t);if(o>2048)throw new Error("Field lengths over 2048 bytes are not supported");const s=We(e),a=Object.freeze({ORDER:e,BITS:i,BYTES:o,MASK:me(i),ZERO:Ee,ONE:Ie,create:t=>Te(t,e),isValid:t=>{if("bigint"!==typeof t)throw new Error("Invalid field element: expected bigint, got "+typeof t);return Ee<=t&&t<e},is0:e=>e===Ee,isOdd:e=>(e&Ie)===Ie,neg:t=>Te(-t,e),eql:(e,t)=>e===t,sqr:t=>Te(t*t,e),add:(t,r)=>Te(t+r,e),sub:(t,r)=>Te(t-r,e),mul:(t,r)=>Te(t*r,e),pow:(e,t)=>je(a,e,t),div:(t,r)=>Te(t*Ue(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>Ue(t,e),sqrt:n.sqrt||(e=>s(a,e)),invertBatch:e=>Ke(a,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>r?ye(e,o):de(e,o),fromBytes:e=>{if(e.length!==o)throw new Error(`Fp.fromBytes: expected ${o}, got ${e.length}`);return r?pe(e):he(e)}});return Object.freeze(a)}function De(e,t){if(!e.isOdd)throw new Error("Field doesn't have isOdd");const r=e.sqrt(t);return e.isOdd(r)?e.neg(r):r}function He(e){if("bigint"!==typeof e)throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function Ze(e){const t=He(e);return t+Math.ceil(t/2)}function $e(e,t,r=!1){const n=e.length,i=He(t),o=Ze(t);if(n<16||n<o||n>1024)throw new Error(`expected ${o}-1024 bytes of input, got ${n}`);const s=r?he(e):pe(e),a=Te(s,t-Ie)+Ie;return r?ye(a,i):de(a,i)}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const Ve=BigInt(0),Je=BigInt(1);function Ge(e,t){const r=(e,t)=>{const r=t.negate();return e?r:t},n=e=>{const r=Math.ceil(t/e)+1,n=2**(e-1);return{windows:r,windowSize:n}};return{constTimeNegate:r,unsafeLadder(t,r){let n=e.ZERO,i=t;while(r>Ve)r&Je&&(n=n.add(i)),i=i.double(),r>>=Je;return n},precomputeWindow(e,t){const{windows:r,windowSize:i}=n(t),o=[];let s=e,a=s;for(let n=0;n<r;n++){a=s,o.push(a);for(let e=1;e<i;e++)a=a.add(s),o.push(a);s=a.double()}return o},wNAF(t,i,o){const{windows:s,windowSize:a}=n(t);let u=e.ZERO,c=e.BASE;const f=BigInt(2**t-1),l=2**t,h=BigInt(t);for(let e=0;e<s;e++){const t=e*a;let n=Number(o&f);o>>=h,n>a&&(n-=l,o+=Je);const s=t,p=t+Math.abs(n)-1,d=e%2!==0,y=n<0;0===n?c=c.add(r(d,i[s])):u=u.add(r(y,i[p]))}return{p:u,f:c}},wNAFCached(e,t,r,n){const i=e._WINDOW_SIZE||1;let o=t.get(e);return o||(o=this.precomputeWindow(e,i),1!==i&&t.set(e,n(o))),this.wNAF(i,o,r)}}}function Ye(e){return qe(e.Fp),Se(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Fe(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const Xe=BigInt(0),Qe=BigInt(1),et=BigInt(2),tt=BigInt(8),rt={zip215:!0};function nt(e){const t=Ye(e);return Se(e,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}function it(e){const t=nt(e),{Fp:r,n:n,prehash:i,hash:o,randomBytes:s,nByteLength:a,h:u}=t,c=et<<BigInt(8*a)-Qe,f=r.create,l=t.uvRatio||((e,t)=>{try{return{isValid:!0,value:r.sqrt(e*r.inv(t))}}catch(n){return{isValid:!1,value:Xe}}}),h=t.adjustScalarBytes||(e=>e),p=t.domain||((e,t,r)=>{if(t.length||r)throw new Error("Contexts/pre-hash are not supported");return e}),d=e=>"bigint"===typeof e&&Xe<e,y=(e,t)=>d(e)&&d(t)&&e<t,g=e=>e===Xe||y(e,c);function b(e,t){if(y(e,t))return e;throw new Error(`Expected valid scalar < ${t}, got ${typeof e} ${e}`)}function m(e){return e===Xe?e:b(e,n)}const w=new Map;function v(e){if(!(e instanceof k))throw new Error("ExtendedPoint expected")}class k{constructor(e,t,r,n){if(this.ex=e,this.ey=t,this.ez=r,this.et=n,!g(e))throw new Error("x required");if(!g(t))throw new Error("y required");if(!g(r))throw new Error("z required");if(!g(n))throw new Error("t required")}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(e){if(e instanceof k)throw new Error("extended point not allowed");const{x:t,y:r}=e||{};if(!g(t)||!g(r))throw new Error("invalid affine point");return new k(t,r,Qe,f(t*r))}static normalizeZ(e){const t=r.invertBatch(e.map((e=>e.ez)));return e.map(((e,r)=>e.toAffine(t[r]))).map(k.fromAffine)}_setWindowSize(e){this._WINDOW_SIZE=e,w.delete(this)}assertValidity(){const{a:e,d:r}=t;if(this.is0())throw new Error("bad point: ZERO");const{ex:n,ey:i,ez:o,et:s}=this,a=f(n*n),u=f(i*i),c=f(o*o),l=f(c*c),h=f(a*e),p=f(c*f(h+u)),d=f(l+f(r*f(a*u)));if(p!==d)throw new Error("bad point: equation left != right (1)");const y=f(n*i),g=f(o*s);if(y!==g)throw new Error("bad point: equation left != right (2)")}equals(e){v(e);const{ex:t,ey:r,ez:n}=this,{ex:i,ey:o,ez:s}=e,a=f(t*s),u=f(i*n),c=f(r*s),l=f(o*n);return a===u&&c===l}is0(){return this.equals(k.ZERO)}negate(){return new k(f(-this.ex),this.ey,this.ez,f(-this.et))}double(){const{a:e}=t,{ex:r,ey:n,ez:i}=this,o=f(r*r),s=f(n*n),a=f(et*f(i*i)),u=f(e*o),c=r+n,l=f(f(c*c)-o-s),h=u+s,p=h-a,d=u-s,y=f(l*p),g=f(h*d),b=f(l*d),m=f(p*h);return new k(y,g,m,b)}add(e){v(e);const{a:r,d:n}=t,{ex:i,ey:o,ez:s,et:a}=this,{ex:u,ey:c,ez:l,et:h}=e;if(r===BigInt(-1)){const e=f((o-i)*(c+u)),t=f((o+i)*(c-u)),r=f(t-e);if(r===Xe)return this.double();const n=f(s*et*h),p=f(a*et*l),d=p+n,y=t+e,g=p-n,b=f(d*r),m=f(y*g),w=f(d*g),v=f(r*y);return new k(b,m,v,w)}const p=f(i*u),d=f(o*c),y=f(a*n*h),g=f(s*l),b=f((i+o)*(u+c)-p-d),m=g-y,w=g+y,x=f(d-r*p),S=f(b*m),E=f(w*x),I=f(b*x),B=f(m*w);return new k(S,E,B,I)}subtract(e){return this.add(e.negate())}wNAF(e){return E.wNAFCached(this,w,e,k.normalizeZ)}multiply(e){const{p:t,f:r}=this.wNAF(b(e,n));return k.normalizeZ([t,r])[0]}multiplyUnsafe(e){let t=m(e);return t===Xe?S:this.equals(S)||t===Qe?this:this.equals(x)?this.wNAF(t).p:E.unsafeLadder(this,t)}isSmallOrder(){return this.multiplyUnsafe(u).is0()}isTorsionFree(){return E.unsafeLadder(this,n).is0()}toAffine(e){const{ex:t,ey:n,ez:i}=this,o=this.is0();null==e&&(e=o?tt:r.inv(i));const s=f(t*e),a=f(n*e),u=f(i*e);if(o)return{x:Xe,y:Qe};if(u!==Qe)throw new Error("invZ was invalid");return{x:s,y:a}}clearCofactor(){const{h:e}=t;return e===Qe?this:this.multiplyUnsafe(e)}static fromHex(e,n=!1){const{d:i,a:o}=t,s=r.BYTES;e=ge("pointHex",e,s);const a=e.slice(),u=e[s-1];a[s-1]=-129&u;const h=pe(a);h===Xe||b(h,n?c:r.ORDER);const p=f(h*h),d=f(p-Qe),y=f(i*p-o);let{isValid:g,value:m}=l(d,y);if(!g)throw new Error("Point.fromHex: invalid y coordinate");const w=(m&Qe)===Qe,v=0!==(128&u);if(!n&&m===Xe&&v)throw new Error("Point.fromHex: x=0 and x_0=1");return v!==w&&(m=f(-m)),k.fromAffine({x:m,y:h})}static fromPrivateKey(e){return A(e).point}toRawBytes(){const{x:e,y:t}=this.toAffine(),n=ye(t,r.BYTES);return n[n.length-1]|=e&Qe?128:0,n}toHex(){return ce(this.toRawBytes())}}k.BASE=new k(t.Gx,t.Gy,Qe,f(t.Gx*t.Gy)),k.ZERO=new k(Xe,Qe,Qe,Xe);const{BASE:x,ZERO:S}=k,E=Ge(k,8*a);function I(e){return Te(e,n)}function B(e){return I(pe(e))}function A(e){const t=a;e=ge("private key",e,t);const r=ge("hashed private key",o(e),2*t),n=h(r.slice(0,t)),i=r.slice(t,2*t),s=B(n),u=x.multiply(s),c=u.toRawBytes();return{head:n,prefix:i,scalar:s,point:u,pointBytes:c}}function _(e){return A(e).pointBytes}function O(e=new Uint8Array,...t){const r=be(...t);return B(o(p(r,ge("context",e),!!i)))}function P(e,t,n={}){e=ge("message",e),i&&(e=i(e));const{prefix:o,scalar:s,pointBytes:u}=A(t),c=O(n.context,o,e),f=x.multiply(c).toRawBytes(),l=O(n.context,f,u,e),h=I(c+l*s);m(h);const p=be(f,ye(h,r.BYTES));return ge("result",p,2*a)}const T=rt;function R(e,t,n,o=T){const{context:s,zip215:a}=o,u=r.BYTES;e=ge("signature",e,2*u),t=ge("message",t),i&&(t=i(t));const c=pe(e.slice(u,2*u));let f,l,h;try{f=k.fromHex(n,a),l=k.fromHex(e.slice(0,u),a),h=x.multiplyUnsafe(c)}catch(y){return!1}if(!a&&f.isSmallOrder())return!1;const p=O(s,l.toRawBytes(),f.toRawBytes(),t),d=l.add(f.multiplyUnsafe(p));return d.subtract(h).clearCofactor().equals(k.ZERO)}x._setWindowSize(8);const L={getExtendedPublicKey:A,randomPrivateKey:()=>s(r.BYTES),precompute(e=8,t=k.BASE){return t._setWindowSize(e),t.multiply(BigInt(3)),t}};return{CURVE:t,getPublicKey:_,sign:P,verify:R,ExtendedPoint:k,utils:L}}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const ot=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),st=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),at=(BigInt(0),BigInt(1)),ut=BigInt(2),ct=BigInt(5),ft=BigInt(10),lt=BigInt(20),ht=BigInt(40),pt=BigInt(80);function dt(e){const t=ot,r=e*e%t,n=r*e%t,i=Le(n,ut,t)*n%t,o=Le(i,at,t)*e%t,s=Le(o,ct,t)*o%t,a=Le(s,ft,t)*s%t,u=Le(a,lt,t)*a%t,c=Le(u,ht,t)*u%t,f=Le(c,pt,t)*c%t,l=Le(f,pt,t)*c%t,h=Le(l,ft,t)*s%t,p=Le(h,ut,t)*e%t;return{pow_p_5_8:p,b2:n}}function yt(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}function gt(e,t){const r=ot,n=Te(t*t*t,r),i=Te(n*n*t,r),o=dt(e*i).pow_p_5_8;let s=Te(e*n*o,r);const a=Te(t*s*s,r),u=s,c=Te(s*st,r),f=a===e,l=a===Te(-e,r),h=a===Te(-e*st,r);return f&&(s=u),(l||h)&&(s=c),ze(s,r)&&(s=Te(-s,r)),{isValid:f||l,value:s}}const bt=Me(ot,void 0,!0),mt={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:bt,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:ie,randomBytes:E,adjustScalarBytes:yt,uvRatio:gt},wt=it(mt);function vt(e,t,r){if(t.length>255)throw new Error("Context is too big");return k(w("SigEd25519 no Ed25519 collisions"),new Uint8Array([r?1:0,t.length]),t,e)}const kt=(bt.ORDER+BigInt(3))/BigInt(8);bt.pow(ut,kt),bt.sqrt(bt.neg(bt.ONE)),bt.ORDER,BigInt(5),BigInt(8),BigInt(486662);De(bt,bt.neg(BigInt(486664)));BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function xt(e,t,r,n,i,o,s){try{var a=e[o](s),u=a.value}catch(c){return void r(c)}a.done?t(u):Promise.resolve(u).then(n,i)}function St(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){xt(o,n,i,s,a,"next",e)}function a(e){xt(o,n,i,s,a,"throw",e)}s(void 0)}))}}var Et=r(60527),It=r(88385),Bt=r(4370),At=r(82558),_t=r.n(At),Ot=r(73054),Pt=r.n(Ot),Tt=r(27237),Rt=r.n(Tt);const Lt=(e,t,r)=>e&t^~e&r,Ut=(e,t,r)=>e&t^e&r^t&r,Ct=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Wt=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),zt=new Uint32Array(64);class Nt extends B{constructor(){super(64,32,8,!1),this.A=0|Wt[0],this.B=0|Wt[1],this.C=0|Wt[2],this.D=0|Wt[3],this.E=0|Wt[4],this.F=0|Wt[5],this.G=0|Wt[6],this.H=0|Wt[7]}get(){const{A:e,B:t,C:r,D:n,E:i,F:o,G:s,H:a}=this;return[e,t,r,n,i,o,s,a]}set(e,t,r,n,i,o,s,a){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|o,this.G=0|s,this.H=0|a}process(e,t){for(let f=0;f<16;f++,t+=4)zt[f]=e.getUint32(t,!1);for(let f=16;f<64;f++){const e=zt[f-15],t=zt[f-2],r=b(e,7)^b(e,18)^e>>>3,n=b(t,17)^b(t,19)^t>>>10;zt[f]=n+zt[f-7]+r+zt[f-16]|0}let{A:r,B:n,C:i,D:o,E:s,F:a,G:u,H:c}=this;for(let f=0;f<64;f++){const e=b(s,6)^b(s,11)^b(s,25),t=c+e+Lt(s,a,u)+Ct[f]+zt[f]|0,l=b(r,2)^b(r,13)^b(r,22),h=l+Ut(r,n,i)|0;c=u,u=a,a=s,s=o+t|0,o=i,i=n,n=r,r=t+h|0}r=r+this.A|0,n=n+this.B|0,i=i+this.C|0,o=o+this.D|0,s=s+this.E|0,a=a+this.F|0,u=u+this.G|0,c=c+this.H|0,this.set(r,n,i,o,s,a,u,c)}roundClean(){zt.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const qt=S((()=>new Nt));var jt=r(5265),Kt=r(96838),Ft=r(31349),Mt=r(92321),Dt=r(54503),Ht=r(89108);function Zt(e){if(Array.isArray(e))return(0,Ht.Z)(e)}var $t=r(32194),Vt=r(67553);function Jt(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Gt(e){return Zt(e)||(0,$t.Z)(e)||(0,Vt.Z)(e)||Jt()}var Yt=r(2434),Xt=r(43577);function Qt(e,t){if(null==e)return{};var r,n,i=(0,Xt.Z)(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}class er extends TypeError{constructor(e,t){let r;const{message:n,...i}=e,{path:o}=e,s=0===o.length?n:"At path: "+o.join(".")+" -- "+n;super(s),Object.assign(this,i),this.name=this.constructor.name,this.failures=()=>{var n;return null!=(n=r)?n:r=[e,...t()]}}}function tr(e){return rr(e)&&"function"===typeof e[Symbol.iterator]}function rr(e){return"object"===typeof e&&null!=e}function nr(e){return"string"===typeof e?JSON.stringify(e):""+e}function ir(e){const{done:t,value:r}=e.next();return t?void 0:r}function or(e,t,r,n){if(!0===e)return;!1===e?e={}:"string"===typeof e&&(e={message:e});const{path:i,branch:o}=t,{type:s}=r,{refinement:a,message:u="Expected a value of type `"+s+"`"+(a?" with refinement `"+a+"`":"")+", but received: `"+nr(n)+"`"}=e;return{value:n,type:s,refinement:a,key:i[i.length-1],path:i,branch:o,...e,message:u}}function*sr(e,t,r,n){tr(e)||(e=[e]);for(const i of e){const e=or(i,t,r,n);e&&(yield e)}}function*ar(e,t,r={}){const{path:n=[],branch:i=[e],coerce:o=!1,mask:s=!1}=r,a={path:n,branch:i};if(o&&(e=t.coercer(e,a),s&&"type"!==t.type&&rr(t.schema)&&rr(e)&&!Array.isArray(e)))for(const c in e)void 0===t.schema[c]&&delete e[c];let u=!0;for(const c of t.validator(e,a))u=!1,yield[c,void 0];for(let[c,f,l]of t.entries(e,a)){const t=ar(f,l,{path:void 0===c?n:[...n,c],branch:void 0===c?i:[...i,f],coerce:o,mask:s});for(const r of t)r[0]?(u=!1,yield[r[0],void 0]):o&&(f=r[1],void 0===c?e=f:e instanceof Map?e.set(c,f):e instanceof Set?e.add(f):rr(e)&&(e[c]=f))}if(u)for(const c of t.refiner(e,a))u=!1,yield[c,void 0];u&&(yield[void 0,e])}class ur{constructor(e){const{type:t,schema:r,validator:n,refiner:i,coercer:o=(e=>e),entries:s=function*(){}}=e;this.type=t,this.schema=r,this.entries=s,this.coercer=o,this.validator=n?(e,t)=>{const r=n(e,t);return sr(r,t,this,e)}:()=>[],this.refiner=i?(e,t)=>{const r=i(e,t);return sr(r,t,this,e)}:()=>[]}assert(e){return cr(e,this)}create(e){return fr(e,this)}is(e){return hr(e,this)}mask(e){return lr(e,this)}validate(e,t={}){return pr(e,this,t)}}function cr(e,t){const r=pr(e,t);if(r[0])throw r[0]}function fr(e,t){const r=pr(e,t,{coerce:!0});if(r[0])throw r[0];return r[1]}function lr(e,t){const r=pr(e,t,{coerce:!0,mask:!0});if(r[0])throw r[0];return r[1]}function hr(e,t){const r=pr(e,t);return!r[0]}function pr(e,t,r={}){const n=ar(e,t,r),i=ir(n);if(i[0]){const e=new er(i[0],(function*(){for(const e of n)e[0]&&(yield e[0])}));return[e,void 0]}{const e=i[1];return[void 0,e]}}function dr(e,t){return new ur({type:e,schema:null,validator:t})}function yr(){return dr("any",(()=>!0))}function gr(e){return new ur({type:"array",schema:e,*entries(t){if(e&&Array.isArray(t))for(const[r,n]of t.entries())yield[r,n,e]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||"Expected an array value, but received: "+nr(e)}})}function br(){return dr("boolean",(e=>"boolean"===typeof e))}function mr(e){return dr("instance",(t=>t instanceof e||"Expected a `"+e.name+"` instance, but received: "+nr(t)))}function wr(e){const t=nr(e),r=typeof e;return new ur({type:"literal",schema:"string"===r||"number"===r||"boolean"===r?e:null,validator(r){return r===e||"Expected the literal `"+t+"`, but received: "+nr(r)}})}function vr(){return dr("never",(()=>!1))}function kr(e){return new ur({...e,validator:(t,r)=>null===t||e.validator(t,r),refiner:(t,r)=>null===t||e.refiner(t,r)})}function xr(){return dr("number",(e=>"number"===typeof e&&!isNaN(e)||"Expected a number, but received: "+nr(e)))}function Sr(e){return new ur({...e,validator:(t,r)=>void 0===t||e.validator(t,r),refiner:(t,r)=>void 0===t||e.refiner(t,r)})}function Er(e,t){return new ur({type:"record",schema:null,*entries(r){if(rr(r))for(const n in r){const i=r[n];yield[n,n,e],yield[n,i,t]}},validator(e){return rr(e)||"Expected an object, but received: "+nr(e)}})}function Ir(){return dr("string",(e=>"string"===typeof e||"Expected a string, but received: "+nr(e)))}function Br(e){const t=vr();return new ur({type:"tuple",schema:null,*entries(r){if(Array.isArray(r)){const n=Math.max(e.length,r.length);for(let i=0;i<n;i++)yield[i,r[i],e[i]||t]}},validator(e){return Array.isArray(e)||"Expected an array, but received: "+nr(e)}})}function Ar(e){const t=Object.keys(e);return new ur({type:"type",schema:e,*entries(r){if(rr(r))for(const n of t)yield[n,r[n],e[n]]},validator(e){return rr(e)||"Expected an object, but received: "+nr(e)}})}function _r(e){const t=e.map((e=>e.type)).join(" | ");return new ur({type:"union",schema:null,validator(r,n){const i=[];for(const t of e){const[...e]=ar(r,t,n),[o]=e;if(!o[0])return[];for(const[t]of e)t&&i.push(t)}return["Expected the value to satisfy a union of `"+t+"`, but received: "+nr(r),...i]}})}function Or(){return dr("unknown",(()=>!0))}function Pr(e,t,r){return new ur({...e,coercer:(n,i)=>hr(n,t)?e.coercer(r(n,i),i):e.coercer(n,i)})}var Tr=r(61201),Rr=r.n(Tr),Lr=r(27197);function Ur(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function Cr(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Wr(e,t,r){return Wr=Cr()?Reflect.construct.bind():function(e,t,r){var n=[null];n.push.apply(n,t);var i=Function.bind.apply(e,n),o=new i;return r&&(0,Lr.Z)(o,r.prototype),o},Wr.apply(null,arguments)}function zr(e){var t="function"===typeof Map?new Map:void 0;return zr=function(e){if(null===e||!Ur(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return Wr(e,arguments,(0,Bt.Z)(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),(0,Lr.Z)(r,e)},zr(e)}function Nr(e,t){while(!Object.prototype.hasOwnProperty.call(e,t))if(e=(0,Bt.Z)(e),null===e)break;return e}function qr(){return qr="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=Nr(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},qr.apply(this,arguments)}var jr=r(48471),Kr=r(26587);const[Fr,Mr,Dr]=[[],[],[]],Hr=BigInt(0),Zr=BigInt(1),$r=BigInt(2),Vr=BigInt(7),Jr=BigInt(256),Gr=BigInt(113);for(let _u=0,Ou=Zr,Pu=1,Tu=0;_u<24;_u++){[Pu,Tu]=[Tu,(2*Pu+3*Tu)%5],Fr.push(2*(5*Tu+Pu)),Mr.push((_u+1)*(_u+2)/2%64);let e=Hr;for(let t=0;t<7;t++)Ou=(Ou<<Zr^(Ou>>Vr)*Gr)%Jr,Ou&$r&&(e^=Zr<<(Zr<<BigInt(t))-Zr);Dr.push(e)}const[Yr,Xr]=P(Dr,!0),Qr=(e,t,r)=>r>32?F(e,t,r):j(e,t,r),en=(e,t,r)=>r>32?M(e,t,r):K(e,t,r);function tn(e,t=24){const r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let n=0;n<10;n++)r[n]=e[n]^e[n+10]^e[n+20]^e[n+30]^e[n+40];for(let n=0;n<10;n+=2){const t=(n+8)%10,i=(n+2)%10,o=r[i],s=r[i+1],a=Qr(o,s,1)^r[t],u=en(o,s,1)^r[t+1];for(let r=0;r<50;r+=10)e[n+r]^=a,e[n+r+1]^=u}let t=e[2],i=e[3];for(let r=0;r<24;r++){const n=Mr[r],o=Qr(t,i,n),s=en(t,i,n),a=Fr[r];t=e[a],i=e[a+1],e[a]=o,e[a+1]=s}for(let n=0;n<50;n+=10){for(let t=0;t<10;t++)r[t]=e[n+t];for(let t=0;t<10;t++)e[n+t]^=~r[(t+2)%10]&r[(t+4)%10]}e[0]^=Yr[n],e[1]^=Xr[n]}r.fill(0)}class rn extends x{constructor(e,t,r,n=!1,i=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=n,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,u(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=y(this.state)}keccak(){tn(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){l(this);const{blockLen:t,state:r}=this;e=v(e);const n=e.length;for(let i=0;i<n;){const o=Math.min(t-this.pos,n-i);for(let t=0;t<o;t++)r[this.pos++]^=e[i++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:n}=this;e[r]^=t,0!==(128&t)&&r===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){l(this,!1),c(e),this.finish();const t=this.state,{blockLen:r}=this;for(let n=0,i=e.length;n<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-n);e.set(t.subarray(this.posOut,this.posOut+o),n),this.posOut+=o,n+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return u(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(h(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:n,rounds:i,enableXOF:o}=this;return e||(e=new rn(t,r,n,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=n,e.enableXOF=o,e.destroyed=this.destroyed,e}}const nn=(e,t,r)=>S((()=>new rn(t,e,r))),on=nn(1,136,32);class sn extends x{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,f(e);const r=v(t);if(this.iHash=e.create(),"function"!==typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const n=this.blockLen,i=new Uint8Array(n);i.set(r.length>n?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return l(this),this.iHash.update(e),this}digestInto(e){l(this),c(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:n,destroyed:i,blockLen:o,outputLen:s}=this;return e.finished=n,e.destroyed=i,e.blockLen=o,e.outputLen=s,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const an=(e,t,r)=>new sn(e,t).update(r).digest();
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
function un(e){const t=Ye(e);Se(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:n,a:i}=t;if(r){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!==typeof r||"bigint"!==typeof r.beta||"function"!==typeof r.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}an.create=(e,t)=>new sn(e,t);const{bytesToNumberBE:cn,hexToBytes:fn}=n,ln={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(e){const{Err:t}=ln;if(e.length<2||2!==e[0])throw new t("Invalid signature integer tag");const r=e[1],n=e.subarray(2,r+2);if(!r||n.length!==r)throw new t("Invalid signature integer: wrong length");if(128&n[0])throw new t("Invalid signature integer: negative");if(0===n[0]&&!(128&n[1]))throw new t("Invalid signature integer: unnecessary leading zero");return{d:cn(n),l:e.subarray(r+2)}},toSig(e){const{Err:t}=ln,r="string"===typeof e?fn(e):e;if(!(r instanceof Uint8Array))throw new Error("ui8a expected");let n=r.length;if(n<2||48!=r[0])throw new t("Invalid signature tag");if(r[1]!==n-2)throw new t("Invalid signature: incorrect length");const{d:i,l:o}=ln._parseInt(r.subarray(2)),{d:s,l:a}=ln._parseInt(o);if(a.length)throw new t("Invalid signature: left bytes after parsing");return{r:i,s:s}},hexFromSig(e){const t=e=>8&Number.parseInt(e[0],16)?"00"+e:e,r=e=>{const t=e.toString(16);return 1&t.length?`0${t}`:t},n=t(r(e.s)),i=t(r(e.r)),o=n.length/2,s=i.length/2,a=r(o),u=r(s);return`30${r(s+o+4)}02${u}${i}02${a}${n}`}},hn=BigInt(0),pn=BigInt(1),dn=(BigInt(2),BigInt(3));BigInt(4);function yn(e){const t=un(e),{Fp:r}=t,n=t.toBytes||((e,t,n)=>{const i=t.toAffine();return be(Uint8Array.from([4]),r.toBytes(i.x),r.toBytes(i.y))}),i=t.fromBytes||(e=>{const t=e.subarray(1),n=r.fromBytes(t.subarray(0,r.BYTES)),i=r.fromBytes(t.subarray(r.BYTES,2*r.BYTES));return{x:n,y:i}});function o(e){const{a:n,b:i}=t,o=r.sqr(e),s=r.mul(o,e);return r.add(r.add(s,r.mul(e,n)),i)}if(!r.eql(r.sqr(t.Gy),o(t.Gx)))throw new Error("bad generator point: equation left != right");function s(e){return"bigint"===typeof e&&hn<e&&e<t.n}function a(e){if(!s(e))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function u(e){const{allowedPrivateKeyLengths:r,nByteLength:n,wrapPrivateKey:i,n:o}=t;if(r&&"bigint"!==typeof e){if(e instanceof Uint8Array&&(e=ce(e)),"string"!==typeof e||!r.includes(e.length))throw new Error("Invalid key");e=e.padStart(2*n,"0")}let s;try{s="bigint"===typeof e?e:he(ge("private key",e,n))}catch(u){throw new Error(`private key must be ${n} bytes, hex or bigint, not ${typeof e}`)}return i&&(s=Te(s,o)),a(s),s}const c=new Map;function f(e){if(!(e instanceof l))throw new Error("ProjectivePoint expected")}class l{constructor(e,t,n){if(this.px=e,this.py=t,this.pz=n,null==e||!r.isValid(e))throw new Error("x required");if(null==t||!r.isValid(t))throw new Error("y required");if(null==n||!r.isValid(n))throw new Error("z required")}static fromAffine(e){const{x:t,y:n}=e||{};if(!e||!r.isValid(t)||!r.isValid(n))throw new Error("invalid affine point");if(e instanceof l)throw new Error("projective point not allowed");const i=e=>r.eql(e,r.ZERO);return i(t)&&i(n)?l.ZERO:new l(t,n,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){const t=r.invertBatch(e.map((e=>e.pz)));return e.map(((e,r)=>e.toAffine(t[r]))).map(l.fromAffine)}static fromHex(e){const t=l.fromAffine(i(ge("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return l.BASE.multiply(u(e))}_setWindowSize(e){this._WINDOW_SIZE=e,c.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!r.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:e,y:n}=this.toAffine();if(!r.isValid(e)||!r.isValid(n))throw new Error("bad point: x or y not FE");const i=r.sqr(n),s=o(e);if(!r.eql(i,s))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:e}=this.toAffine();if(r.isOdd)return!r.isOdd(e);throw new Error("Field doesn't support isOdd")}equals(e){f(e);const{px:t,py:n,pz:i}=this,{px:o,py:s,pz:a}=e,u=r.eql(r.mul(t,a),r.mul(o,i)),c=r.eql(r.mul(n,a),r.mul(s,i));return u&&c}negate(){return new l(this.px,r.neg(this.py),this.pz)}double(){const{a:e,b:n}=t,i=r.mul(n,dn),{px:o,py:s,pz:a}=this;let u=r.ZERO,c=r.ZERO,f=r.ZERO,h=r.mul(o,o),p=r.mul(s,s),d=r.mul(a,a),y=r.mul(o,s);return y=r.add(y,y),f=r.mul(o,a),f=r.add(f,f),u=r.mul(e,f),c=r.mul(i,d),c=r.add(u,c),u=r.sub(p,c),c=r.add(p,c),c=r.mul(u,c),u=r.mul(y,u),f=r.mul(i,f),d=r.mul(e,d),y=r.sub(h,d),y=r.mul(e,y),y=r.add(y,f),f=r.add(h,h),h=r.add(f,h),h=r.add(h,d),h=r.mul(h,y),c=r.add(c,h),d=r.mul(s,a),d=r.add(d,d),h=r.mul(d,y),u=r.sub(u,h),f=r.mul(d,p),f=r.add(f,f),f=r.add(f,f),new l(u,c,f)}add(e){f(e);const{px:n,py:i,pz:o}=this,{px:s,py:a,pz:u}=e;let c=r.ZERO,h=r.ZERO,p=r.ZERO;const d=t.a,y=r.mul(t.b,dn);let g=r.mul(n,s),b=r.mul(i,a),m=r.mul(o,u),w=r.add(n,i),v=r.add(s,a);w=r.mul(w,v),v=r.add(g,b),w=r.sub(w,v),v=r.add(n,o);let k=r.add(s,u);return v=r.mul(v,k),k=r.add(g,m),v=r.sub(v,k),k=r.add(i,o),c=r.add(a,u),k=r.mul(k,c),c=r.add(b,m),k=r.sub(k,c),p=r.mul(d,v),c=r.mul(y,m),p=r.add(c,p),c=r.sub(b,p),p=r.add(b,p),h=r.mul(c,p),b=r.add(g,g),b=r.add(b,g),m=r.mul(d,m),v=r.mul(y,v),b=r.add(b,m),m=r.sub(g,m),m=r.mul(d,m),v=r.add(v,m),g=r.mul(b,v),h=r.add(h,g),g=r.mul(k,v),c=r.mul(w,c),c=r.sub(c,g),g=r.mul(w,b),p=r.mul(k,p),p=r.add(p,g),new l(c,h,p)}subtract(e){return this.add(e.negate())}is0(){return this.equals(l.ZERO)}wNAF(e){return p.wNAFCached(this,c,e,(e=>{const t=r.invertBatch(e.map((e=>e.pz)));return e.map(((e,r)=>e.toAffine(t[r]))).map(l.fromAffine)}))}multiplyUnsafe(e){const n=l.ZERO;if(e===hn)return n;if(a(e),e===pn)return this;const{endo:i}=t;if(!i)return p.unsafeLadder(this,e);let{k1neg:o,k1:s,k2neg:u,k2:c}=i.splitScalar(e),f=n,h=n,d=this;while(s>hn||c>hn)s&pn&&(f=f.add(d)),c&pn&&(h=h.add(d)),d=d.double(),s>>=pn,c>>=pn;return o&&(f=f.negate()),u&&(h=h.negate()),h=new l(r.mul(h.px,i.beta),h.py,h.pz),f.add(h)}multiply(e){a(e);let n,i,o=e;const{endo:s}=t;if(s){const{k1neg:e,k1:t,k2neg:a,k2:u}=s.splitScalar(o);let{p:c,f:f}=this.wNAF(t),{p:h,f:d}=this.wNAF(u);c=p.constTimeNegate(e,c),h=p.constTimeNegate(a,h),h=new l(r.mul(h.px,s.beta),h.py,h.pz),n=c.add(h),i=f.add(d)}else{const{p:e,f:t}=this.wNAF(o);n=e,i=t}return l.normalizeZ([n,i])[0]}multiplyAndAddUnsafe(e,t,r){const n=l.BASE,i=(e,t)=>t!==hn&&t!==pn&&e.equals(n)?e.multiply(t):e.multiplyUnsafe(t),o=i(this,t).add(i(e,r));return o.is0()?void 0:o}toAffine(e){const{px:t,py:n,pz:i}=this,o=this.is0();null==e&&(e=o?r.ONE:r.inv(i));const s=r.mul(t,e),a=r.mul(n,e),u=r.mul(i,e);if(o)return{x:r.ZERO,y:r.ZERO};if(!r.eql(u,r.ONE))throw new Error("invZ was invalid");return{x:s,y:a}}isTorsionFree(){const{h:e,isTorsionFree:r}=t;if(e===pn)return!0;if(r)return r(l,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:e,clearCofactor:r}=t;return e===pn?this:r?r(l,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return this.assertValidity(),n(l,this,e)}toHex(e=!0){return ce(this.toRawBytes(e))}}l.BASE=new l(t.Gx,t.Gy,r.ONE),l.ZERO=new l(r.ZERO,r.ONE,r.ZERO);const h=t.nBitLength,p=Ge(l,t.endo?Math.ceil(h/2):h);return{CURVE:t,ProjectivePoint:l,normPrivateKeyToScalar:u,weierstrassEquation:o,isWithinCurveOrder:s}}function gn(e){const t=Ye(e);return Se(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function bn(e){const t=gn(e),{Fp:r,n:n}=t,i=r.BYTES+1,o=2*r.BYTES+1;function s(e){return hn<e&&e<r.ORDER}function a(e){return Te(e,n)}function u(e){return Ue(e,n)}const{ProjectivePoint:c,normPrivateKeyToScalar:f,weierstrassEquation:l,isWithinCurveOrder:h}=yn({...t,toBytes(e,t,n){const i=t.toAffine(),o=r.toBytes(i.x),s=be;return n?s(Uint8Array.from([t.hasEvenY()?2:3]),o):s(Uint8Array.from([4]),o,r.toBytes(i.y))},fromBytes(e){const t=e.length,n=e[0],a=e.subarray(1);if(t!==i||2!==n&&3!==n){if(t===o&&4===n){const e=r.fromBytes(a.subarray(0,r.BYTES)),t=r.fromBytes(a.subarray(r.BYTES,2*r.BYTES));return{x:e,y:t}}throw new Error(`Point of length ${t} was invalid. Expected ${i} compressed bytes or ${o} uncompressed bytes`)}{const e=he(a);if(!s(e))throw new Error("Point is not on curve");const t=l(e);let i=r.sqrt(t);const o=(i&pn)===pn,u=1===(1&n);return u!==o&&(i=r.neg(i)),{x:e,y:i}}}}),p=e=>ce(de(e,t.nByteLength));function d(e){const t=n>>pn;return e>t}function y(e){return d(e)?a(-e):e}const g=(e,t,r)=>he(e.slice(t,r));class b{constructor(e,t,r){this.r=e,this.s=t,this.recovery=r,this.assertValidity()}static fromCompact(e){const r=t.nByteLength;return e=ge("compactSignature",e,2*r),new b(g(e,0,r),g(e,r,2*r))}static fromDER(e){const{r:t,s:r}=ln.toSig(ge("DER",e));return new b(t,r)}assertValidity(){if(!h(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!h(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(e){return new b(this.r,this.s,e)}recoverPublicKey(e){const{r:n,s:i,recovery:o}=this,s=S(ge("msgHash",e));if(null==o||![0,1,2,3].includes(o))throw new Error("recovery id invalid");const f=2===o||3===o?n+t.n:n;if(f>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");const l=0===(1&o)?"02":"03",h=c.fromHex(l+p(f)),d=u(f),y=a(-s*d),g=a(i*d),b=c.BASE.multiplyAndAddUnsafe(h,y,g);if(!b)throw new Error("point at infinify");return b.assertValidity(),b}hasHighS(){return d(this.s)}normalizeS(){return this.hasHighS()?new b(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return le(this.toDERHex())}toDERHex(){return ln.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return le(this.toCompactHex())}toCompactHex(){return p(this.r)+p(this.s)}}const m={isValidPrivateKey(e){try{return f(e),!0}catch(t){return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{const e=Ze(t.n);return $e(t.randomBytes(e),t.n)},precompute(e=8,t=c.BASE){return t._setWindowSize(e),t.multiply(BigInt(3)),t}};function w(e,t=!0){return c.fromPrivateKey(e).toRawBytes(t)}function v(e){const t=e instanceof Uint8Array,r="string"===typeof e,n=(t||r)&&e.length;return t?n===i||n===o:r?n===2*i||n===2*o:e instanceof c}function k(e,t,r=!0){if(v(e))throw new Error("first arg must be private key");if(!v(t))throw new Error("second arg must be public key");const n=c.fromHex(t);return n.multiply(f(e)).toRawBytes(r)}const x=t.bits2int||function(e){const r=he(e),n=8*e.length-t.nBitLength;return n>0?r>>BigInt(n):r},S=t.bits2int_modN||function(e){return a(x(e))},E=me(t.nBitLength);function I(e){if("bigint"!==typeof e)throw new Error("bigint expected");if(!(hn<=e&&e<E))throw new Error(`bigint expected < 2^${t.nBitLength}`);return de(e,t.nByteLength)}function B(e,n,i=A){if(["recovered","canonical"].some((e=>e in i)))throw new Error("sign() legacy options not supported");const{hash:o,randomBytes:s}=t;let{lowS:l,prehash:p,extraEntropy:g}=i;null==l&&(l=!0),e=ge("msgHash",e),p&&(e=ge("prehashed msgHash",o(e)));const m=S(e),w=f(n),v=[I(w),I(m)];if(null!=g){const e=!0===g?s(r.BYTES):g;v.push(ge("extraEntropy",e))}const k=be(...v),E=m;function B(e){const t=x(e);if(!h(t))return;const r=u(t),n=c.BASE.multiply(t).toAffine(),i=a(n.x);if(i===hn)return;const o=a(r*a(E+i*w));if(o===hn)return;let s=(n.x===i?0:2)|Number(n.y&pn),f=o;return l&&d(o)&&(f=y(o),s^=1),new b(i,f,s)}return{seed:k,k2sig:B}}const A={lowS:t.lowS,prehash:!1},_={lowS:t.lowS,prehash:!1};function O(e,r,n=A){const{seed:i,k2sig:o}=B(e,r,n),s=t,a=ke(s.hash.outputLen,s.nByteLength,s.hmac);return a(i,o)}function P(e,r,n,i=_){const o=e;if(r=ge("msgHash",r),n=ge("publicKey",n),"strict"in i)throw new Error("options.strict was renamed to lowS");const{lowS:s,prehash:f}=i;let l,h;try{if("string"===typeof o||o instanceof Uint8Array)try{l=b.fromDER(o)}catch(x){if(!(x instanceof ln.Err))throw x;l=b.fromCompact(o)}else{if("object"!==typeof o||"bigint"!==typeof o.r||"bigint"!==typeof o.s)throw new Error("PARSE");{const{r:e,s:t}=o;l=new b(e,t)}}h=c.fromHex(n)}catch(E){if("PARSE"===E.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(s&&l.hasHighS())return!1;f&&(r=t.hash(r));const{r:p,s:d}=l,y=S(r),g=u(d),m=a(y*g),w=a(p*g),v=c.BASE.multiplyAndAddUnsafe(h,m,w)?.toAffine();if(!v)return!1;const k=a(v.x);return k===p}return c.BASE._setWindowSize(8),{CURVE:t,getPublicKey:w,getSharedSecret:k,sign:O,verify:P,ProjectivePoint:c,Signature:b,utils:m}}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
function mn(e){return{hash:e,hmac:(t,...r)=>an(e,t,k(...r)),randomBytes:E}}function wn(e,t){const r=t=>bn({...e,...mn(t)});return Object.freeze({...r(t),create:r})}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const vn=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),kn=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),xn=BigInt(1),Sn=BigInt(2),En=(e,t)=>(e+t/Sn)/t;function In(e){const t=vn,r=BigInt(3),n=BigInt(6),i=BigInt(11),o=BigInt(22),s=BigInt(23),a=BigInt(44),u=BigInt(88),c=e*e*e%t,f=c*c*e%t,l=Le(f,r,t)*f%t,h=Le(l,r,t)*f%t,p=Le(h,Sn,t)*c%t,d=Le(p,i,t)*p%t,y=Le(d,o,t)*d%t,g=Le(y,a,t)*y%t,b=Le(g,u,t)*g%t,m=Le(b,a,t)*y%t,w=Le(m,r,t)*f%t,v=Le(w,s,t)*d%t,k=Le(v,n,t)*c%t,x=Le(k,Sn,t);if(!Bn.eql(Bn.sqr(x),e))throw new Error("Cannot find square root");return x}const Bn=Me(vn,void 0,void 0,{sqrt:In}),An=wn({a:BigInt(0),b:BigInt(7),Fp:Bn,n:kn,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=kn,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-xn*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=r,s=BigInt("0x100000000000000000000000000000000"),a=En(o*e,t),u=En(-n*e,t);let c=Te(e-a*r-u*i,t),f=Te(-a*n-u*o,t);const l=c>s,h=f>s;if(l&&(c=t-c),h&&(f=t-f),c>s||f>s)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:l,k1:c,k2neg:h,k2:f}}}},qt);BigInt(0);An.ProjectivePoint;wt.utils.randomPrivateKey;var _n=function(){var e=wt.utils.randomPrivateKey(),t=On(e),r=new Uint8Array(64);return r.set(e),r.set(t,32),{publicKey:t,secretKey:r}},On=wt.getPublicKey;function Pn(e){try{return wt.ExtendedPoint.fromHex(e),!0}catch(t){return!1}}var Tn=function(e,t){return wt.sign(e,t.slice(0,32))},Rn=wt.verify,Ln=function(e){return a.lW.isBuffer(e)?e:e instanceof Uint8Array?a.lW.from(e.buffer,e.byteOffset,e.byteLength):a.lW.from(e)};var Un,Cn=function(){function e(t){(0,o.Z)(this,e),Object.assign(this,t)}return(0,s.Z)(e,[{key:"encode",value:function(){return a.lW.from((0,jt.serialize)(Wn,this))}}],[{key:"decode",value:function(e){return(0,jt.deserialize)(Wn,this,e)}},{key:"decodeUnchecked",value:function(e){return(0,jt.deserializeUnchecked)(Wn,this,e)}}]),e}(),Wn=new Map;function zn(e){var t=Nn();return function(){var r,n=(0,Bt.Z)(e);if(t){var i=(0,Bt.Z)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,It.Z)(this,r)}}function Nn(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var qn=32,jn=32;function Kn(e){return void 0!==e._bn}var Fn=1;Un=Symbol.toStringTag;var Mn=function(e){(0,Et.Z)(r,e);var t=zn(r);function r(e){var n;if((0,o.Z)(this,r),n=t.call(this,{}),n._bn=void 0,Kn(e))n._bn=e._bn;else{if("string"===typeof e){var i=Rt().decode(e);if(i.length!=jn)throw new Error("Invalid public key input");n._bn=new(Pt())(i)}else n._bn=new(Pt())(e);if(n._bn.byteLength()>jn)throw new Error("Invalid public key input")}return n}return(0,s.Z)(r,[{key:"equals",value:function(e){return this._bn.eq(e._bn)}},{key:"toBase58",value:function(){return Rt().encode(this.toBytes())}},{key:"toJSON",value:function(){return this.toBase58()}},{key:"toBytes",value:function(){var e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}},{key:"toBuffer",value:function(){var e=this._bn.toArrayLike(a.lW);if(e.length===jn)return e;var t=a.lW.alloc(32);return e.copy(t,32-e.length),t}},{key:Un,get:function(){return"PublicKey(".concat(this.toString(),")")}},{key:"toString",value:function(){return this.toBase58()}}],[{key:"unique",value:function(){var e=new r(Fn);return Fn+=1,new r(e.toBuffer())}},{key:"createWithSeed",value:function(){var e=St(_t().mark((function e(t,n,i){var o,s;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=a.lW.concat([t.toBuffer(),a.lW.from(n),i.toBuffer()]),s=qt(o),e.abrupt("return",new r(s));case 3:case"end":return e.stop()}}),e)})));function t(t,r,n){return e.apply(this,arguments)}return t}()},{key:"createProgramAddressSync",value:function(e,t){var n=a.lW.alloc(0);e.forEach((function(e){if(e.length>qn)throw new TypeError("Max seed length exceeded");n=a.lW.concat([n,Ln(e)])})),n=a.lW.concat([n,t.toBuffer(),a.lW.from("ProgramDerivedAddress")]);var i=qt(n);if(Pn(i))throw new Error("Invalid seeds, address must fall off the curve");return new r(i)}},{key:"createProgramAddress",value:function(){var e=St(_t().mark((function e(t,r){return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.createProgramAddressSync(t,r));case 1:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"findProgramAddressSync",value:function(e,t){var r,n=255;while(0!=n){try{var i=e.concat(a.lW.from([n]));r=this.createProgramAddressSync(i,t)}catch(o){if(o instanceof TypeError)throw o;n--;continue}return[r,n]}throw new Error("Unable to find a viable program address nonce")}},{key:"findProgramAddress",value:function(){var e=St(_t().mark((function e(t,r){return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.findProgramAddressSync(t,r));case 1:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"isOnCurve",value:function(e){var t=new r(e);return Pn(t.toBytes())}}]),r}(Cn);Mn["default"]=new Mn("11111111111111111111111111111111"),Wn.set(Mn,{kind:"struct",fields:[["_bn","u256"]]});new Mn("BPFLoader1111111111111111111111111111111111");var Dn=1232,Hn=127,Zn=64;function $n(e){var t=Vn();return function(){var r,n=(0,Bt.Z)(e);if(t){var i=(0,Bt.Z)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,It.Z)(this,r)}}function Vn(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var Jn=function(e){(0,Et.Z)(r,e);var t=$n(r);function r(e){var n;return(0,o.Z)(this,r),n=t.call(this,"Signature ".concat(e," has expired: block height exceeded.")),n.signature=void 0,n.signature=e,n}return(0,s.Z)(r)}(zr(Error));Object.defineProperty(Jn.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});var Gn=function(e){(0,Et.Z)(r,e);var t=$n(r);function r(e,n){var i;return(0,o.Z)(this,r),i=t.call(this,"Transaction was not confirmed in ".concat(n.toFixed(2)," seconds. It is ")+"unknown if it succeeded or failed. Check signature "+"".concat(e," using the Solana Explorer or CLI tools.")),i.signature=void 0,i.signature=e,i}return(0,s.Z)(r)}(zr(Error));Object.defineProperty(Gn.prototype,"name",{value:"TransactionExpiredTimeoutError"});var Yn=function(e){(0,Et.Z)(r,e);var t=$n(r);function r(e){var n;return(0,o.Z)(this,r),n=t.call(this,"Signature ".concat(e," has expired: the nonce is no longer valid.")),n.signature=void 0,n.signature=e,n}return(0,s.Z)(r)}(zr(Error));function Xn(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Qn(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==r["return"]||r["return"]()}finally{if(a)throw o}}}}function Qn(e,t){if(e){if("string"===typeof e)return ei(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ei(e,t):void 0}}function ei(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Object.defineProperty(Yn.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});var ti=function(){function e(t,r){(0,o.Z)(this,e),this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=r}return(0,s.Z)(e,[{key:"keySegments",value:function(){var e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}},{key:"get",value:function(e){var t,r=Xn(this.keySegments());try{for(r.s();!(t=r.n()).done;){var n=t.value;if(e<n.length)return n[e];e-=n.length}}catch(i){r.e(i)}finally{r.f()}}},{key:"length",get:function(){return this.keySegments().flat().length}},{key:"compileInstructions",value:function(e){var t=255;if(this.length>t+1)throw new Error("Account index overflow encountered during compilation");var r=new Map;this.keySegments().flat().forEach((function(e,t){r.set(e.toBase58(),t)}));var n=function(e){var t=r.get(e.toBase58());if(void 0===t)throw new Error("Encountered an unknown instruction account key during compilation");return t};return e.map((function(e){return{programIdIndex:n(e.programId),accountKeyIndexes:e.keys.map((function(e){return n(e.pubkey)})),data:e.data}}))}}]),e}(),ri=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"publicKey";return Kt.Ik(32,e)},ni=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"string",t=Kt.n_([Kt.Jq("length"),Kt.Jq("lengthPadding"),Kt.Ik(Kt.cv(Kt.Jq(),-8),"chars")],e),r=t.decode.bind(t),n=t.encode.bind(t),i=t;return i.decode=function(e,t){var n=r(e,t);return n["chars"].toString()},i.encode=function(e,t,r){var i={chars:a.lW.from(e,"utf8")};return n(i,t,r)},i.alloc=function(e){return Kt.Jq().span+Kt.Jq().span+a.lW.from(e,"utf8").length},i},ii=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"authorized";return Kt.n_([ri("staker"),ri("withdrawer")],e)},oi=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"lockup";return Kt.n_([Kt.gM("unixTimestamp"),Kt.gM("epoch"),ri("custodian")],e)},si=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"voteInit";return Kt.n_([ri("nodePubkey"),ri("authorizedVoter"),ri("authorizedWithdrawer"),Kt.u8("commission")],e)},ai=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"voteAuthorizeWithSeedArgs";return Kt.n_([Kt.Jq("voteAuthorizationType"),ri("currentAuthorityDerivedKeyOwnerPubkey"),ni("currentAuthorityDerivedKeySeed"),ri("newAuthorized")],e)};function ui(e,t){var r=function e(r){if(r.span>=0)return r.span;if("function"===typeof r.alloc)return r.alloc(t[r.property]);if("count"in r&&"elementLayout"in r){var n=t[r.property];if(Array.isArray(n))return n.length*e(r.elementLayout)}else if("fields"in r)return ui({layout:r},t[r.property]);return 0},n=0;return e.layout.fields.forEach((function(e){n+=r(e)})),n}function ci(e){for(var t=0,r=0;;){var n=e.shift();if(t|=(127&n)<<7*r,r+=1,0===(128&n))break}return t}function fi(e,t){for(var r=t;;){var n=127&r;if(r>>=7,0==r){e.push(n);break}n|=128,e.push(n)}}function li(e,t){if(!e)throw new Error(t||"Assertion failed")}function hi(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=pi(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==r["return"]||r["return"]()}finally{if(a)throw o}}}}function pi(e,t){if(e){if("string"===typeof e)return di(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?di(e,t):void 0}}function di(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var yi=function(){function e(t,r){(0,o.Z)(this,e),this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=r}return(0,s.Z)(e,[{key:"getMessageComponents",value:function(){var e=Gt(this.keyMetaMap.entries());li(e.length<=256,"Max static account keys length exceeded");var t=e.filter((function(e){var t=(0,Ft.Z)(e,2),r=t[1];return r.isSigner&&r.isWritable})),r=e.filter((function(e){var t=(0,Ft.Z)(e,2),r=t[1];return r.isSigner&&!r.isWritable})),n=e.filter((function(e){var t=(0,Ft.Z)(e,2),r=t[1];return!r.isSigner&&r.isWritable})),i=e.filter((function(e){var t=(0,Ft.Z)(e,2),r=t[1];return!r.isSigner&&!r.isWritable})),o={numRequiredSignatures:t.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:i.length};li(t.length>0,"Expected at least one writable signer key");var s=(0,Ft.Z)(t[0],1),a=s[0];li(a===this.payer.toBase58(),"Expected first writable signer key to be the fee payer");var u=[].concat(Gt(t.map((function(e){var t=(0,Ft.Z)(e,1),r=t[0];return new Mn(r)}))),Gt(r.map((function(e){var t=(0,Ft.Z)(e,1),r=t[0];return new Mn(r)}))),Gt(n.map((function(e){var t=(0,Ft.Z)(e,1),r=t[0];return new Mn(r)}))),Gt(i.map((function(e){var t=(0,Ft.Z)(e,1),r=t[0];return new Mn(r)}))));return[o,u]}},{key:"extractTableLookup",value:function(e){var t=this.drainKeysFoundInLookupTable(e.state.addresses,(function(e){return!e.isSigner&&!e.isInvoked&&e.isWritable})),r=(0,Ft.Z)(t,2),n=r[0],i=r[1],o=this.drainKeysFoundInLookupTable(e.state.addresses,(function(e){return!e.isSigner&&!e.isInvoked&&!e.isWritable})),s=(0,Ft.Z)(o,2),a=s[0],u=s[1];if(0!==n.length||0!==a.length)return[{accountKey:e.key,writableIndexes:n,readonlyIndexes:a},{writable:i,readonly:u}]}},{key:"drainKeysFoundInLookupTable",value:function(e,t){var r,n=this,i=new Array,o=new Array,s=hi(this.keyMetaMap.entries());try{var a=function(){var s=(0,Ft.Z)(r.value,2),a=s[0],u=s[1];if(t(u)){var c=new Mn(a),f=e.findIndex((function(e){return e.equals(c)}));f>=0&&(li(f<256,"Max lookup table index exceeded"),i.push(f),o.push(c),n.keyMetaMap["delete"](a))}};for(s.s();!(r=s.n()).done;)a()}catch(u){s.e(u)}finally{s.f()}return[i,o]}}],[{key:"compile",value:function(t,r){var n=new Map,i=function(e){var t=e.toBase58(),r=n.get(t);return void 0===r&&(r={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(t,r)),r},o=i(r);o.isSigner=!0,o.isWritable=!0;var s,a=hi(t);try{for(a.s();!(s=a.n()).done;){var u=s.value;i(u.programId).isInvoked=!0;var c,f=hi(u.keys);try{for(f.s();!(c=f.n()).done;){var l=c.value,h=i(l.pubkey);h.isSigner||(h.isSigner=l.isSigner),h.isWritable||(h.isWritable=l.isWritable)}}catch(p){f.e(p)}finally{f.f()}}}catch(p){a.e(p)}finally{a.f()}return new e(r,n)}}]),e}(),gi=function(){function e(t){var r=this;(0,o.Z)(this,e),this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map((function(e){return new Mn(e)})),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach((function(e){return r.indexToProgramIds.set(e.programIdIndex,r.accountKeys[e.programIdIndex])}))}return(0,s.Z)(e,[{key:"version",get:function(){return"legacy"}},{key:"staticAccountKeys",get:function(){return this.accountKeys}},{key:"compiledInstructions",get:function(){return this.instructions.map((function(e){return{programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:Rt().decode(e.data)}}))}},{key:"addressTableLookups",get:function(){return[]}},{key:"getAccountKeys",value:function(){return new ti(this.staticAccountKeys)}},{key:"isAccountSigner",value:function(e){return e<this.header.numRequiredSignatures}},{key:"isAccountWritable",value:function(e){var t=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){var r=e-t,n=this.accountKeys.length-t,i=n-this.header.numReadonlyUnsignedAccounts;return r<i}var o=t-this.header.numReadonlySignedAccounts;return e<o}},{key:"isProgramId",value:function(e){return this.indexToProgramIds.has(e)}},{key:"programIds",value:function(){return Gt(this.indexToProgramIds.values())}},{key:"nonProgramIds",value:function(){var e=this;return this.accountKeys.filter((function(t,r){return!e.isProgramId(r)}))}},{key:"serialize",value:function(){var e=this.accountKeys.length,t=[];fi(t,e);var r=this.instructions.map((function(e){var t=e.accounts,r=e.programIdIndex,n=Array.from(Rt().decode(e.data)),i=[];fi(i,t.length);var o=[];return fi(o,n.length),{programIdIndex:r,keyIndicesCount:a.lW.from(i),keyIndices:t,dataLength:a.lW.from(o),data:n}})),n=[];fi(n,r.length);var i=a.lW.alloc(Dn);a.lW.from(n).copy(i);var o=n.length;r.forEach((function(e){var t=Kt.n_([Kt.u8("programIdIndex"),Kt.Ik(e.keyIndicesCount.length,"keyIndicesCount"),Kt.A9(Kt.u8("keyIndex"),e.keyIndices.length,"keyIndices"),Kt.Ik(e.dataLength.length,"dataLength"),Kt.A9(Kt.u8("userdatum"),e.data.length,"data")]),r=t.encode(e,i,o);o+=r})),i=i.slice(0,o);var s=Kt.n_([Kt.Ik(1,"numRequiredSignatures"),Kt.Ik(1,"numReadonlySignedAccounts"),Kt.Ik(1,"numReadonlyUnsignedAccounts"),Kt.Ik(t.length,"keyCount"),Kt.A9(ri("key"),e,"keys"),ri("recentBlockhash")]),u={numRequiredSignatures:a.lW.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:a.lW.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:a.lW.from([this.header.numReadonlyUnsignedAccounts]),keyCount:a.lW.from(t),keys:this.accountKeys.map((function(e){return Ln(e.toBytes())})),recentBlockhash:Rt().decode(this.recentBlockhash)},c=a.lW.alloc(2048),f=s.encode(u,c);return i.copy(c,f),c.slice(0,f+i.length)}}],[{key:"compile",value:function(t){var r=yi.compile(t.instructions,t.payerKey),n=r.getMessageComponents(),i=(0,Ft.Z)(n,2),o=i[0],s=i[1],a=new ti(s),u=a.compileInstructions(t.instructions).map((function(e){return{programIdIndex:e.programIdIndex,accounts:e.accountKeyIndexes,data:Rt().encode(e.data)}}));return new e({header:o,accountKeys:s,recentBlockhash:t.recentBlockhash,instructions:u})}},{key:"from",value:function(t){var r=Gt(t),n=r.shift();if(n!==(n&Hn))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");for(var i=r.shift(),o=r.shift(),s=ci(r),u=[],c=0;c<s;c++){var f=r.slice(0,jn);r=r.slice(jn),u.push(new Mn(a.lW.from(f)))}var l=r.slice(0,jn);r=r.slice(jn);for(var h=ci(r),p=[],d=0;d<h;d++){var y=r.shift(),g=ci(r),b=r.slice(0,g);r=r.slice(g);var m=ci(r),w=r.slice(0,m),v=Rt().encode(a.lW.from(w));r=r.slice(m),p.push({programIdIndex:y,accounts:b,data:v})}var k={header:{numRequiredSignatures:n,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:o},recentBlockhash:Rt().encode(a.lW.from(l)),accountKeys:u,instructions:p};return new e(k)}}]),e}();function bi(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=mi(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==r["return"]||r["return"]()}finally{if(a)throw o}}}}function mi(e,t){if(e){if("string"===typeof e)return wi(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?wi(e,t):void 0}}function wi(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var vi=function(){function e(t){(0,o.Z)(this,e),this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}return(0,s.Z)(e,[{key:"version",get:function(){return 0}},{key:"numAccountKeysFromLookups",get:function(){var e,t=0,r=bi(this.addressTableLookups);try{for(r.s();!(e=r.n()).done;){var n=e.value;t+=n.readonlyIndexes.length+n.writableIndexes.length}}catch(i){r.e(i)}finally{r.f()}return t}},{key:"getAccountKeys",value:function(e){var t;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");t=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)t=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new ti(this.staticAccountKeys,t)}},{key:"isAccountSigner",value:function(e){return e<this.header.numRequiredSignatures}},{key:"isAccountWritable",value:function(e){var t=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(e>=r){var n=e-r,i=this.addressTableLookups.reduce((function(e,t){return e+t.writableIndexes.length}),0);return n<i}if(e>=this.header.numRequiredSignatures){var o=e-t,s=r-t,a=s-this.header.numReadonlyUnsignedAccounts;return o<a}var u=t-this.header.numReadonlySignedAccounts;return e<u}},{key:"resolveAddressTableLookups",value:function(e){var t,r={writable:[],readonly:[]},n=bi(this.addressTableLookups);try{var i=function(){var n=t.value,i=e.find((function(e){return e.key.equals(n.accountKey)}));if(!i)throw new Error("Failed to find address lookup table account for table key ".concat(n.accountKey.toBase58()));var o,s=bi(n.writableIndexes);try{for(s.s();!(o=s.n()).done;){var a=o.value;if(!(a<i.state.addresses.length))throw new Error("Failed to find address for index ".concat(a," in address lookup table ").concat(n.accountKey.toBase58()));r.writable.push(i.state.addresses[a])}}catch(l){s.e(l)}finally{s.f()}var u,c=bi(n.readonlyIndexes);try{for(c.s();!(u=c.n()).done;){var f=u.value;if(!(f<i.state.addresses.length))throw new Error("Failed to find address for index ".concat(f," in address lookup table ").concat(n.accountKey.toBase58()));r.readonly.push(i.state.addresses[f])}}catch(l){c.e(l)}finally{c.f()}};for(n.s();!(t=n.n()).done;)i()}catch(o){n.e(o)}finally{n.f()}return r}},{key:"serialize",value:function(){var e=Array();fi(e,this.staticAccountKeys.length);var t=this.serializeInstructions(),r=Array();fi(r,this.compiledInstructions.length);var n=this.serializeAddressTableLookups(),i=Array();fi(i,this.addressTableLookups.length);var o=Kt.n_([Kt.u8("prefix"),Kt.n_([Kt.u8("numRequiredSignatures"),Kt.u8("numReadonlySignedAccounts"),Kt.u8("numReadonlyUnsignedAccounts")],"header"),Kt.Ik(e.length,"staticAccountKeysLength"),Kt.A9(ri(),this.staticAccountKeys.length,"staticAccountKeys"),ri("recentBlockhash"),Kt.Ik(r.length,"instructionsLength"),Kt.Ik(t.length,"serializedInstructions"),Kt.Ik(i.length,"addressTableLookupsLength"),Kt.Ik(n.length,"serializedAddressTableLookups")]),s=new Uint8Array(Dn),a=128,u=o.encode({prefix:a,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map((function(e){return e.toBytes()})),recentBlockhash:Rt().decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:t,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:n},s);return s.slice(0,u)}},{key:"serializeInstructions",value:function(){var e,t=0,r=new Uint8Array(Dn),n=bi(this.compiledInstructions);try{for(n.s();!(e=n.n()).done;){var i=e.value,o=Array();fi(o,i.accountKeyIndexes.length);var s=Array();fi(s,i.data.length);var a=Kt.n_([Kt.u8("programIdIndex"),Kt.Ik(o.length,"encodedAccountKeyIndexesLength"),Kt.A9(Kt.u8(),i.accountKeyIndexes.length,"accountKeyIndexes"),Kt.Ik(s.length,"encodedDataLength"),Kt.Ik(i.data.length,"data")]);t+=a.encode({programIdIndex:i.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(o),accountKeyIndexes:i.accountKeyIndexes,encodedDataLength:new Uint8Array(s),data:i.data},r,t)}}catch(u){n.e(u)}finally{n.f()}return r.slice(0,t)}},{key:"serializeAddressTableLookups",value:function(){var e,t=0,r=new Uint8Array(Dn),n=bi(this.addressTableLookups);try{for(n.s();!(e=n.n()).done;){var i=e.value,o=Array();fi(o,i.writableIndexes.length);var s=Array();fi(s,i.readonlyIndexes.length);var a=Kt.n_([ri("accountKey"),Kt.Ik(o.length,"encodedWritableIndexesLength"),Kt.A9(Kt.u8(),i.writableIndexes.length,"writableIndexes"),Kt.Ik(s.length,"encodedReadonlyIndexesLength"),Kt.A9(Kt.u8(),i.readonlyIndexes.length,"readonlyIndexes")]);t+=a.encode({accountKey:i.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(o),writableIndexes:i.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(s),readonlyIndexes:i.readonlyIndexes},r,t)}}catch(u){n.e(u)}finally{n.f()}return r.slice(0,t)}}],[{key:"compile",value:function(t){var r,n=yi.compile(t.instructions,t.payerKey),i=new Array,o={writable:new Array,readonly:new Array},s=t.addressLookupTableAccounts||[],a=bi(s);try{for(a.s();!(r=a.n()).done;){var u=r.value,c=n.extractTableLookup(u);if(void 0!==c){var f,l,h=(0,Ft.Z)(c,2),p=h[0],d=h[1],y=d.writable,g=d.readonly;i.push(p),(f=o.writable).push.apply(f,Gt(y)),(l=o.readonly).push.apply(l,Gt(g))}}}catch(S){a.e(S)}finally{a.f()}var b=n.getMessageComponents(),m=(0,Ft.Z)(b,2),w=m[0],v=m[1],k=new ti(v,o),x=k.compileInstructions(t.instructions);return new e({header:w,staticAccountKeys:v,recentBlockhash:t.recentBlockhash,compiledInstructions:x,addressTableLookups:i})}},{key:"deserialize",value:function(t){var r=Gt(t),n=r.shift(),i=n&Hn;li(n!==i,"Expected versioned message but received legacy message");var o=i;li(0===o,"Expected versioned message with version 0 but found version ".concat(o));for(var s={numRequiredSignatures:r.shift(),numReadonlySignedAccounts:r.shift(),numReadonlyUnsignedAccounts:r.shift()},a=[],u=ci(r),c=0;c<u;c++)a.push(new Mn(r.splice(0,jn)));for(var f=Rt().encode(r.splice(0,jn)),l=ci(r),h=[],p=0;p<l;p++){var d=r.shift(),y=ci(r),g=r.splice(0,y),b=ci(r),m=new Uint8Array(r.splice(0,b));h.push({programIdIndex:d,accountKeyIndexes:g,data:m})}for(var w=ci(r),v=[],k=0;k<w;k++){var x=new Mn(r.splice(0,jn)),S=ci(r),E=r.splice(0,S),I=ci(r),B=r.splice(0,I);v.push({accountKey:x,writableIndexes:E,readonlyIndexes:B})}return new e({header:s,staticAccountKeys:a,recentBlockhash:f,compiledInstructions:h,addressTableLookups:v})}}]),e}();function ki(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=xi(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==r["return"]||r["return"]()}finally{if(a)throw o}}}}function xi(e,t){if(e){if("string"===typeof e)return Si(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Si(e,t):void 0}}function Si(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ei(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ii(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ei(Object(r),!0).forEach((function(t){(0,Dt.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ei(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Bi=function(e){return e[e["BLOCKHEIGHT_EXCEEDED"]=0]="BLOCKHEIGHT_EXCEEDED",e[e["PROCESSED"]=1]="PROCESSED",e[e["TIMED_OUT"]=2]="TIMED_OUT",e[e["NONCE_INVALID"]=3]="NONCE_INVALID",e}({}),Ai=a.lW.alloc(Zn).fill(0),_i=function(){function e(t){(0,o.Z)(this,e),this.keys=void 0,this.programId=void 0,this.data=a.lW.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}return(0,s.Z)(e,[{key:"toJSON",value:function(){return{keys:this.keys.map((function(e){var t=e.pubkey,r=e.isSigner,n=e.isWritable;return{pubkey:t.toJSON(),isSigner:r,isWritable:n}})),programId:this.programId.toJSON(),data:Gt(this.data)}}}]),e}(),Oi=function(){function e(t){if((0,o.Z)(this,e),this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){var r=t,n=r.minContextSlot,i=r.nonceInfo;this.minNonceContextSlot=n,this.nonceInfo=i}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){var s=t,a=s.blockhash,u=s.lastValidBlockHeight;this.recentBlockhash=a,this.lastValidBlockHeight=u}else{var c=t,f=c.recentBlockhash,l=c.nonceInfo;l&&(this.nonceInfo=l),this.recentBlockhash=f}}return(0,s.Z)(e,[{key:"signature",get:function(){return this.signatures.length>0?this.signatures[0].signature:null}},{key:"toJSON",value:function(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map((function(e){return e.toJSON()})),signers:this.signatures.map((function(e){var t=e.publicKey;return t.toJSON()}))}}},{key:"add",value:function(){for(var e=this,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(0===r.length)throw new Error("No instructions");return r.forEach((function(t){"instructions"in t?e.instructions=e.instructions.concat(t.instructions):"data"in t&&"programId"in t&&"keys"in t?e.instructions.push(t):e.instructions.push(new _i(t))})),this}},{key:"compileMessage",value:function(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;var e,t,r;if(this.nonceInfo?(e=this.nonceInfo.nonce,t=this.instructions[0]!=this.nonceInfo.nonceInstruction?[this.nonceInfo.nonceInstruction].concat(Gt(this.instructions)):this.instructions):(e=this.recentBlockhash,t=this.instructions),!e)throw new Error("Transaction recentBlockhash required");if(t.length<1&&console.warn("No instructions provided"),this.feePayer)r=this.feePayer;else{if(!(this.signatures.length>0&&this.signatures[0].publicKey))throw new Error("Transaction fee payer required");r=this.signatures[0].publicKey}for(var n=0;n<t.length;n++)if(void 0===t[n].programId)throw new Error("Transaction instruction index ".concat(n," has undefined program id"));var i=[],o=[];t.forEach((function(e){e.keys.forEach((function(e){o.push(Ii({},e))}));var t=e.programId.toString();i.includes(t)||i.push(t)})),i.forEach((function(e){o.push({pubkey:new Mn(e),isSigner:!1,isWritable:!1})}));var s=[];o.forEach((function(e){var t=e.pubkey.toString(),r=s.findIndex((function(e){return e.pubkey.toString()===t}));r>-1?(s[r].isWritable=s[r].isWritable||e.isWritable,s[r].isSigner=s[r].isSigner||e.isSigner):s.push(e)})),s.sort((function(e,t){if(e.isSigner!==t.isSigner)return e.isSigner?-1:1;if(e.isWritable!==t.isWritable)return e.isWritable?-1:1;var r={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return e.pubkey.toBase58().localeCompare(t.pubkey.toBase58(),"en",r)}));var a=s.findIndex((function(e){return e.pubkey.equals(r)}));if(a>-1){var u=s.splice(a,1),c=(0,Ft.Z)(u,1),f=c[0];f.isSigner=!0,f.isWritable=!0,s.unshift(f)}else s.unshift({pubkey:r,isSigner:!0,isWritable:!0});var l,h=ki(this.signatures);try{var p=function(){var e=l.value,t=s.findIndex((function(t){return t.pubkey.equals(e.publicKey)}));if(!(t>-1))throw new Error("unknown signer: ".concat(e.publicKey.toString()));s[t].isSigner||(s[t].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."))};for(h.s();!(l=h.n()).done;)p()}catch(k){h.e(k)}finally{h.f()}var d=0,y=0,g=0,b=[],m=[];s.forEach((function(e){var t=e.pubkey,r=e.isSigner,n=e.isWritable;r?(b.push(t.toString()),d+=1,n||(y+=1)):(m.push(t.toString()),n||(g+=1))}));var w=b.concat(m),v=t.map((function(e){var t=e.data,r=e.programId;return{programIdIndex:w.indexOf(r.toString()),accounts:e.keys.map((function(e){return w.indexOf(e.pubkey.toString())})),data:Rt().encode(t)}}));return v.forEach((function(e){li(e.programIdIndex>=0),e.accounts.forEach((function(e){return li(e>=0)}))})),new gi({header:{numRequiredSignatures:d,numReadonlySignedAccounts:y,numReadonlyUnsignedAccounts:g},accountKeys:w,recentBlockhash:e,instructions:v})}},{key:"_compile",value:function(){var e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);if(this.signatures.length===t.length){var r=this.signatures.every((function(e,r){return t[r].equals(e.publicKey)}));if(r)return e}return this.signatures=t.map((function(e){return{signature:null,publicKey:e}})),e}},{key:"serializeMessage",value:function(){return this._compile().serialize()}},{key:"getEstimatedFee",value:function(){var e=St(_t().mark((function e(t){return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getFeeForMessage(this.compileMessage());case 2:return e.abrupt("return",e.sent.value);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"setSigners",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(0===t.length)throw new Error("No signers");var n=new Set;this.signatures=t.filter((function(e){var t=e.toString();return!n.has(t)&&(n.add(t),!0)})).map((function(e){return{signature:null,publicKey:e}}))}},{key:"sign",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(0===t.length)throw new Error("No signers");for(var n=new Set,i=[],o=0,s=t;o<s.length;o++){var a=s[o],u=a.publicKey.toString();n.has(u)||(n.add(u),i.push(a))}this.signatures=i.map((function(e){return{signature:null,publicKey:e.publicKey}}));var c=this._compile();this._partialSign.apply(this,[c].concat(i))}},{key:"partialSign",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(0===t.length)throw new Error("No signers");for(var n=new Set,i=[],o=0,s=t;o<s.length;o++){var a=s[o],u=a.publicKey.toString();n.has(u)||(n.add(u),i.push(a))}var c=this._compile();this._partialSign.apply(this,[c].concat(i))}},{key:"_partialSign",value:function(e){for(var t=this,r=e.serialize(),n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];i.forEach((function(e){var n=Tn(r,e.secretKey);t._addSignature(e.publicKey,Ln(n))}))}},{key:"addSignature",value:function(e,t){this._compile(),this._addSignature(e,t)}},{key:"_addSignature",value:function(e,t){li(64===t.length);var r=this.signatures.findIndex((function(t){return e.equals(t.publicKey)}));if(r<0)throw new Error("unknown signer: ".concat(e.toString()));this.signatures[r].signature=a.lW.from(t)}},{key:"verifySignatures",value:function(e){return this._verifySignatures(this.serializeMessage(),void 0===e||e)}},{key:"_verifySignatures",value:function(e,t){var r,n=ki(this.signatures);try{for(n.s();!(r=n.n()).done;){var i=r.value,o=i.signature,s=i.publicKey;if(null===o){if(t)return!1}else if(!Rn(o,e,s.toBytes()))return!1}}catch(a){n.e(a)}finally{n.f()}return!0}},{key:"serialize",value:function(e){var t=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),r=t.requireAllSignatures,n=t.verifySignatures,i=this.serializeMessage();if(n&&!this._verifySignatures(i,r))throw new Error("Signature verification failed");return this._serialize(i)}},{key:"_serialize",value:function(e){var t=this.signatures,r=[];fi(r,t.length);var n=r.length+64*t.length+e.length,i=a.lW.alloc(n);return li(t.length<256),a.lW.from(r).copy(i,0),t.forEach((function(e,t){var n=e.signature;null!==n&&(li(64===n.length,"signature has invalid length"),a.lW.from(n).copy(i,r.length+64*t))})),e.copy(i,r.length+64*t.length),li(i.length<=Dn,"Transaction too large: ".concat(i.length," > ").concat(Dn)),i}},{key:"keys",get:function(){return li(1===this.instructions.length),this.instructions[0].keys.map((function(e){return e.pubkey}))}},{key:"programId",get:function(){return li(1===this.instructions.length),this.instructions[0].programId}},{key:"data",get:function(){return li(1===this.instructions.length),this.instructions[0].data}}],[{key:"from",value:function(t){for(var r=Gt(t),n=ci(r),i=[],o=0;o<n;o++){var s=r.slice(0,Zn);r=r.slice(Zn),i.push(Rt().encode(a.lW.from(s)))}return e.populate(gi.from(r),i)}},{key:"populate",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=new e;return n.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(n.feePayer=t.accountKeys[0]),r.forEach((function(e,r){var i={signature:e==Rt().encode(Ai)?null:Rt().decode(e),publicKey:t.accountKeys[r]};n.signatures.push(i)})),t.instructions.forEach((function(e){var r=e.accounts.map((function(e){var r=t.accountKeys[e];return{pubkey:r,isSigner:n.signatures.some((function(e){return e.publicKey.toString()===r.toString()}))||t.isAccountSigner(e),isWritable:t.isAccountWritable(e)}}));n.instructions.push(new _i({keys:r,programId:t.accountKeys[e.programIdIndex],data:Rt().decode(e.data)}))})),n._message=t,n._json=n.toJSON(),n}}]),e}();var Pi=160,Ti=64,Ri=Pi/Ti,Li=1e3/Ri,Ui=new Mn("SysvarC1ock11111111111111111111111111111111"),Ci=(new Mn("SysvarEpochSchedu1e111111111111111111111111"),new Mn("Sysvar1nstructions1111111111111111111111111"),new Mn("SysvarRecentB1ockHashes11111111111111111111")),Wi=new Mn("SysvarRent111111111111111111111111111111111"),zi=(new Mn("SysvarRewards111111111111111111111111111111"),new Mn("SysvarS1otHashes111111111111111111111111111"),new Mn("SysvarS1otHistory11111111111111111111111111"),new Mn("SysvarStakeHistory1111111111111111111111111"));function Ni(e,t,r,n){return qi.apply(this,arguments)}function qi(){return qi=St(_t().mark((function e(t,r,n,i){var o,s,a,u,c;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=i&&{skipPreflight:i.skipPreflight,preflightCommitment:i.preflightCommitment||i.commitment,maxRetries:i.maxRetries,minContextSlot:i.minContextSlot},e.next=3,t.sendTransaction(r,n,o);case 3:if(s=e.sent,null==r.recentBlockhash||null==r.lastValidBlockHeight){e.next=10;break}return e.next=7,t.confirmTransaction({abortSignal:null===i||void 0===i?void 0:i.abortSignal,signature:s,blockhash:r.recentBlockhash,lastValidBlockHeight:r.lastValidBlockHeight},i&&i.commitment);case 7:a=e.sent.value,e.next=22;break;case 10:if(null==r.minNonceContextSlot||null==r.nonceInfo){e.next=18;break}return u=r.nonceInfo.nonceInstruction,c=u.keys[0].pubkey,e.next=15,t.confirmTransaction({abortSignal:null===i||void 0===i?void 0:i.abortSignal,minContextSlot:r.minNonceContextSlot,nonceAccountPubkey:c,nonceValue:r.nonceInfo.nonce,signature:s},i&&i.commitment);case 15:a=e.sent.value,e.next=22;break;case 18:return null!=(null===i||void 0===i?void 0:i.abortSignal)&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),e.next=21,t.confirmTransaction(s,i&&i.commitment);case 21:a=e.sent.value;case 22:if(!a.err){e.next=24;break}throw new Error("Transaction ".concat(s," failed (").concat(JSON.stringify(a),")"));case 24:return e.abrupt("return",s);case 25:case"end":return e.stop()}}),e)}))),qi.apply(this,arguments)}function ji(e){return new Promise((function(t){return setTimeout(t,e)}))}function Ki(e,t){var r=e.layout.span>=0?e.layout.span:ui(e,t),n=a.lW.alloc(r),i=Object.assign({instruction:e.index},t);return e.layout.encode(i,n),n}var Fi=Kt._O("lamportsPerSignature"),Mi=Kt.n_([Kt.Jq("version"),Kt.Jq("state"),ri("authorizedPubkey"),ri("nonce"),Kt.n_([Fi],"feeCalculator")]),Di=Mi.span,Hi=function(){function e(t){(0,o.Z)(this,e),this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}return(0,s.Z)(e,null,[{key:"fromAccountData",value:function(t){var r=Mi.decode(Ln(t),0);return new e({authorizedPubkey:new Mn(r.authorizedPubkey),nonce:new Mn(r.nonce).toString(),feeCalculator:r.feeCalculator})}}]),e}(),Zi=function(e){var t=e.decode.bind(e),r=e.encode.bind(e);return{decode:t,encode:r}},$i=function(e){return function(t){var r=(0,Kt.Ik)(e,t),n=Zi(r),i=n.encode,o=n.decode,s=r;return s.decode=function(e,t){var r=o(e,t);return(0,Mt.oU)(a.lW.from(r))},s.encode=function(t,r,n){var o=(0,Mt.k$)(t,e);return i(o,r,n)},s}},Vi=$i(8),Ji=Object.freeze({Create:{index:0,layout:Kt.n_([Kt.Jq("instruction"),Kt.gM("lamports"),Kt.gM("space"),ri("programId")])},Assign:{index:1,layout:Kt.n_([Kt.Jq("instruction"),ri("programId")])},Transfer:{index:2,layout:Kt.n_([Kt.Jq("instruction"),Vi("lamports")])},CreateWithSeed:{index:3,layout:Kt.n_([Kt.Jq("instruction"),ri("base"),ni("seed"),Kt.gM("lamports"),Kt.gM("space"),ri("programId")])},AdvanceNonceAccount:{index:4,layout:Kt.n_([Kt.Jq("instruction")])},WithdrawNonceAccount:{index:5,layout:Kt.n_([Kt.Jq("instruction"),Kt.gM("lamports")])},InitializeNonceAccount:{index:6,layout:Kt.n_([Kt.Jq("instruction"),ri("authorized")])},AuthorizeNonceAccount:{index:7,layout:Kt.n_([Kt.Jq("instruction"),ri("authorized")])},Allocate:{index:8,layout:Kt.n_([Kt.Jq("instruction"),Kt.gM("space")])},AllocateWithSeed:{index:9,layout:Kt.n_([Kt.Jq("instruction"),ri("base"),ni("seed"),Kt.gM("space"),ri("programId")])},AssignWithSeed:{index:10,layout:Kt.n_([Kt.Jq("instruction"),ri("base"),ni("seed"),ri("programId")])},TransferWithSeed:{index:11,layout:Kt.n_([Kt.Jq("instruction"),Vi("lamports"),ni("seed"),ri("programId")])},UpgradeNonceAccount:{index:12,layout:Kt.n_([Kt.Jq("instruction")])}}),Gi=function(){function e(){(0,o.Z)(this,e)}return(0,s.Z)(e,null,[{key:"createAccount",value:function(e){var t=Ji.Create,r=Ki(t,{lamports:e.lamports,space:e.space,programId:Ln(e.programId.toBuffer())});return new _i({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:r})}},{key:"transfer",value:function(e){var t,r;if("basePubkey"in e){var n=Ji.TransferWithSeed;t=Ki(n,{lamports:BigInt(e.lamports),seed:e.seed,programId:Ln(e.programId.toBuffer())}),r=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{var i=Ji.Transfer;t=Ki(i,{lamports:BigInt(e.lamports)}),r=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new _i({keys:r,programId:this.programId,data:t})}},{key:"assign",value:function(e){var t,r;if("basePubkey"in e){var n=Ji.AssignWithSeed;t=Ki(n,{base:Ln(e.basePubkey.toBuffer()),seed:e.seed,programId:Ln(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{var i=Ji.Assign;t=Ki(i,{programId:Ln(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new _i({keys:r,programId:this.programId,data:t})}},{key:"createAccountWithSeed",value:function(e){var t=Ji.CreateWithSeed,r=Ki(t,{base:Ln(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:Ln(e.programId.toBuffer())}),n=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey!=e.fromPubkey&&n.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new _i({keys:n,programId:this.programId,data:r})}},{key:"createNonceAccount",value:function(t){var r=new Oi;"basePubkey"in t&&"seed"in t?r.add(e.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:Di,programId:this.programId})):r.add(e.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,lamports:t.lamports,space:Di,programId:this.programId}));var n={noncePubkey:t.noncePubkey,authorizedPubkey:t.authorizedPubkey};return r.add(this.nonceInitialize(n)),r}},{key:"nonceInitialize",value:function(e){var t=Ji.InitializeNonceAccount,r=Ki(t,{authorized:Ln(e.authorizedPubkey.toBuffer())}),n={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Ci,isSigner:!1,isWritable:!1},{pubkey:Wi,isSigner:!1,isWritable:!1}],programId:this.programId,data:r};return new _i(n)}},{key:"nonceAdvance",value:function(e){var t=Ji.AdvanceNonceAccount,r=Ki(t),n={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Ci,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r};return new _i(n)}},{key:"nonceWithdraw",value:function(e){var t=Ji.WithdrawNonceAccount,r=Ki(t,{lamports:e.lamports});return new _i({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:Ci,isSigner:!1,isWritable:!1},{pubkey:Wi,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}},{key:"nonceAuthorize",value:function(e){var t=Ji.AuthorizeNonceAccount,r=Ki(t,{authorized:Ln(e.newAuthorizedPubkey.toBuffer())});return new _i({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}},{key:"allocate",value:function(e){var t,r;if("basePubkey"in e){var n=Ji.AllocateWithSeed;t=Ki(n,{base:Ln(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:Ln(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{var i=Ji.Allocate;t=Ki(i,{space:e.space}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new _i({keys:r,programId:this.programId,data:t})}}]),e}();Gi.programId=new Mn("11111111111111111111111111111111");var Yi=Dn-300,Xi=function(){function e(){(0,o.Z)(this,e)}return(0,s.Z)(e,null,[{key:"getMinNumSignatures",value:function(t){return 2*(Math.ceil(t/e.chunkSize)+1+1)}},{key:"load",value:function(){var t=St(_t().mark((function t(r,n,i,o,s){var u,c,f,l,h,p,d,y,g,b,m,w,v,k,x,S,E,I,B,A,_;return _t().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,r.getMinimumBalanceForRentExemption(s.length);case 2:return u=t.sent,t.next=5,r.getAccountInfo(i.publicKey,"confirmed");case 5:if(c=t.sent,f=null,null===c){t.next=16;break}if(!c.executable){t.next=11;break}return console.error("Program load failed, account is already executable"),t.abrupt("return",!1);case 11:c.data.length!==s.length&&(f=f||new Oi,f.add(Gi.allocate({accountPubkey:i.publicKey,space:s.length}))),c.owner.equals(o)||(f=f||new Oi,f.add(Gi.assign({accountPubkey:i.publicKey,programId:o}))),c.lamports<u&&(f=f||new Oi,f.add(Gi.transfer({fromPubkey:n.publicKey,toPubkey:i.publicKey,lamports:u-c.lamports}))),t.next=17;break;case 16:f=(new Oi).add(Gi.createAccount({fromPubkey:n.publicKey,newAccountPubkey:i.publicKey,lamports:u>0?u:1,space:s.length,programId:o}));case 17:if(null===f){t.next=20;break}return t.next=20,Ni(r,f,[n,i],{commitment:"confirmed"});case 20:l=Kt.n_([Kt.Jq("instruction"),Kt.Jq("offset"),Kt.Jq("bytesLength"),Kt.Jq("bytesLengthPadding"),Kt.A9(Kt.u8("byte"),Kt.cv(Kt.Jq(),-8),"bytes")]),h=e.chunkSize,p=0,d=s,y=[];case 25:if(!(d.length>0)){t.next=39;break}if(g=d.slice(0,h),b=a.lW.alloc(h+16),l.encode({instruction:0,offset:p,bytes:g,bytesLength:0,bytesLengthPadding:0},b),m=(new Oi).add({keys:[{pubkey:i.publicKey,isSigner:!0,isWritable:!0}],programId:o,data:b}),y.push(Ni(r,m,[n,i],{commitment:"confirmed"})),!r._rpcEndpoint.includes("solana.com")){t.next=35;break}return w=4,t.next=35,ji(1e3/w);case 35:p+=h,d=d.slice(h),t.next=25;break;case 39:return t.next=41,Promise.all(y);case 41:return v=Kt.n_([Kt.Jq("instruction")]),k=a.lW.alloc(v.span),v.encode({instruction:1},k),x=(new Oi).add({keys:[{pubkey:i.publicKey,isSigner:!0,isWritable:!0},{pubkey:Wi,isSigner:!1,isWritable:!1}],programId:o,data:k}),S="processed",t.next=48,r.sendTransaction(x,[n,i],{preflightCommitment:S});case 48:return E=t.sent,t.next=51,r.confirmTransaction({signature:E,lastValidBlockHeight:x.lastValidBlockHeight,blockhash:x.recentBlockhash},S);case 51:if(I=t.sent,B=I.context,A=I.value,!A.err){t.next=56;break}throw new Error("Transaction ".concat(E," failed (").concat(JSON.stringify(A),")"));case 56:return t.prev=57,t.next=60,r.getSlot({commitment:S});case 60:if(_=t.sent,!(_>B.slot)){t.next=63;break}return t.abrupt("break",71);case 63:t.next=67;break;case 65:t.prev=65,t.t0=t["catch"](57);case 67:return t.next=69,new Promise((function(e){return setTimeout(e,Math.round(Li/2))}));case 69:t.next=56;break;case 71:return t.abrupt("return",!0);case 72:case"end":return t.stop()}}),t,null,[[57,65]])})));function r(e,r,n,i,o){return t.apply(this,arguments)}return r}()}]),e}();Xi.chunkSize=Yi;new Mn("BPFLoader2111111111111111111111111111111111");function Qi(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e["default"]:e}var eo=Object.prototype.toString,to=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};function ro(e,t){var r,n,i,o,s,a,u;if(!0===e)return"true";if(!1===e)return"false";switch(typeof e){case"object":if(null===e)return null;if(e.toJSON&&"function"===typeof e.toJSON)return ro(e.toJSON(),t);if(u=eo.call(e),"[object Array]"===u){for(i="[",n=e.length-1,r=0;r<n;r++)i+=ro(e[r],!0)+",";return n>-1&&(i+=ro(e[r],!0)),i+"]"}if("[object Object]"===u){o=to(e).sort(),n=o.length,i="",r=0;while(r<n)s=o[r],a=ro(e[s],!1),void 0!==a&&(i&&(i+=","),i+=JSON.stringify(s)+":"+a),r++;return"{"+i+"}"}return JSON.stringify(e);case"function":case"undefined":return t?null:void 0;case"string":return JSON.stringify(e);default:return isFinite(e)?e:null}}var no=function(e){var t=ro(e,!1);if(void 0!==t)return""+t},io=Qi(no),oo=32;function so(e){var t=0;while(e>1)e/=2,t++;return t}function ao(e){return 0===e?1:(e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,e|=e>>32,e+1)}var uo=function(){function e(t,r,n,i,s){(0,o.Z)(this,e),this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=r,this.warmup=n,this.firstNormalEpoch=i,this.firstNormalSlot=s}return(0,s.Z)(e,[{key:"getEpoch",value:function(e){return this.getEpochAndSlotIndex(e)[0]}},{key:"getEpochAndSlotIndex",value:function(e){if(e<this.firstNormalSlot){var t=so(ao(e+oo+1))-so(oo)-1,r=this.getSlotsInEpoch(t),n=e-(r-oo);return[t,n]}var i=e-this.firstNormalSlot,o=Math.floor(i/this.slotsPerEpoch),s=this.firstNormalEpoch+o,a=i%this.slotsPerEpoch;return[s,a]}},{key:"getFirstSlotInEpoch",value:function(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*oo:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}},{key:"getLastSlotInEpoch",value:function(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}},{key:"getSlotsInEpoch",value:function(e){return e<this.firstNormalEpoch?Math.pow(2,e+so(oo)):this.slotsPerEpoch}}]),e}();function co(e){var t=fo();return function(){var r,n=(0,Bt.Z)(e);if(t){var i=(0,Bt.Z)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,It.Z)(this,r)}}function fo(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var lo=function(e){(0,Et.Z)(r,e);var t=co(r);function r(e,n){var i;return(0,o.Z)(this,r),i=t.call(this,e),i.logs=void 0,i.logs=n,i}return(0,s.Z)(r)}(zr(Error)),ho=function(e){(0,Et.Z)(r,e);var t=co(r);function r(e,n){var i,s=e.code,a=e.message,u=e.data;return(0,o.Z)(this,r),i=t.call(this,null!=n?"".concat(n,": ").concat(a):a),i.code=void 0,i.data=void 0,i.code=s,i.data=u,i.name="SolanaJSONRPCError",i}return(0,s.Z)(r)}(zr(Error)),po=globalThis.fetch;function yo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function go(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?yo(Object(r),!0).forEach((function(t){(0,Dt.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function bo(e){var t=mo();return function(){var r,n=(0,Bt.Z)(e);if(t){var i=(0,Bt.Z)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,It.Z)(this,r)}}function mo(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var wo=function(e){(0,Et.Z)(r,e);var t=bo(r);function r(e,n,i){var s;(0,o.Z)(this,r);var a=function(e){var t=(0,Kr.Z)(e,go({autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3},n));return s.underlyingSocket="socket"in t?t.socket:t,t};return s=t.call(this,a,e,n,i),s.underlyingSocket=void 0,s}return(0,s.Z)(r,[{key:"call",value:function(){for(var e,t,n=null===(e=this.underlyingSocket)||void 0===e?void 0:e.readyState,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return 1===n?(t=qr((0,Bt.Z)(r.prototype),"call",this)).call.apply(t,[this].concat(o)):Promise.reject(new Error("Tried to call a JSON-RPC method `"+o[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+n+")"))}},{key:"notify",value:function(){for(var e,t,n=null===(e=this.underlyingSocket)||void 0===e?void 0:e.readyState,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return 1===n?(t=qr((0,Bt.Z)(r.prototype),"notify",this)).call.apply(t,[this].concat(o)):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+o[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+n+")"))}}]),r}(jr.Z);function vo(e,t){var r;try{r=e.layout.decode(t)}catch(n){throw new Error("invalid instruction; "+n)}if(r.typeIndex!==e.index)throw new Error("invalid account data; account type mismatch ".concat(r.typeIndex," != ").concat(e.index));return r}var ko,xo=56,So=function(){function e(t){(0,o.Z)(this,e),this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}return(0,s.Z)(e,[{key:"isActive",value:function(){var e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}}],[{key:"deserialize",value:function(e){var t=vo(Eo,e),r=e.length-xo;li(r>=0,"lookup table is invalid"),li(r%32===0,"lookup table is invalid");var n=r/32,i=Kt.n_([Kt.A9(ri(),n,"addresses")]).decode(e.slice(xo)),o=i.addresses;return{deactivationSlot:t.deactivationSlot,lastExtendedSlot:t.lastExtendedSlot,lastExtendedSlotStartIndex:t.lastExtendedStartIndex,authority:0!==t.authority.length?new Mn(t.authority[0]):void 0,addresses:o.map((function(e){return new Mn(e)}))}}}]),e}(),Eo={index:1,layout:Kt.n_([Kt.Jq("typeIndex"),Vi("deactivationSlot"),Kt._O("lastExtendedSlot"),Kt.u8("lastExtendedStartIndex"),Kt.u8(),Kt.A9(ri(),Kt.cv(Kt.u8(),-1),"authority")])},Io=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function Bo(e){var t=e.match(Io);if(null==t)throw TypeError("Failed to validate endpoint URL `".concat(e,"`"));var r=(0,Ft.Z)(t,4);r[0];var n=r[1],i=r[2],o=r[3],s=e.startsWith("https:")?"wss:":"ws:",a=null==i?null:parseInt(i.slice(1),10),u=null==a?"":":".concat(a+1);return"".concat(s,"//").concat(n).concat(u).concat(o)}var Ao=["commitment"],_o=["encoding"],Oo=["commitment"],Po=["commitment"];function To(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ro(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?To(Object(r),!0).forEach((function(t){(0,Dt.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):To(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Lo=Pr(mr(Mn),Ir(),(function(e){return new Mn(e)})),Uo=Br([Ir(),wr("base64")]),Co=Pr(mr(a.lW),Uo,(function(e){return a.lW.from(e[0],"base64")})),Wo=3e4;function zo(e){if(!1===/^https?:/.test(e))throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return e}function No(e){var t,r;if("string"===typeof e)t=e;else if(e){var n=e.commitment,i=Qt(e,Ao);t=n,r=i}return{commitment:t,config:r}}function qo(e){return _r([Ar({jsonrpc:wr("2.0"),id:Ir(),result:e}),Ar({jsonrpc:wr("2.0"),id:Ir(),error:Ar({code:Or(),message:Ir(),data:Sr(yr())})})])}var jo=qo(Or());function Ko(e){return Pr(qo(e),jo,(function(t){return"error"in t?t:Ro(Ro({},t),{},{result:fr(t.result,e)})}))}function Fo(e){return Ko(Ar({context:Ar({slot:xr()}),value:e}))}function Mo(e){return Ar({context:Ar({slot:xr()}),value:e})}function Do(e,t){return 0===e?new vi({header:t.header,staticAccountKeys:t.accountKeys.map((function(e){return new Mn(e)})),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map((function(e){return{programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:Rt().decode(e.data)}})),addressTableLookups:t.addressTableLookups}):new gi(t)}var Ho=Ar({foundation:xr(),foundationTerm:xr(),initial:xr(),taper:xr(),terminal:xr()}),Zo=Ko(gr(kr(Ar({epoch:xr(),effectiveSlot:xr(),amount:xr(),postBalance:xr(),commission:Sr(kr(xr()))})))),$o=gr(Ar({slot:xr(),prioritizationFee:xr()})),Vo=Ar({total:xr(),validator:xr(),foundation:xr(),epoch:xr()}),Jo=Ar({epoch:xr(),slotIndex:xr(),slotsInEpoch:xr(),absoluteSlot:xr(),blockHeight:Sr(xr()),transactionCount:Sr(xr())}),Go=Ar({slotsPerEpoch:xr(),leaderScheduleSlotOffset:xr(),warmup:br(),firstNormalEpoch:xr(),firstNormalSlot:xr()}),Yo=Er(Ir(),gr(xr())),Xo=kr(_r([Ar({}),Ir()])),Qo=Ar({err:Xo}),es=wr("receivedSignature"),ts=Ar({"solana-core":Ir(),"feature-set":Sr(xr())}),rs=Fo(Ar({err:kr(_r([Ar({}),Ir()])),logs:kr(gr(Ir())),accounts:Sr(kr(gr(kr(Ar({executable:br(),owner:Ir(),lamports:xr(),data:gr(Ir()),rentEpoch:Sr(xr())}))))),unitsConsumed:Sr(xr()),returnData:Sr(kr(Ar({programId:Ir(),data:Br([Ir(),wr("base64")])})))})),ns=Fo(Ar({byIdentity:Er(Ir(),gr(xr())),range:Ar({firstSlot:xr(),lastSlot:xr()})}));function is(e,t,r,n,i,o){var s,a,u=r||po;null!=o&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments."),n&&(a=function(){var e=St(_t().mark((function e(t,r){var i;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,i){try{n(t,r,(function(t,r){return e([t,r])}))}catch(o){i(o)}}));case 2:return i=e.sent,e.next=5,u.apply(void 0,Gt(i));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}());var c=new(Rr())(function(){var r=St(_t().mark((function r(n,o){var c,f,l,h,p;return _t().wrap((function(r){while(1)switch(r.prev=r.next){case 0:c={method:"POST",body:n,agent:s,headers:Object.assign({"Content-Type":"application/json"},t||{},Aa)},r.prev=1,f=5,h=500;case 4:if(!a){r.next=10;break}return r.next=7,a(e,c);case 7:l=r.sent,r.next=13;break;case 10:return r.next=12,u(e,c);case 12:l=r.sent;case 13:if(429===l.status){r.next=15;break}return r.abrupt("break",26);case 15:if(!0!==i){r.next=17;break}return r.abrupt("break",26);case 17:if(f-=1,0!==f){r.next=20;break}return r.abrupt("break",26);case 20:return console.log("Server responded with ".concat(l.status," ").concat(l.statusText,".  Retrying after ").concat(h,"ms delay...")),r.next=23,ji(h);case 23:h*=2;case 24:r.next=4;break;case 26:return r.next=28,l.text();case 28:p=r.sent,l.ok?o(null,p):o(new Error("".concat(l.status," ").concat(l.statusText,": ").concat(p))),r.next=35;break;case 32:r.prev=32,r.t0=r["catch"](1),r.t0 instanceof Error&&o(r.t0);case 35:case"end":return r.stop()}}),r,null,[[1,32]])})));return function(e,t){return r.apply(this,arguments)}}(),{});return c}function os(e){return function(t,r){return new Promise((function(n,i){e.request(t,r,(function(e,t){e?i(e):n(t)}))}))}}function ss(e){return function(t){return new Promise((function(r,n){0===t.length&&r([]);var i=t.map((function(t){return e.request(t.methodName,t.args)}));e.request(i,(function(e,t){e?n(e):r(t)}))}))}}var as=Ko(Ho),us=Ko(Vo),cs=Ko($o),fs=Ko(Jo),ls=Ko(Go),hs=Ko(Yo),ps=Ko(xr()),ds=Fo(Ar({total:xr(),circulating:xr(),nonCirculating:xr(),nonCirculatingAccounts:gr(Lo)})),ys=Ar({amount:Ir(),uiAmount:kr(xr()),decimals:xr(),uiAmountString:Sr(Ir())}),gs=Fo(gr(Ar({address:Lo,amount:Ir(),uiAmount:kr(xr()),decimals:xr(),uiAmountString:Sr(Ir())}))),bs=Fo(gr(Ar({pubkey:Lo,account:Ar({executable:br(),owner:Lo,lamports:xr(),data:Co,rentEpoch:xr()})}))),ms=Ar({program:Ir(),parsed:Or(),space:xr()}),ws=Fo(gr(Ar({pubkey:Lo,account:Ar({executable:br(),owner:Lo,lamports:xr(),data:ms,rentEpoch:xr()})}))),vs=Fo(gr(Ar({lamports:xr(),address:Lo}))),ks=Ar({executable:br(),owner:Lo,lamports:xr(),data:Co,rentEpoch:xr()}),xs=Ar({pubkey:Lo,account:ks}),Ss=Pr(_r([mr(a.lW),ms]),_r([Uo,ms]),(function(e){return Array.isArray(e)?fr(e,Co):e})),Es=Ar({executable:br(),owner:Lo,lamports:xr(),data:Ss,rentEpoch:xr()}),Is=Ar({pubkey:Lo,account:Es}),Bs=Ar({state:_r([wr("active"),wr("inactive"),wr("activating"),wr("deactivating")]),active:xr(),inactive:xr()}),As=Ko(gr(Ar({signature:Ir(),slot:xr(),err:Xo,memo:kr(Ir()),blockTime:Sr(kr(xr()))}))),_s=Ko(gr(Ar({signature:Ir(),slot:xr(),err:Xo,memo:kr(Ir()),blockTime:Sr(kr(xr()))}))),Os=Ar({subscription:xr(),result:Mo(ks)}),Ps=Ar({pubkey:Lo,account:ks}),Ts=Ar({subscription:xr(),result:Mo(Ps)}),Rs=Ar({parent:xr(),slot:xr(),root:xr()}),Ls=Ar({subscription:xr(),result:Rs}),Us=_r([Ar({type:_r([wr("firstShredReceived"),wr("completed"),wr("optimisticConfirmation"),wr("root")]),slot:xr(),timestamp:xr()}),Ar({type:wr("createdBank"),parent:xr(),slot:xr(),timestamp:xr()}),Ar({type:wr("frozen"),slot:xr(),timestamp:xr(),stats:Ar({numTransactionEntries:xr(),numSuccessfulTransactions:xr(),numFailedTransactions:xr(),maxTransactionsPerEntry:xr()})}),Ar({type:wr("dead"),slot:xr(),timestamp:xr(),err:Ir()})]),Cs=Ar({subscription:xr(),result:Us}),Ws=Ar({subscription:xr(),result:Mo(_r([Qo,es]))}),zs=Ar({subscription:xr(),result:xr()}),Ns=Ar({pubkey:Ir(),gossip:kr(Ir()),tpu:kr(Ir()),rpc:kr(Ir()),version:kr(Ir())}),qs=Ar({votePubkey:Ir(),nodePubkey:Ir(),activatedStake:xr(),epochVoteAccount:br(),epochCredits:gr(Br([xr(),xr(),xr()])),commission:xr(),lastVote:xr(),rootSlot:kr(xr())}),js=Ko(Ar({current:gr(qs),delinquent:gr(qs)})),Ks=_r([wr("processed"),wr("confirmed"),wr("finalized")]),Fs=Ar({slot:xr(),confirmations:kr(xr()),err:Xo,confirmationStatus:Sr(Ks)}),Ms=Fo(gr(kr(Fs))),Ds=Ko(xr()),Hs=Ar({accountKey:Lo,writableIndexes:gr(xr()),readonlyIndexes:gr(xr())}),Zs=Ar({signatures:gr(Ir()),message:Ar({accountKeys:gr(Ir()),header:Ar({numRequiredSignatures:xr(),numReadonlySignedAccounts:xr(),numReadonlyUnsignedAccounts:xr()}),instructions:gr(Ar({accounts:gr(xr()),data:Ir(),programIdIndex:xr()})),recentBlockhash:Ir(),addressTableLookups:Sr(gr(Hs))})}),$s=Ar({pubkey:Lo,signer:br(),writable:br(),source:Sr(_r([wr("transaction"),wr("lookupTable")]))}),Vs=Ar({accountKeys:gr($s),signatures:gr(Ir())}),Js=Ar({parsed:Or(),program:Ir(),programId:Lo}),Gs=Ar({accounts:gr(Lo),data:Ir(),programId:Lo}),Ys=_r([Gs,Js]),Xs=_r([Ar({parsed:Or(),program:Ir(),programId:Ir()}),Ar({accounts:gr(Ir()),data:Ir(),programId:Ir()})]),Qs=Pr(Ys,Xs,(function(e){return fr(e,"accounts"in e?Gs:Js)})),ea=Ar({signatures:gr(Ir()),message:Ar({accountKeys:gr($s),instructions:gr(Qs),recentBlockhash:Ir(),addressTableLookups:Sr(kr(gr(Hs)))})}),ta=Ar({accountIndex:xr(),mint:Ir(),owner:Sr(Ir()),uiTokenAmount:ys}),ra=Ar({writable:gr(Lo),readonly:gr(Lo)}),na=Ar({err:Xo,fee:xr(),innerInstructions:Sr(kr(gr(Ar({index:xr(),instructions:gr(Ar({accounts:gr(xr()),data:Ir(),programIdIndex:xr()}))})))),preBalances:gr(xr()),postBalances:gr(xr()),logMessages:Sr(kr(gr(Ir()))),preTokenBalances:Sr(kr(gr(ta))),postTokenBalances:Sr(kr(gr(ta))),loadedAddresses:Sr(ra),computeUnitsConsumed:Sr(xr())}),ia=Ar({err:Xo,fee:xr(),innerInstructions:Sr(kr(gr(Ar({index:xr(),instructions:gr(Qs)})))),preBalances:gr(xr()),postBalances:gr(xr()),logMessages:Sr(kr(gr(Ir()))),preTokenBalances:Sr(kr(gr(ta))),postTokenBalances:Sr(kr(gr(ta))),loadedAddresses:Sr(ra),computeUnitsConsumed:Sr(xr())}),oa=_r([wr(0),wr("legacy")]),sa=Ar({pubkey:Ir(),lamports:xr(),postBalance:kr(xr()),rewardType:kr(Ir()),commission:Sr(kr(xr()))}),aa=Ko(kr(Ar({blockhash:Ir(),previousBlockhash:Ir(),parentSlot:xr(),transactions:gr(Ar({transaction:Zs,meta:kr(na),version:Sr(oa)})),rewards:Sr(gr(sa)),blockTime:kr(xr()),blockHeight:kr(xr())}))),ua=Ko(kr(Ar({blockhash:Ir(),previousBlockhash:Ir(),parentSlot:xr(),rewards:Sr(gr(sa)),blockTime:kr(xr()),blockHeight:kr(xr())}))),ca=Ko(kr(Ar({blockhash:Ir(),previousBlockhash:Ir(),parentSlot:xr(),transactions:gr(Ar({transaction:Vs,meta:kr(na),version:Sr(oa)})),rewards:Sr(gr(sa)),blockTime:kr(xr()),blockHeight:kr(xr())}))),fa=Ko(kr(Ar({blockhash:Ir(),previousBlockhash:Ir(),parentSlot:xr(),transactions:gr(Ar({transaction:ea,meta:kr(ia),version:Sr(oa)})),rewards:Sr(gr(sa)),blockTime:kr(xr()),blockHeight:kr(xr())}))),la=Ko(kr(Ar({blockhash:Ir(),previousBlockhash:Ir(),parentSlot:xr(),transactions:gr(Ar({transaction:Vs,meta:kr(ia),version:Sr(oa)})),rewards:Sr(gr(sa)),blockTime:kr(xr()),blockHeight:kr(xr())}))),ha=Ko(kr(Ar({blockhash:Ir(),previousBlockhash:Ir(),parentSlot:xr(),rewards:Sr(gr(sa)),blockTime:kr(xr()),blockHeight:kr(xr())}))),pa=Ko(kr(Ar({blockhash:Ir(),previousBlockhash:Ir(),parentSlot:xr(),transactions:gr(Ar({transaction:Zs,meta:kr(na)})),rewards:Sr(gr(sa)),blockTime:kr(xr())}))),da=Ko(kr(Ar({blockhash:Ir(),previousBlockhash:Ir(),parentSlot:xr(),signatures:gr(Ir()),blockTime:kr(xr())}))),ya=Ko(kr(Ar({slot:xr(),meta:na,blockTime:Sr(kr(xr())),transaction:Zs,version:Sr(oa)}))),ga=Ko(kr(Ar({slot:xr(),transaction:ea,meta:kr(ia),blockTime:Sr(kr(xr())),version:Sr(oa)}))),ba=Fo(Ar({blockhash:Ir(),feeCalculator:Ar({lamportsPerSignature:xr()})})),ma=Fo(Ar({blockhash:Ir(),lastValidBlockHeight:xr()})),wa=Fo(br()),va=Ar({slot:xr(),numTransactions:xr(),numSlots:xr(),samplePeriodSecs:xr()}),ka=Ko(gr(va)),xa=Fo(kr(Ar({feeCalculator:Ar({lamportsPerSignature:xr()})}))),Sa=Ko(Ir()),Ea=Ko(Ir()),Ia=Ar({err:Xo,logs:gr(Ir()),signature:Ir()}),Ba=Ar({result:Mo(Ia),subscription:xr()}),Aa={"solana-client":"js/".concat(null!==(ko="0.0.0-development")&&void 0!==ko?ko:"UNKNOWN")},_a=function(){function e(t,r){var n,i,s,a,u,c,f=this;(0,o.Z)(this,e),this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=function(){var e={};return function(){var t=St(_t().mark((function t(r){var n,i,o,s,a,u;return _t().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=No(r),o=i.commitment,s=i.config,a=f._buildArgs([],o,void 0,s),u=io(a),e[u]=null!==(n=e[u])&&void 0!==n?n:St(_t().mark((function t(){var r,n;return _t().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f._rpcRequest("getBlockHeight",a);case 3:if(r=t.sent,n=fr(r,Ko(xr())),!("error"in n)){t.next=7;break}throw new ho(n.error,"failed to get block height information");case 7:return t.abrupt("return",n.result);case 8:return t.prev=8,delete e[u],t.finish(8);case 11:case"end":return t.stop()}}),t,null,[[0,,8,11]])})))(),t.next=6,e[u];case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(),r&&"string"===typeof r?this._commitment=r:r&&(this._commitment=r.commitment,this._confirmTransactionInitialTimeout=r.confirmTransactionInitialTimeout,n=r.wsEndpoint,i=r.httpHeaders,s=r.fetch,a=r.fetchMiddleware,u=r.disableRetryOnRateLimit,c=r.httpAgent),this._rpcEndpoint=zo(t),this._rpcWsEndpoint=n||Bo(t),this._rpcClient=is(t,i,s,a,u,c),this._rpcRequest=os(this._rpcClient),this._rpcBatchRequest=ss(this._rpcClient),this._rpcWebSocket=new wo(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}return(0,s.Z)(e,[{key:"commitment",get:function(){return this._commitment}},{key:"rpcEndpoint",get:function(){return this._rpcEndpoint}},{key:"getBalanceAndContext",value:function(){var e=St(_t().mark((function e(t,r){var n,i,o,s,a,u;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=No(r),i=n.commitment,o=n.config,s=this._buildArgs([t.toBase58()],i,void 0,o),e.next=4,this._rpcRequest("getBalance",s);case 4:if(a=e.sent,u=fr(a,Fo(xr())),!("error"in u)){e.next=8;break}throw new ho(u.error,"failed to get balance for ".concat(t.toBase58()));case 8:return e.abrupt("return",u.result);case 9:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"getBalance",value:function(){var e=St(_t().mark((function e(t,r){return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getBalanceAndContext(t,r).then((function(e){return e.value}))["catch"]((function(e){throw new Error("failed to get balance of account "+t.toBase58()+": "+e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"getBlockTime",value:function(){var e=St(_t().mark((function e(t){var r,n;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getBlockTime",[t]);case 2:if(r=e.sent,n=fr(r,Ko(kr(xr()))),!("error"in n)){e.next=6;break}throw new ho(n.error,"failed to get block time for slot ".concat(t));case 6:return e.abrupt("return",n.result);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getMinimumLedgerSlot",value:function(){var e=St(_t().mark((function e(){var t,r;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("minimumLedgerSlot",[]);case 2:if(t=e.sent,r=fr(t,Ko(xr())),!("error"in r)){e.next=6;break}throw new ho(r.error,"failed to get minimum ledger slot");case 6:return e.abrupt("return",r.result);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getFirstAvailableBlock",value:function(){var e=St(_t().mark((function e(){var t,r;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getFirstAvailableBlock",[]);case 2:if(t=e.sent,r=fr(t,ps),!("error"in r)){e.next=6;break}throw new ho(r.error,"failed to get first available block");case 6:return e.abrupt("return",r.result);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getSupply",value:function(){var e=St(_t().mark((function e(t){var r,n,i;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={},r="string"===typeof t?{commitment:t}:t?Ro(Ro({},t),{},{commitment:t&&t.commitment||this.commitment}):{commitment:this.commitment},e.next=4,this._rpcRequest("getSupply",[r]);case 4:if(n=e.sent,i=fr(n,ds),!("error"in i)){e.next=8;break}throw new ho(i.error,"failed to get supply");case 8:return e.abrupt("return",i.result);case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getTokenSupply",value:function(){var e=St(_t().mark((function e(t,r){var n,i,o;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this._buildArgs([t.toBase58()],r),e.next=3,this._rpcRequest("getTokenSupply",n);case 3:if(i=e.sent,o=fr(i,Fo(ys)),!("error"in o)){e.next=7;break}throw new ho(o.error,"failed to get token supply");case 7:return e.abrupt("return",o.result);case 8:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"getTokenAccountBalance",value:function(){var e=St(_t().mark((function e(t,r){var n,i,o;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this._buildArgs([t.toBase58()],r),e.next=3,this._rpcRequest("getTokenAccountBalance",n);case 3:if(i=e.sent,o=fr(i,Fo(ys)),!("error"in o)){e.next=7;break}throw new ho(o.error,"failed to get token account balance");case 7:return e.abrupt("return",o.result);case 8:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"getTokenAccountsByOwner",value:function(){var e=St(_t().mark((function e(t,r,n){var i,o,s,a,u,c,f;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=No(n),o=i.commitment,s=i.config,a=[t.toBase58()],"mint"in r?a.push({mint:r.mint.toBase58()}):a.push({programId:r.programId.toBase58()}),u=this._buildArgs(a,o,"base64",s),e.next=6,this._rpcRequest("getTokenAccountsByOwner",u);case 6:if(c=e.sent,f=fr(c,bs),!("error"in f)){e.next=10;break}throw new ho(f.error,"failed to get token accounts owned by account ".concat(t.toBase58()));case 10:return e.abrupt("return",f.result);case 11:case"end":return e.stop()}}),e,this)})));function t(t,r,n){return e.apply(this,arguments)}return t}()},{key:"getParsedTokenAccountsByOwner",value:function(){var e=St(_t().mark((function e(t,r,n){var i,o,s,a;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=[t.toBase58()],"mint"in r?i.push({mint:r.mint.toBase58()}):i.push({programId:r.programId.toBase58()}),o=this._buildArgs(i,n,"jsonParsed"),e.next=5,this._rpcRequest("getTokenAccountsByOwner",o);case 5:if(s=e.sent,a=fr(s,ws),!("error"in a)){e.next=9;break}throw new ho(a.error,"failed to get token accounts owned by account ".concat(t.toBase58()));case 9:return e.abrupt("return",a.result);case 10:case"end":return e.stop()}}),e,this)})));function t(t,r,n){return e.apply(this,arguments)}return t}()},{key:"getLargestAccounts",value:function(){var e=St(_t().mark((function e(t){var r,n,i,o;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=Ro(Ro({},t),{},{commitment:t&&t.commitment||this.commitment}),n=r.filter||r.commitment?[r]:[],e.next=4,this._rpcRequest("getLargestAccounts",n);case 4:if(i=e.sent,o=fr(i,vs),!("error"in o)){e.next=8;break}throw new ho(o.error,"failed to get largest accounts");case 8:return e.abrupt("return",o.result);case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getTokenLargestAccounts",value:function(){var e=St(_t().mark((function e(t,r){var n,i,o;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this._buildArgs([t.toBase58()],r),e.next=3,this._rpcRequest("getTokenLargestAccounts",n);case 3:if(i=e.sent,o=fr(i,gs),!("error"in o)){e.next=7;break}throw new ho(o.error,"failed to get token largest accounts");case 7:return e.abrupt("return",o.result);case 8:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"getAccountInfoAndContext",value:function(){var e=St(_t().mark((function e(t,r){var n,i,o,s,a,u;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=No(r),i=n.commitment,o=n.config,s=this._buildArgs([t.toBase58()],i,"base64",o),e.next=4,this._rpcRequest("getAccountInfo",s);case 4:if(a=e.sent,u=fr(a,Fo(kr(ks))),!("error"in u)){e.next=8;break}throw new ho(u.error,"failed to get info about account ".concat(t.toBase58()));case 8:return e.abrupt("return",u.result);case 9:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"getParsedAccountInfo",value:function(){var e=St(_t().mark((function e(t,r){var n,i,o,s,a,u;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=No(r),i=n.commitment,o=n.config,s=this._buildArgs([t.toBase58()],i,"jsonParsed",o),e.next=4,this._rpcRequest("getAccountInfo",s);case 4:if(a=e.sent,u=fr(a,Fo(kr(Es))),!("error"in u)){e.next=8;break}throw new ho(u.error,"failed to get info about account ".concat(t.toBase58()));case 8:return e.abrupt("return",u.result);case 9:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"getAccountInfo",value:function(){var e=St(_t().mark((function e(t,r){var n;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getAccountInfoAndContext(t,r);case 3:return n=e.sent,e.abrupt("return",n.value);case 7:throw e.prev=7,e.t0=e["catch"](0),new Error("failed to get info about account "+t.toBase58()+": "+e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"getMultipleParsedAccounts",value:function(){var e=St(_t().mark((function e(t,r){var n,i,o,s,a,u,c;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=No(r),i=n.commitment,o=n.config,s=t.map((function(e){return e.toBase58()})),a=this._buildArgs([s],i,"jsonParsed",o),e.next=5,this._rpcRequest("getMultipleAccounts",a);case 5:if(u=e.sent,c=fr(u,Fo(gr(kr(Es)))),!("error"in c)){e.next=9;break}throw new ho(c.error,"failed to get info for accounts ".concat(s));case 9:return e.abrupt("return",c.result);case 10:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"getMultipleAccountsInfoAndContext",value:function(){var e=St(_t().mark((function e(t,r){var n,i,o,s,a,u,c;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=No(r),i=n.commitment,o=n.config,s=t.map((function(e){return e.toBase58()})),a=this._buildArgs([s],i,"base64",o),e.next=5,this._rpcRequest("getMultipleAccounts",a);case 5:if(u=e.sent,c=fr(u,Fo(gr(kr(ks)))),!("error"in c)){e.next=9;break}throw new ho(c.error,"failed to get info for accounts ".concat(s));case 9:return e.abrupt("return",c.result);case 10:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"getMultipleAccountsInfo",value:function(){var e=St(_t().mark((function e(t,r){var n;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getMultipleAccountsInfoAndContext(t,r);case 2:return n=e.sent,e.abrupt("return",n.value);case 4:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"getStakeActivation",value:function(){var e=St(_t().mark((function e(t,r,n){var i,o,s,a,u,c;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=No(r),o=i.commitment,s=i.config,a=this._buildArgs([t.toBase58()],o,void 0,Ro(Ro({},s),{},{epoch:null!=n?n:null===s||void 0===s?void 0:s.epoch})),e.next=4,this._rpcRequest("getStakeActivation",a);case 4:if(u=e.sent,c=fr(u,Ko(Bs)),!("error"in c)){e.next=8;break}throw new ho(c.error,"failed to get Stake Activation ".concat(t.toBase58()));case 8:return e.abrupt("return",c.result);case 9:case"end":return e.stop()}}),e,this)})));function t(t,r,n){return e.apply(this,arguments)}return t}()},{key:"getProgramAccounts",value:function(){var e=St(_t().mark((function e(t,r){var n,i,o,s,a,u,c,f,l,h;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=No(r),i=n.commitment,o=n.config,s=o||{},a=s.encoding,u=Qt(s,_o),c=this._buildArgs([t.toBase58()],i,a||"base64",u),e.next=5,this._rpcRequest("getProgramAccounts",c);case 5:if(f=e.sent,l=gr(xs),h=!0===u.withContext?fr(f,Fo(l)):fr(f,Ko(l)),!("error"in h)){e.next=10;break}throw new ho(h.error,"failed to get accounts owned by program ".concat(t.toBase58()));case 10:return e.abrupt("return",h.result);case 11:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"getParsedProgramAccounts",value:function(){var e=St(_t().mark((function e(t,r){var n,i,o,s,a,u;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=No(r),i=n.commitment,o=n.config,s=this._buildArgs([t.toBase58()],i,"jsonParsed",o),e.next=4,this._rpcRequest("getProgramAccounts",s);case 4:if(a=e.sent,u=fr(a,Ko(gr(Is))),!("error"in u)){e.next=8;break}throw new ho(u.error,"failed to get accounts owned by program ".concat(t.toBase58()));case 8:return e.abrupt("return",u.result);case 9:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"confirmTransaction",value:function(){var e=St(_t().mark((function e(t,r){var n,i,o,s;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("string"!=typeof t){e.next=4;break}n=t,e.next=8;break;case 4:if(o=t,null===(i=o.abortSignal)||void 0===i||!i.aborted){e.next=7;break}return e.abrupt("return",Promise.reject(o.abortSignal.reason));case 7:n=o.signature;case 8:e.prev=8,s=Rt().decode(n),e.next=15;break;case 12:throw e.prev=12,e.t0=e["catch"](8),new Error("signature must be base58 encoded: "+n);case 15:if(li(64===s.length,"signature has invalid length"),"string"!==typeof t){e.next=22;break}return e.next=19,this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:r||this.commitment,signature:n});case 19:return e.abrupt("return",e.sent);case 22:if(!("lastValidBlockHeight"in t)){e.next=28;break}return e.next=25,this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:r||this.commitment,strategy:t});case 25:return e.abrupt("return",e.sent);case 28:return e.next=30,this.confirmTransactionUsingDurableNonceStrategy({commitment:r||this.commitment,strategy:t});case 30:return e.abrupt("return",e.sent);case 31:case"end":return e.stop()}}),e,this,[[8,12]])})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"getCancellationPromise",value:function(e){return new Promise((function(t,r){null!=e&&(e.aborted?r(e.reason):e.addEventListener("abort",(function(){r(e.reason)})))}))}},{key:"getTransactionConfirmationPromise",value:function(e){var t,r,n=this,i=e.commitment,o=e.signature,s=!1,a=new Promise((function(e,a){try{t=n.onSignature(o,(function(r,n){t=void 0;var i={context:n,value:r};e({__type:Bi.PROCESSED,response:i})}),i);var u=new Promise((function(e){null==t?e():r=n._onSubscriptionStateChange(t,(function(t){"subscribed"===t&&e()}))}));St(_t().mark((function t(){var r,c,f;return _t().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u;case 2:if(!s){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,n.getSignatureStatus(o);case 6:if(r=t.sent,!s){t.next=9;break}return t.abrupt("return");case 9:if(null!=r){t.next=11;break}return t.abrupt("return");case 11:if(c=r.context,f=r.value,null!=f){t.next=14;break}return t.abrupt("return");case 14:if(null===f||void 0===f||!f.err){t.next=18;break}a(f.err),t.next=29;break;case 18:t.t0=i,t.next="confirmed"===t.t0||"single"===t.t0||"singleGossip"===t.t0?21:"finalized"===t.t0||"max"===t.t0||"root"===t.t0?24:("processed"===t.t0||t.t0,27);break;case 21:if("processed"!==f.confirmationStatus){t.next=23;break}return t.abrupt("return");case 23:return t.abrupt("break",27);case 24:if("processed"!==f.confirmationStatus&&"confirmed"!==f.confirmationStatus){t.next=26;break}return t.abrupt("return");case 26:return t.abrupt("break",27);case 27:s=!0,e({__type:Bi.PROCESSED,response:{context:c,value:f}});case 29:case"end":return t.stop()}}),t)})))()}catch(c){a(c)}})),u=function(){r&&(r(),r=void 0),null!=t&&(n.removeSignatureListener(t),t=void 0)};return{abortConfirmation:u,confirmationPromise:a}}},{key:"confirmTransactionUsingBlockHeightExceedanceStrategy",value:function(){var e=St(_t().mark((function e(t){var r,n,i,o,s,a,u,c,f,l,h,p,d,y=this;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commitment,n=t.strategy,i=n.abortSignal,o=n.lastValidBlockHeight,s=n.signature,a=!1,u=new Promise((function(e){var t=function(){var e=St(_t().mark((function e(){var t;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.getBlockHeight(r);case 3:return t=e.sent,e.abrupt("return",t);case 7:return e.prev=7,e.t0=e["catch"](0),e.abrupt("return",-1);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();St(_t().mark((function r(){var n;return _t().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t();case 2:if(n=r.sent,!a){r.next=5;break}return r.abrupt("return");case 5:if(!(n<=o)){r.next=17;break}return r.next=8,ji(1e3);case 8:if(!a){r.next=10;break}return r.abrupt("return");case 10:return r.next=12,t();case 12:if(n=r.sent,!a){r.next=15;break}return r.abrupt("return");case 15:r.next=5;break;case 17:e({__type:Bi.BLOCKHEIGHT_EXCEEDED});case 18:case"end":return r.stop()}}),r)})))()})),c=this.getTransactionConfirmationPromise({commitment:r,signature:s}),f=c.abortConfirmation,l=c.confirmationPromise,h=this.getCancellationPromise(i),e.prev=5,e.next=8,Promise.race([h,l,u]);case 8:if(d=e.sent,d.__type!==Bi.PROCESSED){e.next=13;break}p=d.response,e.next=14;break;case 13:throw new Jn(s);case 14:return e.prev=14,a=!0,f(),e.finish(14);case 18:return e.abrupt("return",p);case 19:case"end":return e.stop()}}),e,this,[[5,,14,18]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"confirmTransactionUsingDurableNonceStrategy",value:function(){var e=St(_t().mark((function e(t){var r,n,i,o,s,a,u,c,f,l,h,p,d,y,g,b,m,w,v,k,x,S=this;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commitment,n=t.strategy,i=n.abortSignal,o=n.minContextSlot,s=n.nonceAccountPubkey,a=n.nonceValue,u=n.signature,c=!1,f=new Promise((function(e){var t=a,n=null,i=function(){var e=St(_t().mark((function e(){var i,a,u;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.getNonceAndContext(s,{commitment:r,minContextSlot:o});case 3:return i=e.sent,a=i.context,u=i.value,n=a.slot,e.abrupt("return",null===u||void 0===u?void 0:u.nonce);case 10:return e.prev=10,e.t0=e["catch"](0),e.abrupt("return",t);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();St(_t().mark((function r(){return _t().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,i();case 2:if(t=r.sent,!c){r.next=5;break}return r.abrupt("return");case 5:if(a===t){r.next=9;break}return e({__type:Bi.NONCE_INVALID,slotInWhichNonceDidAdvance:n}),r.abrupt("return");case 9:return r.next=11,ji(2e3);case 11:if(!c){r.next=13;break}return r.abrupt("return");case 13:return r.next=15,i();case 15:if(t=r.sent,!c){r.next=18;break}return r.abrupt("return");case 18:r.next=5;break;case 20:case"end":return r.stop()}}),r)})))()})),l=this.getTransactionConfirmationPromise({commitment:r,signature:u}),h=l.abortConfirmation,p=l.confirmationPromise,d=this.getCancellationPromise(i),e.prev=5,e.next=8,Promise.race([d,p,f]);case 8:if(g=e.sent,g.__type!==Bi.PROCESSED){e.next=13;break}y=g.response,e.next=47;break;case 13:return e.next=16,this.getSignatureStatus(u);case 16:if(v=e.sent,null!=v){e.next=19;break}return e.abrupt("break",27);case 19:if(!(v.context.slot<(null!==(w=g.slotInWhichNonceDidAdvance)&&void 0!==w?w:o))){e.next=23;break}return e.next=22,ji(400);case 22:return e.abrupt("continue",13);case 23:return m=v,e.abrupt("break",27);case 27:if(null===(b=m)||void 0===b||!b.value){e.next=46;break}k=r||"finalized",x=m.value.confirmationStatus,e.t0=k,e.next="processed"===e.t0||"recent"===e.t0?33:"confirmed"===e.t0||"single"===e.t0||"singleGossip"===e.t0?36:"finalized"===e.t0||"max"===e.t0||"root"===e.t0?39:42;break;case 33:if("processed"===x||"confirmed"===x||"finalized"===x){e.next=35;break}throw new Yn(u);case 35:return e.abrupt("break",43);case 36:if("confirmed"===x||"finalized"===x){e.next=38;break}throw new Yn(u);case 38:return e.abrupt("break",43);case 39:if("finalized"===x){e.next=41;break}throw new Yn(u);case 41:return e.abrupt("break",43);case 42:case 43:y={context:m.context,value:{err:m.value.err}},e.next=47;break;case 46:throw new Yn(u);case 47:return e.prev=47,c=!0,h(),e.finish(47);case 51:return e.abrupt("return",y);case 52:case"end":return e.stop()}}),e,this,[[5,,47,51]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"confirmTransactionUsingLegacyTimeoutStrategy",value:function(){var e=St(_t().mark((function e(t){var r,n,i,o,s,a,u,c,f,l=this;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commitment,n=t.signature,o=new Promise((function(e){var t=l._confirmTransactionInitialTimeout||6e4;switch(r){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":t=l._confirmTransactionInitialTimeout||3e4;break}i=setTimeout((function(){return e({__type:Bi.TIMED_OUT,timeoutMs:t})}),t)})),s=this.getTransactionConfirmationPromise({commitment:r,signature:n}),a=s.abortConfirmation,u=s.confirmationPromise,e.prev=3,e.next=6,Promise.race([u,o]);case 6:if(f=e.sent,f.__type!==Bi.PROCESSED){e.next=11;break}c=f.response,e.next=12;break;case 11:throw new Gn(n,f.timeoutMs/1e3);case 12:return e.prev=12,clearTimeout(i),a(),e.finish(12);case 16:return e.abrupt("return",c);case 17:case"end":return e.stop()}}),e,this,[[3,,12,16]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getClusterNodes",value:function(){var e=St(_t().mark((function e(){var t,r;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getClusterNodes",[]);case 2:if(t=e.sent,r=fr(t,Ko(gr(Ns))),!("error"in r)){e.next=6;break}throw new ho(r.error,"failed to get cluster nodes");case 6:return e.abrupt("return",r.result);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getVoteAccounts",value:function(){var e=St(_t().mark((function e(t){var r,n,i;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=this._buildArgs([],t),e.next=3,this._rpcRequest("getVoteAccounts",r);case 3:if(n=e.sent,i=fr(n,js),!("error"in i)){e.next=7;break}throw new ho(i.error,"failed to get vote accounts");case 7:return e.abrupt("return",i.result);case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getSlot",value:function(){var e=St(_t().mark((function e(t){var r,n,i,o,s,a;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=No(t),n=r.commitment,i=r.config,o=this._buildArgs([],n,void 0,i),e.next=4,this._rpcRequest("getSlot",o);case 4:if(s=e.sent,a=fr(s,Ko(xr())),!("error"in a)){e.next=8;break}throw new ho(a.error,"failed to get slot");case 8:return e.abrupt("return",a.result);case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getSlotLeader",value:function(){var e=St(_t().mark((function e(t){var r,n,i,o,s,a;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=No(t),n=r.commitment,i=r.config,o=this._buildArgs([],n,void 0,i),e.next=4,this._rpcRequest("getSlotLeader",o);case 4:if(s=e.sent,a=fr(s,Ko(Ir())),!("error"in a)){e.next=8;break}throw new ho(a.error,"failed to get slot leader");case 8:return e.abrupt("return",a.result);case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getSlotLeaders",value:function(){var e=St(_t().mark((function e(t,r){var n,i,o;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=[t,r],e.next=3,this._rpcRequest("getSlotLeaders",n);case 3:if(i=e.sent,o=fr(i,Ko(gr(Lo))),!("error"in o)){e.next=7;break}throw new ho(o.error,"failed to get slot leaders");case 7:return e.abrupt("return",o.result);case 8:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"getSignatureStatus",value:function(){var e=St(_t().mark((function e(t,r){var n,i,o,s;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getSignatureStatuses([t],r);case 2:return n=e.sent,i=n.context,o=n.value,li(1===o.length),s=o[0],e.abrupt("return",{context:i,value:s});case 8:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"getSignatureStatuses",value:function(){var e=St(_t().mark((function e(t,r){var n,i,o;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=[t],r&&n.push(r),e.next=4,this._rpcRequest("getSignatureStatuses",n);case 4:if(i=e.sent,o=fr(i,Ms),!("error"in o)){e.next=8;break}throw new ho(o.error,"failed to get signature status");case 8:return e.abrupt("return",o.result);case 9:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"getTransactionCount",value:function(){var e=St(_t().mark((function e(t){var r,n,i,o,s,a;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=No(t),n=r.commitment,i=r.config,o=this._buildArgs([],n,void 0,i),e.next=4,this._rpcRequest("getTransactionCount",o);case 4:if(s=e.sent,a=fr(s,Ko(xr())),!("error"in a)){e.next=8;break}throw new ho(a.error,"failed to get transaction count");case 8:return e.abrupt("return",a.result);case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getTotalSupply",value:function(){var e=St(_t().mark((function e(t){var r;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0});case 2:return r=e.sent,e.abrupt("return",r.value.total);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getInflationGovernor",value:function(){var e=St(_t().mark((function e(t){var r,n,i;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=this._buildArgs([],t),e.next=3,this._rpcRequest("getInflationGovernor",r);case 3:if(n=e.sent,i=fr(n,as),!("error"in i)){e.next=7;break}throw new ho(i.error,"failed to get inflation");case 7:return e.abrupt("return",i.result);case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getInflationReward",value:function(){var e=St(_t().mark((function e(t,r,n){var i,o,s,a,u,c;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=No(n),o=i.commitment,s=i.config,a=this._buildArgs([t.map((function(e){return e.toBase58()}))],o,void 0,Ro(Ro({},s),{},{epoch:null!=r?r:null===s||void 0===s?void 0:s.epoch})),e.next=4,this._rpcRequest("getInflationReward",a);case 4:if(u=e.sent,c=fr(u,Zo),!("error"in c)){e.next=8;break}throw new ho(c.error,"failed to get inflation reward");case 8:return e.abrupt("return",c.result);case 9:case"end":return e.stop()}}),e,this)})));function t(t,r,n){return e.apply(this,arguments)}return t}()},{key:"getInflationRate",value:function(){var e=St(_t().mark((function e(){var t,r;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getInflationRate",[]);case 2:if(t=e.sent,r=fr(t,us),!("error"in r)){e.next=6;break}throw new ho(r.error,"failed to get inflation rate");case 6:return e.abrupt("return",r.result);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getEpochInfo",value:function(){var e=St(_t().mark((function e(t){var r,n,i,o,s,a;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=No(t),n=r.commitment,i=r.config,o=this._buildArgs([],n,void 0,i),e.next=4,this._rpcRequest("getEpochInfo",o);case 4:if(s=e.sent,a=fr(s,fs),!("error"in a)){e.next=8;break}throw new ho(a.error,"failed to get epoch info");case 8:return e.abrupt("return",a.result);case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getEpochSchedule",value:function(){var e=St(_t().mark((function e(){var t,r,n;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getEpochSchedule",[]);case 2:if(t=e.sent,r=fr(t,ls),!("error"in r)){e.next=6;break}throw new ho(r.error,"failed to get epoch schedule");case 6:return n=r.result,e.abrupt("return",new uo(n.slotsPerEpoch,n.leaderScheduleSlotOffset,n.warmup,n.firstNormalEpoch,n.firstNormalSlot));case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getLeaderSchedule",value:function(){var e=St(_t().mark((function e(){var t,r;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getLeaderSchedule",[]);case 2:if(t=e.sent,r=fr(t,hs),!("error"in r)){e.next=6;break}throw new ho(r.error,"failed to get leader schedule");case 6:return e.abrupt("return",r.result);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getMinimumBalanceForRentExemption",value:function(){var e=St(_t().mark((function e(t,r){var n,i,o;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this._buildArgs([t],r),e.next=3,this._rpcRequest("getMinimumBalanceForRentExemption",n);case 3:if(i=e.sent,o=fr(i,Ds),!("error"in o)){e.next=8;break}return console.warn("Unable to fetch minimum balance for rent exemption"),e.abrupt("return",0);case 8:return e.abrupt("return",o.result);case 9:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"getRecentBlockhashAndContext",value:function(){var e=St(_t().mark((function e(t){var r,n,i;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=this._buildArgs([],t),e.next=3,this._rpcRequest("getRecentBlockhash",r);case 3:if(n=e.sent,i=fr(n,ba),!("error"in i)){e.next=7;break}throw new ho(i.error,"failed to get recent blockhash");case 7:return e.abrupt("return",i.result);case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getRecentPerformanceSamples",value:function(){var e=St(_t().mark((function e(t){var r,n;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getRecentPerformanceSamples",t?[t]:[]);case 2:if(r=e.sent,n=fr(r,ka),!("error"in n)){e.next=6;break}throw new ho(n.error,"failed to get recent performance samples");case 6:return e.abrupt("return",n.result);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getFeeCalculatorForBlockhash",value:function(){var e=St(_t().mark((function e(t,r){var n,i,o,s,a,u;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this._buildArgs([t],r),e.next=3,this._rpcRequest("getFeeCalculatorForBlockhash",n);case 3:if(i=e.sent,o=fr(i,xa),!("error"in o)){e.next=7;break}throw new ho(o.error,"failed to get fee calculator");case 7:return s=o.result,a=s.context,u=s.value,e.abrupt("return",{context:a,value:null!==u?u.feeCalculator:null});case 9:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"getFeeForMessage",value:function(){var e=St(_t().mark((function e(t,r){var n,i,o,s;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=Ln(t.serialize()).toString("base64"),i=this._buildArgs([n],r),e.next=4,this._rpcRequest("getFeeForMessage",i);case 4:if(o=e.sent,s=fr(o,Fo(kr(xr()))),!("error"in s)){e.next=8;break}throw new ho(s.error,"failed to get fee for message");case 8:if(null!==s.result){e.next=10;break}throw new Error("invalid blockhash");case 10:return e.abrupt("return",s.result);case 11:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"getRecentPrioritizationFees",value:function(){var e=St(_t().mark((function e(t){var r,n,i,o,s;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=null===t||void 0===t||null===(r=t.lockedWritableAccounts)||void 0===r?void 0:r.map((function(e){return e.toBase58()})),i=null!==n&&void 0!==n&&n.length?[n]:[],e.next=4,this._rpcRequest("getRecentPrioritizationFees",i);case 4:if(o=e.sent,s=fr(o,cs),!("error"in s)){e.next=8;break}throw new ho(s.error,"failed to get recent prioritization fees");case 8:return e.abrupt("return",s.result);case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getRecentBlockhash",value:function(){var e=St(_t().mark((function e(t){var r;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getRecentBlockhashAndContext(t);case 3:return r=e.sent,e.abrupt("return",r.value);case 7:throw e.prev=7,e.t0=e["catch"](0),new Error("failed to get recent blockhash: "+e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getLatestBlockhash",value:function(){var e=St(_t().mark((function e(t){var r;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getLatestBlockhashAndContext(t);case 3:return r=e.sent,e.abrupt("return",r.value);case 7:throw e.prev=7,e.t0=e["catch"](0),new Error("failed to get recent blockhash: "+e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getLatestBlockhashAndContext",value:function(){var e=St(_t().mark((function e(t){var r,n,i,o,s,a;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=No(t),n=r.commitment,i=r.config,o=this._buildArgs([],n,void 0,i),e.next=4,this._rpcRequest("getLatestBlockhash",o);case 4:if(s=e.sent,a=fr(s,ma),!("error"in a)){e.next=8;break}throw new ho(a.error,"failed to get latest blockhash");case 8:return e.abrupt("return",a.result);case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"isBlockhashValid",value:function(){var e=St(_t().mark((function e(t,r){var n,i,o,s,a,u;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=No(r),i=n.commitment,o=n.config,s=this._buildArgs([t],i,void 0,o),e.next=4,this._rpcRequest("isBlockhashValid",s);case 4:if(a=e.sent,u=fr(a,wa),!("error"in u)){e.next=8;break}throw new ho(u.error,"failed to determine if the blockhash `"+t+"`is valid");case 8:return e.abrupt("return",u.result);case 9:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"getVersion",value:function(){var e=St(_t().mark((function e(){var t,r;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getVersion",[]);case 2:if(t=e.sent,r=fr(t,Ko(ts)),!("error"in r)){e.next=6;break}throw new ho(r.error,"failed to get version");case 6:return e.abrupt("return",r.result);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getGenesisHash",value:function(){var e=St(_t().mark((function e(){var t,r;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getGenesisHash",[]);case 2:if(t=e.sent,r=fr(t,Ko(Ir())),!("error"in r)){e.next=6;break}throw new ho(r.error,"failed to get genesis hash");case 6:return e.abrupt("return",r.result);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getBlock",value:function(){var e=St(_t().mark((function e(t,r){var n,i,o,s,a,u,c,f,l;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=No(r),i=n.commitment,o=n.config,s=this._buildArgsAtLeastConfirmed([t],i,void 0,o),e.next=4,this._rpcRequest("getBlock",s);case 4:a=e.sent,e.prev=5,e.t0=null===o||void 0===o?void 0:o.transactionDetails,e.next="accounts"===e.t0?9:"none"===e.t0?13:17;break;case 9:if(u=fr(a,ca),!("error"in u)){e.next=12;break}throw u.error;case 12:return e.abrupt("return",u.result);case 13:if(c=fr(a,ua),!("error"in c)){e.next=16;break}throw c.error;case 16:return e.abrupt("return",c.result);case 17:if(f=fr(a,aa),!("error"in f)){e.next=20;break}throw f.error;case 20:return l=f.result,e.abrupt("return",l?Ro(Ro({},l),{},{transactions:l.transactions.map((function(e){var t=e.transaction,r=e.meta,n=e.version;return{meta:r,transaction:Ro(Ro({},t),{},{message:Do(n,t.message)}),version:n}}))}):null);case 22:e.next=27;break;case 24:throw e.prev=24,e.t1=e["catch"](5),new ho(e.t1,"failed to get confirmed block");case 27:case"end":return e.stop()}}),e,this,[[5,24]])})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"getParsedBlock",value:function(){var e=St(_t().mark((function e(t,r){var n,i,o,s,a,u,c,f;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=No(r),i=n.commitment,o=n.config,s=this._buildArgsAtLeastConfirmed([t],i,"jsonParsed",o),e.next=4,this._rpcRequest("getBlock",s);case 4:a=e.sent,e.prev=5,e.t0=null===o||void 0===o?void 0:o.transactionDetails,e.next="accounts"===e.t0?9:"none"===e.t0?13:17;break;case 9:if(u=fr(a,la),!("error"in u)){e.next=12;break}throw u.error;case 12:return e.abrupt("return",u.result);case 13:if(c=fr(a,ha),!("error"in c)){e.next=16;break}throw c.error;case 16:return e.abrupt("return",c.result);case 17:if(f=fr(a,fa),!("error"in f)){e.next=20;break}throw f.error;case 20:return e.abrupt("return",f.result);case 21:e.next=26;break;case 23:throw e.prev=23,e.t1=e["catch"](5),new ho(e.t1,"failed to get block");case 26:case"end":return e.stop()}}),e,this,[[5,23]])})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"getBlockProduction",value:function(){var e=St(_t().mark((function e(t){var r,n,i,o,s,a,u;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return"string"===typeof t?n=t:t&&(i=t.commitment,o=Qt(t,Oo),n=i,r=o),s=this._buildArgs([],n,"base64",r),e.next=4,this._rpcRequest("getBlockProduction",s);case 4:if(a=e.sent,u=fr(a,ns),!("error"in u)){e.next=8;break}throw new ho(u.error,"failed to get block production information");case 8:return e.abrupt("return",u.result);case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getTransaction",value:function(){var e=St(_t().mark((function e(t,r){var n,i,o,s,a,u,c;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=No(r),i=n.commitment,o=n.config,s=this._buildArgsAtLeastConfirmed([t],i,void 0,o),e.next=4,this._rpcRequest("getTransaction",s);case 4:if(a=e.sent,u=fr(a,ya),!("error"in u)){e.next=8;break}throw new ho(u.error,"failed to get transaction");case 8:if(c=u.result,c){e.next=11;break}return e.abrupt("return",c);case 11:return e.abrupt("return",Ro(Ro({},c),{},{transaction:Ro(Ro({},c.transaction),{},{message:Do(c.version,c.transaction.message)})}));case 12:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"getParsedTransaction",value:function(){var e=St(_t().mark((function e(t,r){var n,i,o,s,a,u;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=No(r),i=n.commitment,o=n.config,s=this._buildArgsAtLeastConfirmed([t],i,"jsonParsed",o),e.next=4,this._rpcRequest("getTransaction",s);case 4:if(a=e.sent,u=fr(a,ga),!("error"in u)){e.next=8;break}throw new ho(u.error,"failed to get transaction");case 8:return e.abrupt("return",u.result);case 9:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"getParsedTransactions",value:function(){var e=St(_t().mark((function e(t,r){var n,i,o,s,a,u,c=this;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=No(r),i=n.commitment,o=n.config,s=t.map((function(e){var t=c._buildArgsAtLeastConfirmed([e],i,"jsonParsed",o);return{methodName:"getTransaction",args:t}})),e.next=4,this._rpcBatchRequest(s);case 4:return a=e.sent,u=a.map((function(e){var t=fr(e,ga);if("error"in t)throw new ho(t.error,"failed to get transactions");return t.result})),e.abrupt("return",u);case 7:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"getTransactions",value:function(){var e=St(_t().mark((function e(t,r){var n,i,o,s,a,u,c=this;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=No(r),i=n.commitment,o=n.config,s=t.map((function(e){var t=c._buildArgsAtLeastConfirmed([e],i,void 0,o);return{methodName:"getTransaction",args:t}})),e.next=4,this._rpcBatchRequest(s);case 4:return a=e.sent,u=a.map((function(e){var t=fr(e,ya);if("error"in t)throw new ho(t.error,"failed to get transactions");var r=t.result;return r?Ro(Ro({},r),{},{transaction:Ro(Ro({},r.transaction),{},{message:Do(r.version,r.transaction.message)})}):r})),e.abrupt("return",u);case 7:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"getConfirmedBlock",value:function(){var e=St(_t().mark((function e(t,r){var n,i,o,s,a;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this._buildArgsAtLeastConfirmed([t],r),e.next=3,this._rpcRequest("getConfirmedBlock",n);case 3:if(i=e.sent,o=fr(i,pa),!("error"in o)){e.next=7;break}throw new ho(o.error,"failed to get confirmed block");case 7:if(s=o.result,s){e.next=10;break}throw new Error("Confirmed block "+t+" not found");case 10:return a=Ro(Ro({},s),{},{transactions:s.transactions.map((function(e){var t=e.transaction,r=e.meta,n=new gi(t.message);return{meta:r,transaction:Ro(Ro({},t),{},{message:n})}}))}),e.abrupt("return",Ro(Ro({},a),{},{transactions:a.transactions.map((function(e){var t=e.transaction,r=e.meta;return{meta:r,transaction:Oi.populate(t.message,t.signatures)}}))}));case 12:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"getBlocks",value:function(){var e=St(_t().mark((function e(t,r,n){var i,o,s;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=this._buildArgsAtLeastConfirmed(void 0!==r?[t,r]:[t],n),e.next=3,this._rpcRequest("getBlocks",i);case 3:if(o=e.sent,s=fr(o,Ko(gr(xr()))),!("error"in s)){e.next=7;break}throw new ho(s.error,"failed to get blocks");case 7:return e.abrupt("return",s.result);case 8:case"end":return e.stop()}}),e,this)})));function t(t,r,n){return e.apply(this,arguments)}return t}()},{key:"getBlockSignatures",value:function(){var e=St(_t().mark((function e(t,r){var n,i,o,s;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this._buildArgsAtLeastConfirmed([t],r,void 0,{transactionDetails:"signatures",rewards:!1}),e.next=3,this._rpcRequest("getBlock",n);case 3:if(i=e.sent,o=fr(i,da),!("error"in o)){e.next=7;break}throw new ho(o.error,"failed to get block");case 7:if(s=o.result,s){e.next=10;break}throw new Error("Block "+t+" not found");case 10:return e.abrupt("return",s);case 11:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"getConfirmedBlockSignatures",value:function(){var e=St(_t().mark((function e(t,r){var n,i,o,s;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this._buildArgsAtLeastConfirmed([t],r,void 0,{transactionDetails:"signatures",rewards:!1}),e.next=3,this._rpcRequest("getConfirmedBlock",n);case 3:if(i=e.sent,o=fr(i,da),!("error"in o)){e.next=7;break}throw new ho(o.error,"failed to get confirmed block");case 7:if(s=o.result,s){e.next=10;break}throw new Error("Confirmed block "+t+" not found");case 10:return e.abrupt("return",s);case 11:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"getConfirmedTransaction",value:function(){var e=St(_t().mark((function e(t,r){var n,i,o,s,a,u;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this._buildArgsAtLeastConfirmed([t],r),e.next=3,this._rpcRequest("getConfirmedTransaction",n);case 3:if(i=e.sent,o=fr(i,ya),!("error"in o)){e.next=7;break}throw new ho(o.error,"failed to get transaction");case 7:if(s=o.result,s){e.next=10;break}return e.abrupt("return",s);case 10:return a=new gi(s.transaction.message),u=s.transaction.signatures,e.abrupt("return",Ro(Ro({},s),{},{transaction:Oi.populate(a,u)}));case 13:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"getParsedConfirmedTransaction",value:function(){var e=St(_t().mark((function e(t,r){var n,i,o;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed"),e.next=3,this._rpcRequest("getConfirmedTransaction",n);case 3:if(i=e.sent,o=fr(i,ga),!("error"in o)){e.next=7;break}throw new ho(o.error,"failed to get confirmed transaction");case 7:return e.abrupt("return",o.result);case 8:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"getParsedConfirmedTransactions",value:function(){var e=St(_t().mark((function e(t,r){var n,i,o,s=this;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.map((function(e){var t=s._buildArgsAtLeastConfirmed([e],r,"jsonParsed");return{methodName:"getConfirmedTransaction",args:t}})),e.next=3,this._rpcBatchRequest(n);case 3:return i=e.sent,o=i.map((function(e){var t=fr(e,ga);if("error"in t)throw new ho(t.error,"failed to get confirmed transactions");return t.result})),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"getConfirmedSignaturesForAddress",value:function(){var e=St(_t().mark((function e(t,r,n){var i,o,s,a,u,c;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i={},e.next=3,this.getFirstAvailableBlock();case 3:o=e.sent;case 4:if("until"in i){e.next=24;break}if(r--,!(r<=0||r<o)){e.next=8;break}return e.abrupt("break",24);case 8:return e.prev=8,e.next=11,this.getConfirmedBlockSignatures(r,"finalized");case 11:s=e.sent,s.signatures.length>0&&(i.until=s.signatures[s.signatures.length-1].toString()),e.next=22;break;case 15:if(e.prev=15,e.t0=e["catch"](8),!(e.t0 instanceof Error&&e.t0.message.includes("skipped"))){e.next=21;break}return e.abrupt("continue",4);case 21:throw e.t0;case 22:e.next=4;break;case 24:return e.next=26,this.getSlot("finalized");case 26:a=e.sent;case 27:if("before"in i){e.next=47;break}if(n++,!(n>a)){e.next=31;break}return e.abrupt("break",47);case 31:return e.prev=31,e.next=34,this.getConfirmedBlockSignatures(n);case 34:u=e.sent,u.signatures.length>0&&(i.before=u.signatures[u.signatures.length-1].toString()),e.next=45;break;case 38:if(e.prev=38,e.t1=e["catch"](31),!(e.t1 instanceof Error&&e.t1.message.includes("skipped"))){e.next=44;break}return e.abrupt("continue",27);case 44:throw e.t1;case 45:e.next=27;break;case 47:return e.next=49,this.getConfirmedSignaturesForAddress2(t,i);case 49:return c=e.sent,e.abrupt("return",c.map((function(e){return e.signature})));case 51:case"end":return e.stop()}}),e,this,[[8,15],[31,38]])})));function t(t,r,n){return e.apply(this,arguments)}return t}()},{key:"getConfirmedSignaturesForAddress2",value:function(){var e=St(_t().mark((function e(t,r,n){var i,o,s;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=this._buildArgsAtLeastConfirmed([t.toBase58()],n,void 0,r),e.next=3,this._rpcRequest("getConfirmedSignaturesForAddress2",i);case 3:if(o=e.sent,s=fr(o,As),!("error"in s)){e.next=7;break}throw new ho(s.error,"failed to get confirmed signatures for address");case 7:return e.abrupt("return",s.result);case 8:case"end":return e.stop()}}),e,this)})));function t(t,r,n){return e.apply(this,arguments)}return t}()},{key:"getSignaturesForAddress",value:function(){var e=St(_t().mark((function e(t,r,n){var i,o,s;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=this._buildArgsAtLeastConfirmed([t.toBase58()],n,void 0,r),e.next=3,this._rpcRequest("getSignaturesForAddress",i);case 3:if(o=e.sent,s=fr(o,_s),!("error"in s)){e.next=7;break}throw new ho(s.error,"failed to get signatures for address");case 7:return e.abrupt("return",s.result);case 8:case"end":return e.stop()}}),e,this)})));function t(t,r,n){return e.apply(this,arguments)}return t}()},{key:"getAddressLookupTable",value:function(){var e=St(_t().mark((function e(t,r){var n,i,o,s;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getAccountInfoAndContext(t,r);case 2:return n=e.sent,i=n.context,o=n.value,s=null,null!==o&&(s=new So({key:t,state:So.deserialize(o.data)})),e.abrupt("return",{context:i,value:s});case 8:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"getNonceAndContext",value:function(){var e=St(_t().mark((function e(t,r){var n,i,o,s;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getAccountInfoAndContext(t,r);case 2:return n=e.sent,i=n.context,o=n.value,s=null,null!==o&&(s=Hi.fromAccountData(o.data)),e.abrupt("return",{context:i,value:s});case 8:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"getNonce",value:function(){var e=St(_t().mark((function e(t,r){return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getNonceAndContext(t,r).then((function(e){return e.value}))["catch"]((function(e){throw new Error("failed to get nonce for account "+t.toBase58()+": "+e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"requestAirdrop",value:function(){var e=St(_t().mark((function e(t,r){var n,i;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("requestAirdrop",[t.toBase58(),r]);case 2:if(n=e.sent,i=fr(n,Sa),!("error"in i)){e.next=6;break}throw new ho(i.error,"airdrop to ".concat(t.toBase58()," failed"));case 6:return e.abrupt("return",i.result);case 7:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"_blockhashWithExpiryBlockHeight",value:function(){var e=St(_t().mark((function e(t){var r,n;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t){e.next=10;break}case 1:if(!this._pollingBlockhash){e.next=6;break}return e.next=4,ji(100);case 4:e.next=1;break;case 6:if(r=Date.now()-this._blockhashInfo.lastFetch,n=r>=Wo,null===this._blockhashInfo.latestBlockhash||n){e.next=10;break}return e.abrupt("return",this._blockhashInfo.latestBlockhash);case 10:return e.next=12,this._pollNewBlockhash();case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_pollNewBlockhash",value:function(){var e=St(_t().mark((function e(){var t,r,n,i,o;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:this._pollingBlockhash=!0,e.prev=1,t=Date.now(),r=this._blockhashInfo.latestBlockhash,n=r?r.blockhash:null,i=0;case 6:if(!(i<50)){e.next=18;break}return e.next=9,this.getLatestBlockhash("finalized");case 9:if(o=e.sent,n===o.blockhash){e.next=13;break}return this._blockhashInfo={latestBlockhash:o,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},e.abrupt("return",o);case 13:return e.next=15,ji(Li/2);case 15:i++,e.next=6;break;case 18:throw new Error("Unable to obtain a new blockhash after ".concat(Date.now()-t,"ms"));case 19:return e.prev=19,this._pollingBlockhash=!1,e.finish(19);case 22:case"end":return e.stop()}}),e,this,[[1,,19,22]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"getStakeMinimumDelegation",value:function(){var e=St(_t().mark((function e(t){var r,n,i,o,s,a;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=No(t),n=r.commitment,i=r.config,o=this._buildArgs([],n,"base64",i),e.next=4,this._rpcRequest("getStakeMinimumDelegation",o);case 4:if(s=e.sent,a=fr(s,Fo(xr())),!("error"in a)){e.next=8;break}throw new ho(a.error,"failed to get stake minimum delegation");case 8:return e.abrupt("return",a.result);case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"simulateTransaction",value:function(){var e=St(_t().mark((function e(t,r,n){var i,o,s,u,c,f,l,h,p,d,y,g,b,m,w,v,k,x,S,E,I,B,A,_,O,P,T;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!("message"in t)){e.next=17;break}if(i=t,o=i.serialize(),s=a.lW.from(o).toString("base64"),!Array.isArray(r)&&void 0===n){e.next=6;break}throw new Error("Invalid arguments");case 6:return u=r||{},u.encoding="base64","commitment"in u||(u.commitment=this.commitment),c=[s,u],e.next=12,this._rpcRequest("simulateTransaction",c);case 12:if(f=e.sent,l=fr(f,rs),!("error"in l)){e.next=16;break}throw new Error("failed to simulate transaction: "+l.error.message);case 16:return e.abrupt("return",l.result);case 17:if(t instanceof Oi?(p=t,h=new Oi,h.feePayer=p.feePayer,h.instructions=t.instructions,h.nonceInfo=p.nonceInfo,h.signatures=p.signatures):(h=Oi.populate(t),h._message=h._json=void 0),void 0===r||Array.isArray(r)){e.next=20;break}throw new Error("Invalid arguments");case 20:if(d=r,!h.nonceInfo||!d){e.next=25;break}(y=h).sign.apply(y,Gt(d)),e.next=45;break;case 25:g=this._disableBlockhashCaching;case 26:return e.next=28,this._blockhashWithExpiryBlockHeight(g);case 28:if(m=e.sent,h.lastValidBlockHeight=m.lastValidBlockHeight,h.recentBlockhash=m.blockhash,d){e.next=33;break}return e.abrupt("break",45);case 33:if((b=h).sign.apply(b,Gt(d)),h.signature){e.next=36;break}throw new Error("!signature");case 36:if(w=h.signature.toString("base64"),this._blockhashInfo.simulatedSignatures.includes(w)||this._blockhashInfo.transactionSignatures.includes(w)){e.next=42;break}return this._blockhashInfo.simulatedSignatures.push(w),e.abrupt("break",45);case 42:g=!0;case 43:e.next=26;break;case 45:return v=h._compile(),k=v.serialize(),x=h._serialize(k),S=x.toString("base64"),E={encoding:"base64",commitment:this.commitment},n&&(I=(Array.isArray(n)?n:v.nonProgramIds()).map((function(e){return e.toBase58()})),E["accounts"]={encoding:"base64",addresses:I}),d&&(E.sigVerify=!0),B=[S,E],e.next=55,this._rpcRequest("simulateTransaction",B);case 55:if(A=e.sent,_=fr(A,rs),!("error"in _)){e.next=60;break}throw"data"in _.error&&(O=_.error.data.logs,O&&Array.isArray(O)&&(P="\n    ",T=P+O.join(P),console.error(_.error.message,T))),new lo("failed to simulate transaction: "+_.error.message,O);case 60:return e.abrupt("return",_.result);case 61:case"end":return e.stop()}}),e,this)})));function t(t,r,n){return e.apply(this,arguments)}return t}()},{key:"sendTransaction",value:function(){var e=St(_t().mark((function e(t,r,n){var i,o,s,a,u,c;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!("version"in t)){e.next=7;break}if(!r||!Array.isArray(r)){e.next=3;break}throw new Error("Invalid arguments");case 3:return i=t.serialize(),e.next=6,this.sendRawTransaction(i,r);case 6:return e.abrupt("return",e.sent);case 7:if(void 0!==r&&Array.isArray(r)){e.next=9;break}throw new Error("Invalid arguments");case 9:if(o=r,!t.nonceInfo){e.next=14;break}t.sign.apply(t,Gt(o)),e.next=32;break;case 14:s=this._disableBlockhashCaching;case 15:return e.next=17,this._blockhashWithExpiryBlockHeight(s);case 17:if(a=e.sent,t.lastValidBlockHeight=a.lastValidBlockHeight,t.recentBlockhash=a.blockhash,t.sign.apply(t,Gt(o)),t.signature){e.next=23;break}throw new Error("!signature");case 23:if(u=t.signature.toString("base64"),this._blockhashInfo.transactionSignatures.includes(u)){e.next=29;break}return this._blockhashInfo.transactionSignatures.push(u),e.abrupt("break",32);case 29:s=!0;case 30:e.next=15;break;case 32:return c=t.serialize(),e.next=35,this.sendRawTransaction(c,n);case 35:return e.abrupt("return",e.sent);case 36:case"end":return e.stop()}}),e,this)})));function t(t,r,n){return e.apply(this,arguments)}return t}()},{key:"sendRawTransaction",value:function(){var e=St(_t().mark((function e(t,r){var n,i;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=Ln(t).toString("base64"),e.next=3,this.sendEncodedTransaction(n,r);case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"sendEncodedTransaction",value:function(){var e=St(_t().mark((function e(t,r){var n,i,o,s,a,u,c;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={encoding:"base64"},i=r&&r.skipPreflight,o=r&&r.preflightCommitment||this.commitment,r&&null!=r.maxRetries&&(n.maxRetries=r.maxRetries),r&&null!=r.minContextSlot&&(n.minContextSlot=r.minContextSlot),i&&(n.skipPreflight=i),o&&(n.preflightCommitment=o),s=[t,n],e.next=10,this._rpcRequest("sendTransaction",s);case 10:if(a=e.sent,u=fr(a,Ea),!("error"in u)){e.next=15;break}throw"data"in u.error&&(c=u.error.data.logs),new lo("failed to send transaction: "+u.error.message,c);case 15:return e.abrupt("return",u.result);case 16:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"_wsOnOpen",value:function(){var e=this;this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval((function(){St(_t().mark((function t(){return _t().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e._rpcWebSocket.notify("ping");case 3:t.next=7;break;case 5:t.prev=5,t.t0=t["catch"](0);case 7:case"end":return t.stop()}}),t,null,[[0,5]])})))()}),5e3),this._updateSubscriptions()}},{key:"_wsOnError",value:function(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}},{key:"_wsOnClose",value:function(e){var t=this;this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),1e3!==e?(this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach((function(e){var r=(0,Ft.Z)(e,2),n=r[0],i=r[1];t._setSubscription(n,Ro(Ro({},i),{},{state:"pending"}))}))):this._updateSubscriptions()}},{key:"_setSubscription",value:function(e,t){var r,n=null===(r=this._subscriptionsByHash[e])||void 0===r?void 0:r.state;if(this._subscriptionsByHash[e]=t,n!==t.state){var i=this._subscriptionStateChangeCallbacksByHash[e];i&&i.forEach((function(e){try{e(t.state)}catch(r){}}))}}},{key:"_onSubscriptionStateChange",value:function(e,t){var r,n=this,i=this._subscriptionHashByClientSubscriptionId[e];if(null==i)return function(){};var o=(r=this._subscriptionStateChangeCallbacksByHash)[i]||(r[i]=new Set);return o.add(t),function(){o["delete"](t),0===o.size&&delete n._subscriptionStateChangeCallbacksByHash[i]}}},{key:"_updateSubscriptions",value:function(){var e=St(_t().mark((function e(){var t,r,n=this;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!==Object.keys(this._subscriptionsByHash).length){e.next=3;break}return this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout((function(){n._rpcWebSocketIdleTimeout=null;try{n._rpcWebSocket.close()}catch(e){e instanceof Error&&console.log("Error when closing socket connection: ".concat(e.message))}}),500)),e.abrupt("return");case 3:if(null!==this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),this._rpcWebSocketConnected){e.next=7;break}return this._rpcWebSocket.connect(),e.abrupt("return");case 7:return t=this._rpcWebSocketGeneration,r=function(){return t===n._rpcWebSocketGeneration},e.next=11,Promise.all(Object.keys(this._subscriptionsByHash).map(function(){var e=St(_t().mark((function e(t){var i;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=n._subscriptionsByHash[t],void 0!==i){e.next=3;break}return e.abrupt("return");case 3:e.t0=i.state,e.next="pending"===e.t0||"unsubscribed"===e.t0?6:"subscribed"===e.t0?15:"subscribing"===e.t0||"unsubscribing"===e.t0?19:20;break;case 6:if(0!==i.callbacks.size){e.next=12;break}return delete n._subscriptionsByHash[t],"unsubscribed"===i.state&&delete n._subscriptionCallbacksByServerSubscriptionId[i.serverSubscriptionId],e.next=11,n._updateSubscriptions();case 11:return e.abrupt("return");case 12:return e.next=14,St(_t().mark((function e(){var o,s,a;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=i.args,s=i.method,e.prev=1,n._setSubscription(t,Ro(Ro({},i),{},{state:"subscribing"})),e.next=5,n._rpcWebSocket.call(s,o);case 5:return a=e.sent,n._setSubscription(t,Ro(Ro({},i),{},{serverSubscriptionId:a,state:"subscribed"})),n._subscriptionCallbacksByServerSubscriptionId[a]=i.callbacks,e.next=10,n._updateSubscriptions();case 10:e.next=20;break;case 12:if(e.prev=12,e.t0=e["catch"](1),e.t0 instanceof Error&&console.error("".concat(s," error for argument"),o,e.t0.message),r()){e.next=17;break}return e.abrupt("return");case 17:return n._setSubscription(t,Ro(Ro({},i),{},{state:"pending"})),e.next=20,n._updateSubscriptions();case 20:case"end":return e.stop()}}),e,null,[[1,12]])})))();case 14:return e.abrupt("break",20);case 15:if(0!==i.callbacks.size){e.next=18;break}return e.next=18,St(_t().mark((function e(){var o,s;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o=i.serverSubscriptionId,s=i.unsubscribeMethod,!n._subscriptionsAutoDisposedByRpc.has(o)){e.next=5;break}n._subscriptionsAutoDisposedByRpc["delete"](o),e.next=21;break;case 5:return n._setSubscription(t,Ro(Ro({},i),{},{state:"unsubscribing"})),n._setSubscription(t,Ro(Ro({},i),{},{state:"unsubscribing"})),e.prev=7,e.next=10,n._rpcWebSocket.call(s,[o]);case 10:e.next=21;break;case 12:if(e.prev=12,e.t0=e["catch"](7),e.t0 instanceof Error&&console.error("".concat(s," error:"),e.t0.message),r()){e.next=17;break}return e.abrupt("return");case 17:return n._setSubscription(t,Ro(Ro({},i),{},{state:"subscribed"})),e.next=20,n._updateSubscriptions();case 20:return e.abrupt("return");case 21:return n._setSubscription(t,Ro(Ro({},i),{},{state:"unsubscribed"})),e.next=24,n._updateSubscriptions();case 24:case"end":return e.stop()}}),e,null,[[7,12]])})))();case 18:return e.abrupt("break",20);case 19:return e.abrupt("break",20);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"_handleServerNotification",value:function(e,t){var r=this._subscriptionCallbacksByServerSubscriptionId[e];void 0!==r&&r.forEach((function(e){try{e.apply(void 0,Gt(t))}catch(r){console.error(r)}}))}},{key:"_wsOnAccountNotification",value:function(e){var t=fr(e,Os),r=t.result,n=t.subscription;this._handleServerNotification(n,[r.value,r.context])}},{key:"_makeSubscription",value:function(e,t){var r=this,n=this._nextClientSubscriptionId++,i=io([e.method,t],!0),o=this._subscriptionsByHash[i];return void 0===o?this._subscriptionsByHash[i]=Ro(Ro({},e),{},{args:t,callbacks:new Set([e.callback]),state:"pending"}):o.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[n]=i,this._subscriptionDisposeFunctionsByClientSubscriptionId[n]=St(_t().mark((function t(){var o;return _t().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return delete r._subscriptionDisposeFunctionsByClientSubscriptionId[n],delete r._subscriptionHashByClientSubscriptionId[n],o=r._subscriptionsByHash[i],li(void 0!==o,"Could not find a `Subscription` when tearing down client subscription #".concat(n)),o.callbacks["delete"](e.callback),t.next=7,r._updateSubscriptions();case 7:case"end":return t.stop()}}),t)}))),this._updateSubscriptions(),n}},{key:"onAccountChange",value:function(e,t,r){var n=this._buildArgs([e.toBase58()],r||this._commitment||"finalized","base64");return this._makeSubscription({callback:t,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},n)}},{key:"removeAccountChangeListener",value:function(){var e=St(_t().mark((function e(t){return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._unsubscribeClientSubscription(t,"account change");case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_wsOnProgramAccountNotification",value:function(e){var t=fr(e,Ts),r=t.result,n=t.subscription;this._handleServerNotification(n,[{accountId:r.value.pubkey,accountInfo:r.value.account},r.context])}},{key:"onProgramAccountChange",value:function(e,t,r,n){var i=this._buildArgs([e.toBase58()],r||this._commitment||"finalized","base64",n?{filters:n}:void 0);return this._makeSubscription({callback:t,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},i)}},{key:"removeProgramAccountChangeListener",value:function(){var e=St(_t().mark((function e(t){return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._unsubscribeClientSubscription(t,"program account change");case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"onLogs",value:function(e,t,r){var n=this._buildArgs(["object"===(0,Yt.Z)(e)?{mentions:[e.toString()]}:e],r||this._commitment||"finalized");return this._makeSubscription({callback:t,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},n)}},{key:"removeOnLogsListener",value:function(){var e=St(_t().mark((function e(t){return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._unsubscribeClientSubscription(t,"logs");case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_wsOnLogsNotification",value:function(e){var t=fr(e,Ba),r=t.result,n=t.subscription;this._handleServerNotification(n,[r.value,r.context])}},{key:"_wsOnSlotNotification",value:function(e){var t=fr(e,Ls),r=t.result,n=t.subscription;this._handleServerNotification(n,[r])}},{key:"onSlotChange",value:function(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}},{key:"removeSlotChangeListener",value:function(){var e=St(_t().mark((function e(t){return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._unsubscribeClientSubscription(t,"slot change");case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_wsOnSlotUpdatesNotification",value:function(e){var t=fr(e,Cs),r=t.result,n=t.subscription;this._handleServerNotification(n,[r])}},{key:"onSlotUpdate",value:function(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}},{key:"removeSlotUpdateListener",value:function(){var e=St(_t().mark((function e(t){return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._unsubscribeClientSubscription(t,"slot update");case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_unsubscribeClientSubscription",value:function(){var e=St(_t().mark((function e(t,r){var n;return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=this._subscriptionDisposeFunctionsByClientSubscriptionId[t],!n){e.next=6;break}return e.next=4,n();case 4:e.next=7;break;case 6:console.warn("Ignored unsubscribe request because an active subscription with id "+"`".concat(t,"` for '").concat(r,"' events ")+"could not be found.");case 7:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"_buildArgs",value:function(e,t,r,n){var i=t||this._commitment;if(i||r||n){var o={};r&&(o.encoding=r),i&&(o.commitment=i),n&&(o=Object.assign(o,n)),e.push(o)}return e}},{key:"_buildArgsAtLeastConfirmed",value:function(e,t,r,n){var i=t||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,t,r,n)}},{key:"_wsOnSignatureNotification",value:function(e){var t=fr(e,Ws),r=t.result,n=t.subscription;"receivedSignature"!==r.value&&this._subscriptionsAutoDisposedByRpc.add(n),this._handleServerNotification(n,"receivedSignature"===r.value?[{type:"received"},r.context]:[{type:"status",result:r.value},r.context])}},{key:"onSignature",value:function(e,t,r){var n=this,i=this._buildArgs([e],r||this._commitment||"finalized"),o=this._makeSubscription({callback:function(e,r){if("status"===e.type){t(e.result,r);try{n.removeSignatureListener(o)}catch(i){}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},i);return o}},{key:"onSignatureWithOptions",value:function(e,t,r){var n=this,i=Ro(Ro({},r),{},{commitment:r&&r.commitment||this._commitment||"finalized"}),o=i.commitment,s=Qt(i,Po),a=this._buildArgs([e],o,void 0,s),u=this._makeSubscription({callback:function(e,r){t(e,r);try{n.removeSignatureListener(u)}catch(i){}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},a);return u}},{key:"removeSignatureListener",value:function(){var e=St(_t().mark((function e(t){return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._unsubscribeClientSubscription(t,"signature result");case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_wsOnRootNotification",value:function(e){var t=fr(e,zs),r=t.result,n=t.subscription;this._handleServerNotification(n,[r])}},{key:"onRootChange",value:function(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}},{key:"removeRootChangeListener",value:function(){var e=St(_t().mark((function e(t){return _t().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._unsubscribeClientSubscription(t,"root change");case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),Oa=function(){function e(t){(0,o.Z)(this,e),this._keypair=void 0,this._keypair=null!==t&&void 0!==t?t:_n()}return(0,s.Z)(e,[{key:"publicKey",get:function(){return new Mn(this._keypair.publicKey)}},{key:"secretKey",get:function(){return new Uint8Array(this._keypair.secretKey)}}],[{key:"generate",value:function(){return new e(_n())}},{key:"fromSecretKey",value:function(t,r){if(64!==t.byteLength)throw new Error("bad secret key size");var n=t.slice(32,64);if(!r||!r.skipValidation)for(var i=t.slice(0,32),o=On(i),s=0;s<32;s++)if(n[s]!==o[s])throw new Error("provided secretKey is invalid");return new e({publicKey:n,secretKey:t})}},{key:"fromSeed",value:function(t){var r=On(t),n=new Uint8Array(64);return n.set(t),n.set(r,32),new e({publicKey:r,secretKey:n})}}]),e}(),Pa=Object.freeze({CreateLookupTable:{index:0,layout:Kt.n_([Kt.Jq("instruction"),Vi("recentSlot"),Kt.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:Kt.n_([Kt.Jq("instruction")])},ExtendLookupTable:{index:2,layout:Kt.n_([Kt.Jq("instruction"),Vi(),Kt.A9(ri(),Kt.cv(Kt.Jq(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:Kt.n_([Kt.Jq("instruction")])},CloseLookupTable:{index:4,layout:Kt.n_([Kt.Jq("instruction")])}}),Ta=function(){function e(){(0,o.Z)(this,e)}return(0,s.Z)(e,null,[{key:"createLookupTable",value:function(e){var t=Mn.findProgramAddressSync([e.authority.toBuffer(),(0,Mt.k$)(BigInt(e.recentSlot),8)],this.programId),r=(0,Ft.Z)(t,2),n=r[0],i=r[1],o=Pa.CreateLookupTable,s=Ki(o,{recentSlot:BigInt(e.recentSlot),bumpSeed:i}),a=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:Gi.programId,isSigner:!1,isWritable:!1}];return[new _i({programId:this.programId,keys:a,data:s}),n]}},{key:"freezeLookupTable",value:function(e){var t=Pa.FreezeLookupTable,r=Ki(t),n=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new _i({programId:this.programId,keys:n,data:r})}},{key:"extendLookupTable",value:function(e){var t=Pa.ExtendLookupTable,r=Ki(t,{addresses:e.addresses.map((function(e){return e.toBytes()}))}),n=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return e.payer&&n.push({pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:Gi.programId,isSigner:!1,isWritable:!1}),new _i({programId:this.programId,keys:n,data:r})}},{key:"deactivateLookupTable",value:function(e){var t=Pa.DeactivateLookupTable,r=Ki(t),n=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new _i({programId:this.programId,keys:n,data:r})}},{key:"closeLookupTable",value:function(e){var t=Pa.CloseLookupTable,r=Ki(t),n=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.recipient,isSigner:!1,isWritable:!0}];return new _i({programId:this.programId,keys:n,data:r})}}]),e}();Ta.programId=new Mn("AddressLookupTab1e1111111111111111111111111");var Ra=Object.freeze({RequestUnits:{index:0,layout:Kt.n_([Kt.u8("instruction"),Kt.Jq("units"),Kt.Jq("additionalFee")])},RequestHeapFrame:{index:1,layout:Kt.n_([Kt.u8("instruction"),Kt.Jq("bytes")])},SetComputeUnitLimit:{index:2,layout:Kt.n_([Kt.u8("instruction"),Kt.Jq("units")])},SetComputeUnitPrice:{index:3,layout:Kt.n_([Kt.u8("instruction"),Vi("microLamports")])}}),La=function(){function e(){(0,o.Z)(this,e)}return(0,s.Z)(e,null,[{key:"requestUnits",value:function(e){var t=Ra.RequestUnits,r=Ki(t,e);return new _i({keys:[],programId:this.programId,data:r})}},{key:"requestHeapFrame",value:function(e){var t=Ra.RequestHeapFrame,r=Ki(t,e);return new _i({keys:[],programId:this.programId,data:r})}},{key:"setComputeUnitLimit",value:function(e){var t=Ra.SetComputeUnitLimit,r=Ki(t,e);return new _i({keys:[],programId:this.programId,data:r})}},{key:"setComputeUnitPrice",value:function(e){var t=Ra.SetComputeUnitPrice,r=Ki(t,{microLamports:BigInt(e.microLamports)});return new _i({keys:[],programId:this.programId,data:r})}}]),e}();La.programId=new Mn("ComputeBudget111111111111111111111111111111");var Ua=64,Ca=32,Wa=64,za=Kt.n_([Kt.u8("numSignatures"),Kt.u8("padding"),Kt.KB("signatureOffset"),Kt.KB("signatureInstructionIndex"),Kt.KB("publicKeyOffset"),Kt.KB("publicKeyInstructionIndex"),Kt.KB("messageDataOffset"),Kt.KB("messageDataSize"),Kt.KB("messageInstructionIndex")]),Na=function(){function e(){(0,o.Z)(this,e)}return(0,s.Z)(e,null,[{key:"createInstructionWithPublicKey",value:function(t){var r=t.publicKey,n=t.message,i=t.signature,o=t.instructionIndex;li(r.length===Ca,"Public Key must be ".concat(Ca," bytes but received ").concat(r.length," bytes")),li(i.length===Wa,"Signature must be ".concat(Wa," bytes but received ").concat(i.length," bytes"));var s=za.span,u=s+r.length,c=u+i.length,f=1,l=a.lW.alloc(c+n.length),h=null==o?65535:o;return za.encode({numSignatures:f,padding:0,signatureOffset:u,signatureInstructionIndex:h,publicKeyOffset:s,publicKeyInstructionIndex:h,messageDataOffset:c,messageDataSize:n.length,messageInstructionIndex:h},l),l.fill(r,s),l.fill(i,u),l.fill(n,c),new _i({keys:[],programId:e.programId,data:l})}},{key:"createInstructionWithPrivateKey",value:function(e){var t=e.privateKey,r=e.message,n=e.instructionIndex;li(t.length===Ua,"Private key must be ".concat(Ua," bytes but received ").concat(t.length," bytes"));try{var i=Oa.fromSecretKey(t),o=i.publicKey.toBytes(),s=Tn(r,i.secretKey);return this.createInstructionWithPublicKey({publicKey:o,message:r,signature:s,instructionIndex:n})}catch(a){throw new Error("Error creating instruction; ".concat(a))}}}]),e}();Na.programId=new Mn("Ed25519SigVerify111111111111111111111111111");var qa=function(e,t){var r=An.sign(e,t);return[r.toCompactRawBytes(),r.recovery]};An.utils.isValidPrivateKey;var ja=An.getPublicKey,Ka=32,Fa=20,Ma=64,Da=11,Ha=Kt.n_([Kt.u8("numSignatures"),Kt.KB("signatureOffset"),Kt.u8("signatureInstructionIndex"),Kt.KB("ethAddressOffset"),Kt.u8("ethAddressInstructionIndex"),Kt.KB("messageDataOffset"),Kt.KB("messageDataSize"),Kt.u8("messageInstructionIndex"),Kt.Ik(20,"ethAddress"),Kt.Ik(64,"signature"),Kt.u8("recoveryId")]),Za=function(){function e(){(0,o.Z)(this,e)}return(0,s.Z)(e,null,[{key:"publicKeyToEthAddress",value:function(e){li(e.length===Ma,"Public key must be ".concat(Ma," bytes but received ").concat(e.length," bytes"));try{return a.lW.from(on(Ln(e))).slice(-Fa)}catch(t){throw new Error("Error constructing Ethereum address: ".concat(t))}}},{key:"createInstructionWithPublicKey",value:function(t){var r=t.publicKey,n=t.message,i=t.signature,o=t.recoveryId,s=t.instructionIndex;return e.createInstructionWithEthAddress({ethAddress:e.publicKeyToEthAddress(r),message:n,signature:i,recoveryId:o,instructionIndex:s})}},{key:"createInstructionWithEthAddress",value:function(t){var r,n=t.ethAddress,i=t.message,o=t.signature,s=t.recoveryId,u=t.instructionIndex,c=void 0===u?0:u;r="string"===typeof n?n.startsWith("0x")?a.lW.from(n.substr(2),"hex"):a.lW.from(n,"hex"):n,li(r.length===Fa,"Address must be ".concat(Fa," bytes but received ").concat(r.length," bytes"));var f=1+Da,l=f,h=f+r.length,p=h+o.length+1,d=1,y=a.lW.alloc(Ha.span+i.length);return Ha.encode({numSignatures:d,signatureOffset:h,signatureInstructionIndex:c,ethAddressOffset:l,ethAddressInstructionIndex:c,messageDataOffset:p,messageDataSize:i.length,messageInstructionIndex:c,signature:Ln(o),ethAddress:Ln(r),recoveryId:s},y),y.fill(Ln(i),Ha.span),new _i({keys:[],programId:e.programId,data:y})}},{key:"createInstructionWithPrivateKey",value:function(e){var t=e.privateKey,r=e.message,n=e.instructionIndex;li(t.length===Ka,"Private key must be ".concat(Ka," bytes but received ").concat(t.length," bytes"));try{var i=Ln(t),o=ja(i,!1).slice(1),s=a.lW.from(on(Ln(r))),u=qa(s,i),c=(0,Ft.Z)(u,2),f=c[0],l=c[1];return this.createInstructionWithPublicKey({publicKey:o,message:r,signature:f,recoveryId:l,instructionIndex:n})}catch(h){throw new Error("Error creating instruction; ".concat(h))}}}]),e}();Za.programId=new Mn("KeccakSecp256k11111111111111111111111111111");var $a=new Mn("StakeConfig11111111111111111111111111111111"),Va=(0,s.Z)((function e(t,r,n){(0,o.Z)(this,e),this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=r,this.custodian=n}));Va["default"]=new Va(0,0,Mn["default"]);var Ja=Object.freeze({Initialize:{index:0,layout:Kt.n_([Kt.Jq("instruction"),ii(),oi()])},Authorize:{index:1,layout:Kt.n_([Kt.Jq("instruction"),ri("newAuthorized"),Kt.Jq("stakeAuthorizationType")])},Delegate:{index:2,layout:Kt.n_([Kt.Jq("instruction")])},Split:{index:3,layout:Kt.n_([Kt.Jq("instruction"),Kt.gM("lamports")])},Withdraw:{index:4,layout:Kt.n_([Kt.Jq("instruction"),Kt.gM("lamports")])},Deactivate:{index:5,layout:Kt.n_([Kt.Jq("instruction")])},Merge:{index:7,layout:Kt.n_([Kt.Jq("instruction")])},AuthorizeWithSeed:{index:8,layout:Kt.n_([Kt.Jq("instruction"),ri("newAuthorized"),Kt.Jq("stakeAuthorizationType"),ni("authoritySeed"),ri("authorityOwner")])}}),Ga=(Object.freeze({Staker:{index:0},Withdrawer:{index:1}}),function(){function e(){(0,o.Z)(this,e)}return(0,s.Z)(e,null,[{key:"initialize",value:function(e){var t=e.stakePubkey,r=e.authorized,n=e.lockup,i=n||Va["default"],o=Ja.Initialize,s=Ki(o,{authorized:{staker:Ln(r.staker.toBuffer()),withdrawer:Ln(r.withdrawer.toBuffer())},lockup:{unixTimestamp:i.unixTimestamp,epoch:i.epoch,custodian:Ln(i.custodian.toBuffer())}}),a={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Wi,isSigner:!1,isWritable:!1}],programId:this.programId,data:s};return new _i(a)}},{key:"createAccountWithSeed",value:function(e){var t=new Oi;t.add(Gi.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:this.space,programId:this.programId}));var r=e.stakePubkey,n=e.authorized,i=e.lockup;return t.add(this.initialize({stakePubkey:r,authorized:n,lockup:i}))}},{key:"createAccount",value:function(e){var t=new Oi;t.add(Gi.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,lamports:e.lamports,space:this.space,programId:this.programId}));var r=e.stakePubkey,n=e.authorized,i=e.lockup;return t.add(this.initialize({stakePubkey:r,authorized:n,lockup:i}))}},{key:"delegate",value:function(e){var t=e.stakePubkey,r=e.authorizedPubkey,n=e.votePubkey,i=Ja.Delegate,o=Ki(i);return(new Oi).add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:Ui,isSigner:!1,isWritable:!1},{pubkey:zi,isSigner:!1,isWritable:!1},{pubkey:$a,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}},{key:"authorize",value:function(e){var t=e.stakePubkey,r=e.authorizedPubkey,n=e.newAuthorizedPubkey,i=e.stakeAuthorizationType,o=e.custodianPubkey,s=Ja.Authorize,a=Ki(s,{newAuthorized:Ln(n.toBuffer()),stakeAuthorizationType:i.index}),u=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Ui,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return o&&u.push({pubkey:o,isSigner:!1,isWritable:!1}),(new Oi).add({keys:u,programId:this.programId,data:a})}},{key:"authorizeWithSeed",value:function(e){var t=e.stakePubkey,r=e.authorityBase,n=e.authoritySeed,i=e.authorityOwner,o=e.newAuthorizedPubkey,s=e.stakeAuthorizationType,a=e.custodianPubkey,u=Ja.AuthorizeWithSeed,c=Ki(u,{newAuthorized:Ln(o.toBuffer()),stakeAuthorizationType:s.index,authoritySeed:n,authorityOwner:Ln(i.toBuffer())}),f=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:Ui,isSigner:!1,isWritable:!1}];return a&&f.push({pubkey:a,isSigner:!1,isWritable:!1}),(new Oi).add({keys:f,programId:this.programId,data:c})}},{key:"splitInstruction",value:function(e){var t=e.stakePubkey,r=e.authorizedPubkey,n=e.splitStakePubkey,i=e.lamports,o=Ja.Split,s=Ki(o,{lamports:i});return new _i({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:s})}},{key:"split",value:function(e){var t=new Oi;return t.add(Gi.createAccount({fromPubkey:e.authorizedPubkey,newAccountPubkey:e.splitStakePubkey,lamports:0,space:this.space,programId:this.programId})),t.add(this.splitInstruction(e))}},{key:"splitWithSeed",value:function(e){var t=e.stakePubkey,r=e.authorizedPubkey,n=e.splitStakePubkey,i=e.basePubkey,o=e.seed,s=e.lamports,a=new Oi;return a.add(Gi.allocate({accountPubkey:n,basePubkey:i,seed:o,space:this.space,programId:this.programId})),a.add(this.splitInstruction({stakePubkey:t,authorizedPubkey:r,splitStakePubkey:n,lamports:s}))}},{key:"merge",value:function(e){var t=e.stakePubkey,r=e.sourceStakePubKey,n=e.authorizedPubkey,i=Ja.Merge,o=Ki(i);return(new Oi).add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:Ui,isSigner:!1,isWritable:!1},{pubkey:zi,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}},{key:"withdraw",value:function(e){var t=e.stakePubkey,r=e.authorizedPubkey,n=e.toPubkey,i=e.lamports,o=e.custodianPubkey,s=Ja.Withdraw,a=Ki(s,{lamports:i}),u=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:Ui,isSigner:!1,isWritable:!1},{pubkey:zi,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return o&&u.push({pubkey:o,isSigner:!1,isWritable:!1}),(new Oi).add({keys:u,programId:this.programId,data:a})}},{key:"deactivate",value:function(e){var t=e.stakePubkey,r=e.authorizedPubkey,n=Ja.Deactivate,i=Ki(n);return(new Oi).add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Ui,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}}]),e}());Ga.programId=new Mn("Stake11111111111111111111111111111111111111"),Ga.space=200;var Ya=Object.freeze({InitializeAccount:{index:0,layout:Kt.n_([Kt.Jq("instruction"),si()])},Authorize:{index:1,layout:Kt.n_([Kt.Jq("instruction"),ri("newAuthorized"),Kt.Jq("voteAuthorizationType")])},Withdraw:{index:3,layout:Kt.n_([Kt.Jq("instruction"),Kt.gM("lamports")])},AuthorizeWithSeed:{index:10,layout:Kt.n_([Kt.Jq("instruction"),ai()])}}),Xa=(Object.freeze({Voter:{index:0},Withdrawer:{index:1}}),function(){function e(){(0,o.Z)(this,e)}return(0,s.Z)(e,null,[{key:"initializeAccount",value:function(e){var t=e.votePubkey,r=e.nodePubkey,n=e.voteInit,i=Ya.InitializeAccount,o=Ki(i,{voteInit:{nodePubkey:Ln(n.nodePubkey.toBuffer()),authorizedVoter:Ln(n.authorizedVoter.toBuffer()),authorizedWithdrawer:Ln(n.authorizedWithdrawer.toBuffer()),commission:n.commission}}),s={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Wi,isSigner:!1,isWritable:!1},{pubkey:Ui,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:o};return new _i(s)}},{key:"createAccount",value:function(e){var t=new Oi;return t.add(Gi.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.votePubkey,lamports:e.lamports,space:this.space,programId:this.programId})),t.add(this.initializeAccount({votePubkey:e.votePubkey,nodePubkey:e.voteInit.nodePubkey,voteInit:e.voteInit}))}},{key:"authorize",value:function(e){var t=e.votePubkey,r=e.authorizedPubkey,n=e.newAuthorizedPubkey,i=e.voteAuthorizationType,o=Ya.Authorize,s=Ki(o,{newAuthorized:Ln(n.toBuffer()),voteAuthorizationType:i.index}),a=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Ui,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return(new Oi).add({keys:a,programId:this.programId,data:s})}},{key:"authorizeWithSeed",value:function(e){var t=e.currentAuthorityDerivedKeyBasePubkey,r=e.currentAuthorityDerivedKeyOwnerPubkey,n=e.currentAuthorityDerivedKeySeed,i=e.newAuthorizedPubkey,o=e.voteAuthorizationType,s=e.votePubkey,a=Ya.AuthorizeWithSeed,u=Ki(a,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:Ln(r.toBuffer()),currentAuthorityDerivedKeySeed:n,newAuthorized:Ln(i.toBuffer()),voteAuthorizationType:o.index}}),c=[{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:Ui,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!0,isWritable:!1}];return(new Oi).add({keys:c,programId:this.programId,data:u})}},{key:"withdraw",value:function(e){var t=e.votePubkey,r=e.authorizedWithdrawerPubkey,n=e.lamports,i=e.toPubkey,o=Ya.Withdraw,s=Ki(o,{lamports:n}),a=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return(new Oi).add({keys:a,programId:this.programId,data:s})}},{key:"safeWithdraw",value:function(t,r,n){if(t.lamports>r-n)throw new Error("Withdraw will leave vote account with insuffcient funds.");return e.withdraw(t)}}]),e}());Xa.programId=new Mn("Vote111111111111111111111111111111111111111"),Xa.space=3731;new Mn("Va1idator1nfo111111111111111111111111111111"),Ar({name:Ir(),website:Sr(Ir()),details:Sr(Ir()),keybaseUsername:Sr(Ir())}),new Mn("Vote111111111111111111111111111111111111111"),Kt.n_([ri("nodePubkey"),ri("authorizedWithdrawer"),Kt.u8("commission"),Kt._O(),Kt.A9(Kt.n_([Kt._O("slot"),Kt.Jq("confirmationCount")]),Kt.cv(Kt.Jq(),-8),"votes"),Kt.u8("rootSlotValid"),Kt._O("rootSlot"),Kt._O(),Kt.A9(Kt.n_([Kt._O("epoch"),ri("authorizedVoter")]),Kt.cv(Kt.Jq(),-8),"authorizedVoters"),Kt.n_([Kt.A9(Kt.n_([ri("authorizedPubkey"),Kt._O("epochOfLastAuthorizedSwitch"),Kt._O("targetEpoch")]),32,"buf"),Kt._O("idx"),Kt.u8("isEmpty")],"priorVoters"),Kt._O(),Kt.A9(Kt.n_([Kt._O("epoch"),Kt._O("credits"),Kt._O("prevCredits")]),Kt.cv(Kt.Jq(),-8),"epochCredits"),Kt.n_([Kt._O("slot"),Kt._O("timestamp")],"lastTimestamp")]);var Qa,eu,tu,ru,nu,iu,ou,su,au,uu,cu,fu,lu,hu,pu=r(82433),du=r(62307),yu=Object.defineProperty,gu=Object.getOwnPropertyDescriptor,bu=Object.getOwnPropertyNames,mu=Object.prototype.hasOwnProperty,wu=(e,t)=>function(){return e&&(t=(0,e[bu(e)[0]])(e=0)),t},vu=(e,t)=>{for(var r in t)yu(e,r,{get:t[r],enumerable:!0})},ku=(e,t,r,n)=>{if(t&&"object"===typeof t||"function"===typeof t)for(let i of bu(t))mu.call(e,i)||i===r||yu(e,i,{get:()=>t[i],enumerable:!(n=gu(t,i))||n.enumerable});return e},xu=e=>ku(yu({},"__esModule",{value:!0}),e),Su=(e,t,r)=>new Promise(((n,i)=>{var o=e=>{try{a(r.next(e))}catch(t){i(t)}},s=e=>{try{a(r.throw(e))}catch(t){i(t)}},a=e=>e.done?n(e.value):Promise.resolve(e.value).then(o,s);a((r=r.apply(e,t)).next())})),Eu={};vu(Eu,{default:()=>hu,devDependencies:()=>cu,files:()=>tu,gitHead:()=>lu,license:()=>su,main:()=>nu,module:()=>iu,name:()=>Qa,peerDependencies:()=>uu,publishConfig:()=>au,scripts:()=>fu,type:()=>ru,types:()=>ou,version:()=>eu});var Iu=wu({"package.json"(){Qa="@particle-network/solana-wallet",eu="1.0.2",tu=["es","lib","LICENSE"],ru="module",nu="lib/index.js",iu="es/index.js",ou="lib/types/index.d.ts",su="Apache-2.0",au={access:"public"},uu={"@particle-network/auth":">=1.0.1","@solana/web3.js":"^1.50.1",bs58:"^4.0.1"},cu={"@particle-network/auth":"^1.0.2","@solana/web3.js":"^1.50.1","@types/bs58":"^4.0.1",bs58:"^4.0.1","ts-loader":"^9.3.1","webpack-cli":"^4.10.0"},fu={clean:"shx rm -rf lib/* && shx rm -rf es/*",package:'shx echo \'{ "type": "commonjs" }\' > lib/package.json',build:"yarn clean && node ./esBuild.js && tsc --emitDeclarationOnly -p tsconfig.json && yarn package","build:min.js":"webpack",version:"yarn build"},lu="cc999e430ebfb1dd821783f7cf099ddd51f3495a",hu={name:Qa,version:eu,files:tu,type:ru,main:nu,module:iu,types:ou,license:su,publishConfig:au,peerDependencies:uu,devDependencies:cu,scripts:fu,gitHead:lu}}});function Bu(){const e=(Iu(),xu(Eu));return`web_${e.version}`}var Au=class{constructor(e){this.auth=e,this.isParticleNetwork=!0,this.name="Particle",this.url="https://particle.network",this.icon="https://static.particle.network/wallet-icons/Particle.png",this.events=new du.EventEmitter,this.auth=e,this._connecting=!1;const t=this.auth.getUserInfo();if(t){const e=t.wallets.find((e=>"solana"===e.chain_name&&e.public_address.length>0));this._publicKey=e?new Mn(e.public_address):null}else this._publicKey=null;this.auth.on("connect",(e=>{const t=e.wallets.find((e=>"solana"===e.chain_name&&e.public_address.length>0));t&&(this._publicKey=new Mn(t.public_address),this.events.emit("connect",this._publicKey))})),this.auth.on("disconnect",(()=>{this._publicKey=null,this.events.emit("disconnect")})),"undefined"!==typeof window&&window.particle&&(window.particle.solanaWallet=this)}get version(){return Bu()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}get connecting(){return this._connecting}get connected(){return null!==this._publicKey}get publicKey(){return this._publicKey}connect(e){return Su(this,null,(function*(){try{this._connecting=!0;let t=this.auth.getWallet();return t?(this._publicKey=new Mn(t.public_address),Promise.resolve()):(yield this.auth.login(e),t=this.auth.getWallet(),t?(this._publicKey=new Mn(t.public_address),Promise.resolve()):Promise.reject("wallet create failed"))}catch(t){return Promise.reject(t)}finally{this._connecting=!1}}))}disconnect(){return Su(this,null,(function*(){return yield this.auth.logout(),this._publicKey=null,Promise.resolve()}))}signTransaction(e){return Su(this,null,(function*(){const t=yield this.auth.sign("signTransaction",Tt.encode(e.serialize({requireAllSignatures:!1,verifySignatures:!1})));return Oi.from(pu.Buffer.from(t,"base64"))}))}signAllTransactions(e){return Su(this,null,(function*(){const t=yield this.auth.signAllTransactions(e.map((e=>Tt.encode(e.serialize({requireAllSignatures:!1,verifySignatures:!1})))));return t.map((e=>Oi.from(pu.Buffer.from(e,"base64"))))}))}signAndSendTransaction(e){return Su(this,null,(function*(){return this.auth.sendTransaction(Tt.encode(e.serialize({requireAllSignatures:!1,verifySignatures:!1})))}))}signMessage(e){return Su(this,null,(function*(){const t=yield this.auth.sign("signMessage",Tt.encode(e));return pu.Buffer.from(t,"base64")}))}getConnection(e){const t=`${(0,i.oy)()}/solana`;return new _a(`${t}?chainId=${this.auth.getChainId()}&projectUuid=${this.auth.config.projectId}&projectKey=${this.auth.config.clientKey}`,{commitment:null==e?void 0:e.commitment,wsEndpoint:null==e?void 0:e.wsEndpoint,httpHeaders:{Authorization:this.auth.basicCredentials()},fetch:null==e?void 0:e.fetch,fetchMiddleware:null==e?void 0:e.fetchMiddleware,disableRetryOnRateLimit:null==e?void 0:e.disableRetryOnRateLimit,confirmTransactionInitialTimeout:null==e?void 0:e.confirmTransactionInitialTimeout})}}},6e4:function(e,t,r){"use strict";r.r(t),r.d(t,{TextDecoder:function(){return d},TextEncoder:function(){return y}});r(57658),r(1439),r(87585),r(55315);function n(e,t,r){return t<=e&&e<=r}function i(e){if(void 0===e)return{};if(e===Object(e))return e;throw TypeError("Could not convert argument to dictionary")}function o(e){var t=String(e),r=t.length,n=0,i=[];while(n<r){var o=t.charCodeAt(n);if(o<55296||o>57343)i.push(o);else if(56320<=o&&o<=57343)i.push(65533);else if(55296<=o&&o<=56319)if(n===r-1)i.push(65533);else{var s=e.charCodeAt(n+1);if(56320<=s&&s<=57343){var a=1023&o,u=1023&s;i.push(65536+(a<<10)+u),n+=1}else i.push(65533)}n+=1}return i}function s(e){for(var t="",r=0;r<e.length;++r){var n=e[r];n<=65535?t+=String.fromCharCode(n):(n-=65536,t+=String.fromCharCode(55296+(n>>10),56320+(1023&n)))}return t}var a=-1;function u(e){this.tokens=[].slice.call(e)}u.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():a},prepend:function(e){if(Array.isArray(e)){var t=e;while(t.length)this.tokens.unshift(t.pop())}else this.tokens.unshift(e)},push:function(e){if(Array.isArray(e)){var t=e;while(t.length)this.tokens.push(t.shift())}else this.tokens.push(e)}};var c=-1;function f(e,t){if(e)throw TypeError("Decoder error");return t||65533}function l(){}function h(){}l.prototype={handler:function(e,t){}},h.prototype={handler:function(e,t){}};var p="utf-8";function d(e,t){if(!(this instanceof d))return new d(e,t);if(e=void 0!==e?String(e).toLowerCase():p,e!==p)throw new Error("Encoding not supported. Only utf-8 is supported");t=i(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=Boolean(t["fatal"]),this._ignoreBOM=Boolean(t["ignoreBOM"]),Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}function y(e,t){if(!(this instanceof y))return new y(e,t);if(e=void 0!==e?String(e).toLowerCase():p,e!==p)throw new Error("Encoding not supported. Only utf-8 is supported");t=i(t),this._streaming=!1,this._encoder=null,this._options={fatal:Boolean(t["fatal"])},Object.defineProperty(this,"encoding",{value:"utf-8"})}function g(e){var t=e.fatal,r=0,i=0,o=0,s=128,u=191;this.handler=function(e,l){if(l===a&&0!==o)return o=0,f(t);if(l===a)return c;if(0===o){if(n(l,0,127))return l;if(n(l,194,223))o=1,r=l-192;else if(n(l,224,239))224===l&&(s=160),237===l&&(u=159),o=2,r=l-224;else{if(!n(l,240,244))return f(t);240===l&&(s=144),244===l&&(u=143),o=3,r=l-240}return r<<=6*o,null}if(!n(l,s,u))return r=o=i=0,s=128,u=191,e.prepend(l),f(t);if(s=128,u=191,i+=1,r+=l-128<<6*(o-i),i!==o)return null;var h=r;return r=o=i=0,h}}function b(e){e.fatal;this.handler=function(e,t){if(t===a)return c;if(n(t,0,127))return t;var r,i;n(t,128,2047)?(r=1,i=192):n(t,2048,65535)?(r=2,i=224):n(t,65536,1114111)&&(r=3,i=240);var o=[(t>>6*r)+i];while(r>0){var s=t>>6*(r-1);o.push(128|63&s),r-=1}return o}}d.prototype={decode:function(e,t){var r;r="object"===typeof e&&e instanceof ArrayBuffer?new Uint8Array(e):"object"===typeof e&&"buffer"in e&&e.buffer instanceof ArrayBuffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(0),t=i(t),this._streaming||(this._decoder=new g({fatal:this._fatal}),this._BOMseen=!1),this._streaming=Boolean(t["stream"]);var n,o=new u(r),a=[];while(!o.endOfStream()){if(n=this._decoder.handler(o,o.read()),n===c)break;null!==n&&(Array.isArray(n)?a.push.apply(a,n):a.push(n))}if(!this._streaming){do{if(n=this._decoder.handler(o,o.read()),n===c)break;null!==n&&(Array.isArray(n)?a.push.apply(a,n):a.push(n))}while(!o.endOfStream());this._decoder=null}return a.length&&(-1===["utf-8"].indexOf(this.encoding)||this._ignoreBOM||this._BOMseen||(65279===a[0]?(this._BOMseen=!0,a.shift()):this._BOMseen=!0)),s(a)}},y.prototype={encode:function(e,t){e=e?String(e):"",t=i(t),this._streaming||(this._encoder=new b(this._options)),this._streaming=Boolean(t["stream"]);var r,n=[],s=new u(o(e));while(!s.endOfStream()){if(r=this._encoder.handler(s,s.read()),r===c)break;Array.isArray(r)?n.push.apply(n,r):n.push(r)}if(!this._streaming){while(1){if(r=this._encoder.handler(s,s.read()),r===c)break;Array.isArray(r)?n.push.apply(n,r):n.push(r)}this._encoder=null}return new Uint8Array(n)}}}}]);
//# sourceMappingURL=80.827dfa15.js.map